/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};

// src/main.ts
__export(exports, {
  default: () => EmojiChecklistPlugin
});
var import_obsidian3 = __toModule(require("obsidian"));

// src/types.ts
var DEFAULT_SETTINGS = {
  uncheckedEmoji: "\u2B55",
  checkedEmoji: "\u2705"
};

// src/settings.ts
var import_obsidian = __toModule(require("obsidian"));
var EmojiChecklistSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  updateTestSection() {
    if (this.testEl) {
      this.testEl.empty();
      const header = this.testEl.createEl("h3", { text: "Live Preview" });
      const uncheckedExample = this.testEl.createEl("div", { cls: "setting-item" });
      uncheckedExample.createEl("span", { text: "Unchecked example: " });
      const uncheckedContainer = uncheckedExample.createEl("span", { cls: "task-preview" });
      uncheckedContainer.createEl("span", {
        text: this.plugin.settings.uncheckedEmoji,
        cls: "emoji-preview"
      });
      uncheckedContainer.createEl("span", { text: " Sample task" });
      const checkedExample = this.testEl.createEl("div", { cls: "setting-item" });
      checkedExample.createEl("span", { text: "Checked example: " });
      const checkedContainer = checkedExample.createEl("span", { cls: "task-preview" });
      checkedContainer.createEl("span", {
        text: this.plugin.settings.checkedEmoji,
        cls: "emoji-preview"
      });
      const checkedText = checkedContainer.createEl("span", { text: " Sample task" });
      checkedText.style.textDecoration = "line-through";
      checkedText.style.color = "var(--text-muted)";
      header.style.marginTop = "2em";
      header.style.marginBottom = "1em";
      uncheckedExample.style.marginBottom = "0.5em";
      checkedExample.style.marginBottom = "0.5em";
    }
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Emoji Checklist Settings" });
    new import_obsidian.Setting(containerEl).setName("Unchecked emoji").setDesc("Emoji to display for unchecked items").addText((text) => text.setPlaceholder("Enter emoji").setValue(this.plugin.settings.uncheckedEmoji).onChange(async (value) => {
      this.plugin.settings.uncheckedEmoji = value;
      await this.plugin.saveSettings();
      this.updateTestSection();
    }));
    new import_obsidian.Setting(containerEl).setName("Checked emoji").setDesc("Emoji to display for checked items").addText((text) => text.setPlaceholder("Enter emoji").setValue(this.plugin.settings.checkedEmoji).onChange(async (value) => {
      this.plugin.settings.checkedEmoji = value;
      await this.plugin.saveSettings();
      this.updateTestSection();
    }));
    new import_obsidian.Setting(containerEl).setName("Restore defaults").setDesc("Reset all settings to their default values").addButton((button) => button.setButtonText("Restore Defaults").onClick(async () => {
      this.plugin.settings = Object.assign({}, DEFAULT_SETTINGS);
      await this.plugin.saveSettings();
      this.display();
      new import_obsidian.Notice("Settings restored to defaults");
    }));
    this.testEl = containerEl.createDiv();
    this.updateTestSection();
  }
};

// src/processor.ts
var import_obsidian2 = __toModule(require("obsidian"));
var EmojiRenderChild = class extends import_obsidian2.MarkdownRenderChild {
  constructor(span) {
    super(span);
    this.span = span;
  }
  onunload() {
  }
};
var processCheckboxes = function(el, ctx) {
  const checkboxes = el.querySelectorAll('.contains-task-list input[type="checkbox"]');
  checkboxes.forEach((checkbox) => {
    if (checkbox instanceof HTMLInputElement) {
      const span = document.createElement("span");
      span.className = "task-list-emoji";
      span.textContent = checkbox.checked ? this.settings.checkedEmoji : this.settings.uncheckedEmoji;
      span.addEventListener("click", async (e) => {
        e.preventDefault();
        e.stopPropagation();
        checkbox.checked = !checkbox.checked;
        span.textContent = checkbox.checked ? this.settings.checkedEmoji : this.settings.uncheckedEmoji;
        const view = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
        if (view) {
          const editor = view.editor;
          const sectionInfo = ctx.getSectionInfo(el);
          if (sectionInfo) {
            const lineText = editor.getLine(sectionInfo.lineStart);
            const newText = checkbox.checked ? lineText.replace("[ ]", "[x]") : lineText.replace("[x]", "[ ]");
            editor.transaction({
              changes: [{
                from: { line: sectionInfo.lineStart, ch: 0 },
                to: { line: sectionInfo.lineStart, ch: lineText.length },
                text: newText
              }]
            });
          }
        }
        checkbox.dispatchEvent(new Event("change", { bubbles: true }));
        const sourcePath = ctx.sourcePath;
        if (sourcePath) {
          const renderChild = new EmojiRenderChild(span);
          ctx.addChild(renderChild);
        }
      });
      const container = checkbox.parentElement;
      if (container) {
        container.style.display = "flex";
        container.style.alignItems = "center";
        container.style.gap = "0.5em";
      }
      checkbox.style.display = "none";
      checkbox.after(span);
      checkbox.addEventListener("change", () => {
        span.textContent = checkbox.checked ? this.settings.checkedEmoji : this.settings.uncheckedEmoji;
      });
    }
  });
};

// src/main.ts
var EmojiChecklistPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    await this.loadSettings();
    this.registerMarkdownPostProcessor(processCheckboxes.bind(this));
    this.addSettingTab(new EmojiChecklistSettingTab(this.app, this));
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvcHJvY2Vzc29yLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBFbW9qaUNoZWNrbGlzdFNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBFbW9qaUNoZWNrbGlzdFNldHRpbmdUYWIgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IHByb2Nlc3NDaGVja2JveGVzIH0gZnJvbSAnLi9wcm9jZXNzb3InO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbW9qaUNoZWNrbGlzdFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IEVtb2ppQ2hlY2tsaXN0U2V0dGluZ3M7XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJNYXJrZG93blBvc3RQcm9jZXNzb3IocHJvY2Vzc0NoZWNrYm94ZXMuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgRW1vamlDaGVja2xpc3RTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgfVxufSIsICJleHBvcnQgaW50ZXJmYWNlIEVtb2ppQ2hlY2tsaXN0U2V0dGluZ3Mge1xuICAgIHVuY2hlY2tlZEVtb2ppOiBzdHJpbmc7XG4gICAgY2hlY2tlZEVtb2ppOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBFbW9qaUNoZWNrbGlzdFNldHRpbmdzID0ge1xuICAgIHVuY2hlY2tlZEVtb2ppOiAnXHUyQjU1JyxcbiAgICBjaGVja2VkRW1vamk6ICdcdTI3MDUnXG59OyIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIEVtb2ppQ2hlY2tsaXN0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBFbW9qaUNoZWNrbGlzdFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwbHVnaW46IEVtb2ppQ2hlY2tsaXN0UGx1Z2luO1xuICAgIHRlc3RFbDogSFRNTEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBFbW9qaUNoZWNrbGlzdFBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIHVwZGF0ZVRlc3RTZWN0aW9uKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy50ZXN0RWwpIHtcbiAgICAgICAgICAgIHRoaXMudGVzdEVsLmVtcHR5KCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IHRoaXMudGVzdEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0xpdmUgUHJldmlldycgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHVuY2hlY2tlZEV4YW1wbGUgPSB0aGlzLnRlc3RFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZXR0aW5nLWl0ZW0nIH0pO1xuICAgICAgICAgICAgdW5jaGVja2VkRXhhbXBsZS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1VuY2hlY2tlZCBleGFtcGxlOiAnIH0pO1xuICAgICAgICAgICAgY29uc3QgdW5jaGVja2VkQ29udGFpbmVyID0gdW5jaGVja2VkRXhhbXBsZS5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAndGFzay1wcmV2aWV3JyB9KTtcbiAgICAgICAgICAgIHVuY2hlY2tlZENvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnBsdWdpbi5zZXR0aW5ncy51bmNoZWNrZWRFbW9qaSxcbiAgICAgICAgICAgICAgICBjbHM6ICdlbW9qaS1wcmV2aWV3J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB1bmNoZWNrZWRDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICcgU2FtcGxlIHRhc2snIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBjaGVja2VkRXhhbXBsZSA9IHRoaXMudGVzdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbScgfSk7XG4gICAgICAgICAgICBjaGVja2VkRXhhbXBsZS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ0NoZWNrZWQgZXhhbXBsZTogJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrZWRDb250YWluZXIgPSBjaGVja2VkRXhhbXBsZS5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAndGFzay1wcmV2aWV3JyB9KTtcbiAgICAgICAgICAgIGNoZWNrZWRDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tlZEVtb2ppLFxuICAgICAgICAgICAgICAgIGNsczogJ2Vtb2ppLXByZXZpZXcnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrZWRUZXh0ID0gY2hlY2tlZENvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJyBTYW1wbGUgdGFzaycgfSk7XG4gICAgICAgICAgICBjaGVja2VkVGV4dC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdsaW5lLXRocm91Z2gnO1xuICAgICAgICAgICAgY2hlY2tlZFRleHQuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuXG4gICAgICAgICAgICBoZWFkZXIuc3R5bGUubWFyZ2luVG9wID0gJzJlbSc7XG4gICAgICAgICAgICBoZWFkZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XG4gICAgICAgICAgICB1bmNoZWNrZWRFeGFtcGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwLjVlbSc7XG4gICAgICAgICAgICBjaGVja2VkRXhhbXBsZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMC41ZW0nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdFbW9qaSBDaGVja2xpc3QgU2V0dGluZ3MnIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1VuY2hlY2tlZCBlbW9qaScpXG4gICAgICAgICAgICAuc2V0RGVzYygnRW1vamkgdG8gZGlzcGxheSBmb3IgdW5jaGVja2VkIGl0ZW1zJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgZW1vamknKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51bmNoZWNrZWRFbW9qaSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnVuY2hlY2tlZEVtb2ppID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRlc3RTZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NoZWNrZWQgZW1vamknKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Vtb2ppIHRvIGRpc3BsYXkgZm9yIGNoZWNrZWQgaXRlbXMnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciBlbW9qaScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrZWRFbW9qaSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrZWRFbW9qaSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUZXN0U2VjdGlvbigpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdSZXN0b3JlIGRlZmF1bHRzJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdSZXNldCBhbGwgc2V0dGluZ3MgdG8gdGhlaXIgZGVmYXVsdCB2YWx1ZXMnKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1Jlc3RvcmUgRGVmYXVsdHMnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdTZXR0aW5ncyByZXN0b3JlZCB0byBkZWZhdWx0cycpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICB0aGlzLnRlc3RFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuICAgICAgICB0aGlzLnVwZGF0ZVRlc3RTZWN0aW9uKCk7XG4gICAgfVxufVxuIiwgImltcG9ydCB0eXBlIHsgTWFya2Rvd25Qb3N0UHJvY2Vzc29yLCBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgRW1vamlDaGVja2xpc3RQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IE1hcmtkb3duUmVuZGVyQ2hpbGQsIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcblxuY2xhc3MgRW1vamlSZW5kZXJDaGlsZCBleHRlbmRzIE1hcmtkb3duUmVuZGVyQ2hpbGQge1xuICAgIHByaXZhdGUgc3BhbjogSFRNTFNwYW5FbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3Ioc3BhbjogSFRNTFNwYW5FbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKHNwYW4pO1xuICAgICAgICB0aGlzLnNwYW4gPSBzcGFuO1xuICAgIH1cblxuICAgIG9udW5sb2FkKCkge1xuICAgICAgICAvLyBPcHRpb25hbDogQWRkIGFueSBjbGVhbnVwIGxvZ2ljIGlmIG5lZWRlZFxuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IHByb2Nlc3NDaGVja2JveGVzOiBNYXJrZG93blBvc3RQcm9jZXNzb3IgPSBmdW5jdGlvbihcbiAgICB0aGlzOiBFbW9qaUNoZWNrbGlzdFBsdWdpbixcbiAgICBlbDogSFRNTEVsZW1lbnQsXG4gICAgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0XG4pIHtcbiAgICBjb25zdCBjaGVja2JveGVzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnLmNvbnRhaW5zLXRhc2stbGlzdCBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcblxuICAgIGNoZWNrYm94ZXMuZm9yRWFjaCgoY2hlY2tib3g6IEVsZW1lbnQpID0+IHtcbiAgICAgICAgaWYgKGNoZWNrYm94IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIHNwYW4uY2xhc3NOYW1lID0gJ3Rhc2stbGlzdC1lbW9qaSc7XG4gICAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gY2hlY2tib3guY2hlY2tlZCA/IHRoaXMuc2V0dGluZ3MuY2hlY2tlZEVtb2ppIDogdGhpcy5zZXR0aW5ncy51bmNoZWNrZWRFbW9qaTtcblxuICAgICAgICAgICAgc3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gIWNoZWNrYm94LmNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IGNoZWNrYm94LmNoZWNrZWQgPyB0aGlzLnNldHRpbmdzLmNoZWNrZWRFbW9qaSA6IHRoaXMuc2V0dGluZ3MudW5jaGVja2VkRW1vamk7XG5cbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgdmlld1xuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICAgICAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IHZpZXcuZWRpdG9yO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWN0aW9uSW5mbyA9IGN0eC5nZXRTZWN0aW9uSW5mbyhlbCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VjdGlvbkluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVUZXh0ID0gZWRpdG9yLmdldExpbmUoc2VjdGlvbkluZm8ubGluZVN0YXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RleHQgPSBjaGVja2JveC5jaGVja2VkIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbGluZVRleHQucmVwbGFjZSgnWyBdJywgJ1t4XScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBsaW5lVGV4dC5yZXBsYWNlKCdbeF0nLCAnWyBdJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci50cmFuc2FjdGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlczogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogeyBsaW5lOiBzZWN0aW9uSW5mby5saW5lU3RhcnQsIGNoOiAwIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiB7IGxpbmU6IHNlY3Rpb25JbmZvLmxpbmVTdGFydCwgY2g6IGxpbmVUZXh0Lmxlbmd0aCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBuZXdUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2hlY2tib3guZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2NoYW5nZScsIHsgYnViYmxlczogdHJ1ZSB9KSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2VQYXRoID0gY3R4LnNvdXJjZVBhdGg7XG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVuZGVyQ2hpbGQgPSBuZXcgRW1vamlSZW5kZXJDaGlsZChzcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmFkZENoaWxkKHJlbmRlckNoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gY2hlY2tib3gucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5nYXAgPSAnMC41ZW0nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjaGVja2JveC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgY2hlY2tib3guYWZ0ZXIoc3Bhbik7XG5cbiAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gY2hlY2tib3guY2hlY2tlZCA/IHRoaXMuc2V0dGluZ3MuY2hlY2tlZEVtb2ppIDogdGhpcy5zZXR0aW5ncy51bmNoZWNrZWRFbW9qaTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQSx1QkFBdUI7OztBQ0toQixJQUFNLG1CQUEyQztBQUFBLEVBQ3BELGdCQUFnQjtBQUFBLEVBQ2hCLGNBQWM7QUFBQTs7O0FDUGxCLHNCQUF1RDtBQUloRCw2Q0FBdUMsaUNBQWlCO0FBQUEsRUFJM0QsWUFBWSxLQUFVLFFBQThCO0FBQ2hELFVBQU0sS0FBSztBQUNYLFNBQUssU0FBUztBQUFBO0FBQUEsRUFHbEIsb0JBQTBCO0FBQ3RCLFFBQUksS0FBSyxRQUFRO0FBQ2IsV0FBSyxPQUFPO0FBRVosWUFBTSxTQUFTLEtBQUssT0FBTyxTQUFTLE1BQU0sRUFBRSxNQUFNO0FBRWxELFlBQU0sbUJBQW1CLEtBQUssT0FBTyxTQUFTLE9BQU8sRUFBRSxLQUFLO0FBQzVELHVCQUFpQixTQUFTLFFBQVEsRUFBRSxNQUFNO0FBQzFDLFlBQU0scUJBQXFCLGlCQUFpQixTQUFTLFFBQVEsRUFBRSxLQUFLO0FBQ3BFLHlCQUFtQixTQUFTLFFBQVE7QUFBQSxRQUNoQyxNQUFNLEtBQUssT0FBTyxTQUFTO0FBQUEsUUFDM0IsS0FBSztBQUFBO0FBRVQseUJBQW1CLFNBQVMsUUFBUSxFQUFFLE1BQU07QUFFNUMsWUFBTSxpQkFBaUIsS0FBSyxPQUFPLFNBQVMsT0FBTyxFQUFFLEtBQUs7QUFDMUQscUJBQWUsU0FBUyxRQUFRLEVBQUUsTUFBTTtBQUN4QyxZQUFNLG1CQUFtQixlQUFlLFNBQVMsUUFBUSxFQUFFLEtBQUs7QUFDaEUsdUJBQWlCLFNBQVMsUUFBUTtBQUFBLFFBQzlCLE1BQU0sS0FBSyxPQUFPLFNBQVM7QUFBQSxRQUMzQixLQUFLO0FBQUE7QUFFVCxZQUFNLGNBQWMsaUJBQWlCLFNBQVMsUUFBUSxFQUFF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
