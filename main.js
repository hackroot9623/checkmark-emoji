/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};

// src/main.ts
__export(exports, {
  default: () => EmojiChecklistPlugin
});
var import_obsidian5 = __toModule(require("obsidian"));

// src/types.ts
var DEFAULT_SETTINGS = {
  checkedEmoji: "\u2705",
  uncheckedEmoji: "\u2B1C\uFE0F",
  tagMappings: [
    {
      tag: "stopper",
      uncheckedEmoji: "\u{1F6D1}",
      checkedEmoji: "\u2705"
    }
  ],
  jiraSettings: {
    enabled: false,
    baseUrl: "",
    username: "",
    apiToken: "",
    triggerWord: "@Jira"
  }
};

// src/settings.ts
var import_obsidian = __toModule(require("obsidian"));
var EmojiChecklistSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  updateTestSection() {
    if (this.testEl) {
      this.testEl.empty();
      const header = this.testEl.createEl("h3", { text: "Live Preview" });
      const uncheckedExample = this.testEl.createEl("div", { cls: "setting-item" });
      uncheckedExample.createEl("span", { text: "Unchecked example: " });
      const uncheckedContainer = uncheckedExample.createEl("span", { cls: "task-preview" });
      uncheckedContainer.createEl("span", {
        text: this.plugin.settings.uncheckedEmoji,
        cls: "emoji-preview"
      });
      uncheckedContainer.createEl("span", { text: " Sample task" });
      const checkedExample = this.testEl.createEl("div", { cls: "setting-item" });
      checkedExample.createEl("span", { text: "Checked example: " });
      const checkedContainer = checkedExample.createEl("span", { cls: "task-preview" });
      checkedContainer.createEl("span", {
        text: this.plugin.settings.checkedEmoji,
        cls: "emoji-preview"
      });
      const checkedText = checkedContainer.createEl("span", { text: " Sample task" });
      checkedText.style.textDecoration = "line-through";
      checkedText.style.color = "var(--text-muted)";
      if (this.plugin.settings.tagMappings.length > 0) {
        const tagHeader = this.testEl.createEl("h3", { text: "Tag Examples" });
        tagHeader.style.marginTop = "2em";
        tagHeader.style.marginBottom = "1em";
        for (const mapping of this.plugin.settings.tagMappings) {
          const tagUncheckedExample = this.testEl.createEl("div", { cls: "setting-item" });
          tagUncheckedExample.createEl("span", { text: `#${mapping.tag} unchecked: ` });
          const tagUncheckedContainer = tagUncheckedExample.createEl("span", { cls: "task-preview" });
          tagUncheckedContainer.createEl("span", {
            text: mapping.uncheckedEmoji,
            cls: "emoji-preview"
          });
          tagUncheckedContainer.createEl("span", { text: ` Sample #${mapping.tag} task` });
          const tagCheckedExample = this.testEl.createEl("div", { cls: "setting-item" });
          tagCheckedExample.createEl("span", { text: `#${mapping.tag} checked: ` });
          const tagCheckedContainer = tagCheckedExample.createEl("span", { cls: "task-preview" });
          tagCheckedContainer.createEl("span", {
            text: mapping.checkedEmoji,
            cls: "emoji-preview"
          });
          const tagCheckedText = tagCheckedContainer.createEl("span", { text: ` Sample #${mapping.tag} task` });
          tagCheckedText.style.textDecoration = "line-through";
          tagCheckedText.style.color = "var(--text-muted)";
          tagUncheckedExample.style.marginBottom = "0.5em";
          tagCheckedExample.style.marginBottom = "0.5em";
        }
      }
      header.style.marginTop = "2em";
      header.style.marginBottom = "1em";
      uncheckedExample.style.marginBottom = "0.5em";
      checkedExample.style.marginBottom = "0.5em";
    }
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Emoji Checklist Settings" });
    new import_obsidian.Setting(containerEl).setName("Default Unchecked Emoji").setDesc("Emoji to display for unchecked tasks").addText((text) => text.setValue(this.plugin.settings.uncheckedEmoji).onChange(async (value) => {
      this.plugin.settings.uncheckedEmoji = value;
      await this.plugin.saveSettings();
      this.updateTestSection();
      console.log("Updated default unchecked emoji:", this.plugin.settings.uncheckedEmoji);
    }));
    new import_obsidian.Setting(containerEl).setName("Default Checked Emoji").setDesc("Emoji to display for checked tasks").addText((text) => text.setValue(this.plugin.settings.checkedEmoji).onChange(async (value) => {
      this.plugin.settings.checkedEmoji = value;
      await this.plugin.saveSettings();
      this.updateTestSection();
      console.log("Updated default checked emoji:", this.plugin.settings.checkedEmoji);
    }));
    containerEl.createEl("h3", { text: "Tag Mappings" });
    const tagMappingsContainer = containerEl.createDiv("tag-mappings");
    this.plugin.settings.tagMappings.forEach((mapping, index) => {
      const mappingContainer = tagMappingsContainer.createDiv("tag-mapping");
      new import_obsidian.Setting(mappingContainer).setName(`Tag #${mapping.tag}`).addText((text) => text.setPlaceholder("tag name").setValue(mapping.tag).onChange(async (value) => {
        this.plugin.settings.tagMappings[index].tag = value;
        await this.plugin.saveSettings();
        this.updateTestSection();
        console.log("Updated tag mapping:", this.plugin.settings.tagMappings);
      })).addText((text) => text.setPlaceholder("unchecked emoji").setValue(mapping.uncheckedEmoji).onChange(async (value) => {
        this.plugin.settings.tagMappings[index].uncheckedEmoji = value;
        await this.plugin.saveSettings();
        this.updateTestSection();
        console.log("Updated tag mapping:", this.plugin.settings.tagMappings);
      })).addText((text) => text.setPlaceholder("checked emoji").setValue(mapping.checkedEmoji).onChange(async (value) => {
        this.plugin.settings.tagMappings[index].checkedEmoji = value;
        await this.plugin.saveSettings();
        this.updateTestSection();
        console.log("Updated tag mapping:", this.plugin.settings.tagMappings);
      })).addButton((button) => button.setIcon("trash").onClick(async () => {
        this.plugin.settings.tagMappings.splice(index, 1);
        await this.plugin.saveSettings();
        this.display();
        console.log("Removed tag mapping, remaining:", this.plugin.settings.tagMappings);
      }));
    });
    new import_obsidian.Setting(containerEl).setName("Add Tag Mapping").setDesc("Add a new tag-emoji mapping").addButton((button) => button.setButtonText("Add New Tag").onClick(async () => {
      this.plugin.settings.tagMappings.push({
        tag: "newtag",
        uncheckedEmoji: "\u2B55",
        checkedEmoji: "\u2705"
      });
      await this.plugin.saveSettings();
      console.log("Added new tag mapping:", this.plugin.settings.tagMappings);
      this.display();
    }));
    new import_obsidian.Setting(containerEl).setName("Reset Settings").setDesc("Restore all settings to their defaults").addButton((button) => button.setButtonText("Restore Defaults").onClick(async () => {
      this.plugin.settings = Object.assign({}, DEFAULT_SETTINGS);
      await this.plugin.saveSettings();
      console.log("Reset settings to defaults:", this.plugin.settings);
      this.display();
      new import_obsidian.Notice("Settings restored to defaults");
    }));
    containerEl.createEl("h3", { text: "Jira Integration" });
    new import_obsidian.Setting(containerEl).setName("Enable Jira Integration").setDesc("Enable or disable Jira integration").addToggle((toggle) => toggle.setValue(this.plugin.settings.jiraSettings.enabled).onChange(async (value) => {
      this.plugin.settings.jiraSettings.enabled = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Trigger Word").setDesc("Word that triggers Jira task insertion (e.g., @jira)").addText((text) => text.setPlaceholder("@jira").setValue(this.plugin.settings.jiraSettings.triggerWord).onChange(async (value) => {
      this.plugin.settings.jiraSettings.triggerWord = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Jira Base URL").setDesc("Your Jira instance URL (e.g., https://your-domain.atlassian.net)").addText((text) => text.setPlaceholder("https://your-domain.atlassian.net").setValue(this.plugin.settings.jiraSettings.baseUrl).onChange(async (value) => {
      this.plugin.settings.jiraSettings.baseUrl = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Username").setDesc("Your Jira email address").addText((text) => text.setPlaceholder("email@example.com").setValue(this.plugin.settings.jiraSettings.username).onChange(async (value) => {
      this.plugin.settings.jiraSettings.username = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("API Token").setDesc("Your Jira API token (from https://id.atlassian.com/manage-profile/security/api-tokens)").addText((text) => text.setPlaceholder("Enter your API token").setValue(this.plugin.settings.jiraSettings.apiToken).onChange(async (value) => {
      this.plugin.settings.jiraSettings.apiToken = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Apply Changes").setDesc("Apply emoji changes to all open notes").addButton((button) => button.setButtonText("Apply Changes").onClick(() => {
      this.plugin.refreshAllNotes();
    }));
    this.testEl = containerEl.createDiv();
    this.updateTestSection();
  }
};

// src/processor.ts
var import_obsidian2 = __toModule(require("obsidian"));
var EmojiRenderChild = class extends import_obsidian2.MarkdownRenderChild {
  constructor(span) {
    super(span);
    this.span = span;
  }
  onunload() {
  }
};
var CheckboxProcessor = class {
  static findTagInLine(listItem) {
    const text = listItem.textContent || "";
    const tagMatch = text.replace(/^[^\w\s#]*\s*/, "").match(/#(\w+)/);
    return tagMatch ? tagMatch[1] : null;
  }
  static getEmojisForTag(plugin, tag, isChecked) {
    if (!tag) {
      return isChecked ? plugin.settings.checkedEmoji : plugin.settings.uncheckedEmoji;
    }
    const mapping = plugin.settings.tagMappings.find((m) => m.tag === tag);
    if (!mapping) {
      return isChecked ? plugin.settings.checkedEmoji : plugin.settings.uncheckedEmoji;
    }
    return isChecked ? mapping.checkedEmoji : mapping.uncheckedEmoji;
  }
  static updateEditorContent(editor, lineIndex, newEmoji) {
    const lineText = editor.getLine(lineIndex);
    const newText = lineText.replace(/^[^\w\s#]*\s*/, `${newEmoji} `);
    const change = {
      from: { line: lineIndex, ch: 0 },
      to: { line: lineIndex, ch: lineText.length },
      text: newText
    };
    editor.transaction({ changes: [change] });
  }
  static createEmojiSpan(emoji) {
    const span = document.createElement("span");
    span.className = "task-list-emoji";
    span.textContent = emoji;
    return span;
  }
  static styleContainer(container) {
    if (container) {
      container.style.display = "inline-block";
      container.style.verticalAlign = "top";
      container.style.marginRight = "0.5em";
    }
  }
  static setupEventListeners(plugin, checkbox, span, tag, index, editor, sectionInfo, ctx) {
    const updateEmoji = (isChecked) => {
      const newEmoji = this.getEmojisForTag(plugin, tag, isChecked);
      span.textContent = newEmoji;
      if (editor && sectionInfo) {
        this.updateEditorContent(editor, sectionInfo.lineStart + index, newEmoji);
      }
    };
    const toggleCheckbox = async () => {
      checkbox.checked = !checkbox.checked;
      updateEmoji(checkbox.checked);
      checkbox.dispatchEvent(new Event("change", { bubbles: true }));
      checkbox.dispatchEvent(new Event("click", { bubbles: true }));
      if (ctx.sourcePath) {
        ctx.addChild(new EmojiRenderChild(span));
      }
    };
    span.addEventListener("click", async (e) => {
      e.preventDefault();
      e.stopPropagation();
      await toggleCheckbox();
    });
    checkbox.addEventListener("change", () => {
      updateEmoji(checkbox.checked);
    });
  }
  static async processCheckbox(plugin, checkbox, index, editor, sectionInfo, ctx) {
    const listItem = checkbox.closest("li.task-list-item");
    if (!listItem)
      return;
    const tag = this.findTagInLine(listItem);
    const emoji = this.getEmojisForTag(plugin, tag, checkbox.checked);
    const span = this.createEmojiSpan(emoji);
    if (editor && sectionInfo) {
      this.updateEditorContent(editor, sectionInfo.lineStart + index, emoji);
    }
    this.setupEventListeners(plugin, checkbox, span, tag, index, editor, sectionInfo, ctx);
    this.styleContainer(checkbox.parentElement);
    checkbox.style.display = "none";
    checkbox.after(span);
  }
};
var processCheckboxes = function(el, ctx) {
  const checkboxes = el.querySelectorAll('li.task-list-item input[type="checkbox"]');
  const view = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
  const editor = view == null ? void 0 : view.editor;
  const sectionInfo = ctx.getSectionInfo(el);
  checkboxes.forEach((checkbox, index) => {
    if (!(checkbox instanceof HTMLInputElement))
      return;
    CheckboxProcessor.processCheckbox(this, checkbox, index, editor, sectionInfo, ctx);
  });
};

// src/jira.ts
var import_obsidian3 = __toModule(require("obsidian"));
var JiraClient = class {
  constructor(settings) {
    this.settings = settings;
  }
  getAuthHeader() {
    const credentials = `${this.settings.username}:${this.settings.apiToken}`;
    const base64Credentials = Buffer.from(credentials).toString("base64");
    return `Basic ${base64Credentials}`;
  }
  async testConnection() {
    const baseUrl = this.settings.baseUrl.replace(/\/$/, "");
    const apiUrl = `${baseUrl}/rest/api/2/myself`;
    try {
      const response = await (0, import_obsidian3.requestUrl)({
        url: apiUrl,
        method: "GET",
        headers: {
          "Authorization": this.getAuthHeader(),
          "Accept": "application/json"
        }
      });
      return response.status === 200;
    } catch (error) {
      console.error("Connection test failed:", error);
      return false;
    }
  }
  async searchTasks(query) {
    if (!this.settings.enabled || !this.settings.baseUrl || !this.settings.apiToken) {
      throw new Error("Jira integration is not properly configured");
    }
    const isConnected = await this.testConnection();
    if (!isConnected) {
      throw new Error("Could not authenticate with Jira. Please check your credentials.");
    }
    const baseUrl = this.settings.baseUrl.replace(/\/$/, "");
    const sanitizedQuery = query.replace(/["']/g, "");
    let jql;
    if (sanitizedQuery.toLowerCase() === "my tasks" || sanitizedQuery.toLowerCase() === "assigned to me") {
      jql = "assignee = currentUser()";
    } else if (sanitizedQuery.toLowerCase().startsWith("my")) {
      const status = sanitizedQuery.toLowerCase().includes("done") ? "Done" : sanitizedQuery.toLowerCase().includes("open") ? "Open" : null;
      jql = status ? `assignee = currentUser() AND status = "${status}"` : `assignee = currentUser() AND (summary ~ "${sanitizedQuery}" OR description ~ "${sanitizedQuery}")`;
    } else {
      jql = `assignee = currentUser() AND (summary ~ "${sanitizedQuery}" OR description ~ "${sanitizedQuery}")`;
    }
    jql += " ORDER BY updated DESC";
    console.log("JQL Query:", jql);
    const apiUrl = `${baseUrl}/rest/api/2/search?jql=${encodeURIComponent(jql)}&maxResults=10&fields=summary,status`;
    console.log("API URL:", apiUrl);
    const requestParams = {
      url: apiUrl,
      method: "GET",
      headers: {
        "Authorization": this.getAuthHeader(),
        "Accept": "application/json"
      }
    };
    try {
      console.log("Making request...");
      const response = await (0, import_obsidian3.requestUrl)(requestParams);
      console.log("Response status:", response.status);
      if (response.status !== 200) {
        console.error("Error response:", response.text);
        throw new Error(`Jira API returned status ${response.status}: ${response.text}`);
      }
      if (!response.json || !response.json.issues) {
        console.error("Invalid response format:", response);
        throw new Error("Invalid response format from Jira API");
      }
      console.log("Found issues:", response.json.issues.length);
      return response.json.issues.map((issue) => {
        var _a;
        return {
          key: issue.key,
          summary: issue.fields.summary,
          url: `${baseUrl}/browse/${issue.key}`,
          status: ((_a = issue.fields.status) == null ? void 0 : _a.name) || "Unknown"
        };
      });
    } catch (error) {
      console.error("Error details:", {
        message: error.message,
        status: error.status,
        response: error.response
      });
      if (error.status === 401 || error.status === 403) {
        throw new Error("Authentication failed. Please verify:\n1. Your email address is correct\n2. Your API token is correct\n3. You have the necessary permissions");
      }
      throw error;
    }
  }
  async formatTasksAsMarkdown(tasks) {
    return tasks.map((task) => `- [ ] [${task.key}: ${task.summary}](${task.url}) (${task.status})`).join("\n");
  }
};

// src/suggester.ts
var import_obsidian4 = __toModule(require("obsidian"));
var JiraTaskSuggester = class extends import_obsidian4.SuggestModal {
  constructor(app, tasks, onSelect) {
    super(app);
    this.tasks = [];
    console.log("JiraTaskSuggester constructor called");
    console.log("Tasks received:", tasks);
    this.tasks = tasks;
    this.onSelect = onSelect;
    this.setPlaceholder("Select a Jira task...");
    this.containerEl.addClass("jira-task-suggester");
    this.modalEl.style.maxWidth = "600px";
    this.modalEl.style.width = "80%";
    this.modalEl.style.top = "30%";
    this.modalEl.style.left = "50%";
    this.modalEl.style.transform = "translate(-50%, -30%)";
    this.modalEl.style.position = "fixed";
    const suggestionsContainer = this.modalEl.querySelector(".suggestion-container");
    if (suggestionsContainer instanceof HTMLElement) {
      suggestionsContainer.style.maxHeight = "400px";
      suggestionsContainer.style.width = "100%";
    }
    this.scope = new import_obsidian4.Scope();
    this.scope.register([], "Escape", () => {
      this.close();
      return false;
    });
    console.log("About to open modal");
    this.open();
  }
  open() {
    console.log("Explicitly opening modal");
    super.open();
    this.containerEl.style.display = "block";
    this.containerEl.style.visibility = "visible";
    this.containerEl.style.opacity = "1";
  }
  getSuggestions(query) {
    console.log("Getting suggestions for query:", query);
    const lowerQuery = query.toLowerCase();
    const filteredTasks = this.tasks.filter((task) => task.key.toLowerCase().includes(lowerQuery) || task.summary.toLowerCase().includes(lowerQuery));
    console.log("Filtered tasks:", filteredTasks);
    return filteredTasks;
  }
  renderSuggestion(task, el) {
    console.log("Rendering suggestion for task:", task);
    const container = el.createDiv({ cls: "jira-task-suggestion" });
    const keyEl = container.createDiv({ cls: "jira-key" });
    keyEl.setText(task.key);
    const summaryEl = container.createDiv({ cls: "jira-summary" });
    summaryEl.setText(task.summary);
    const statusEl = container.createDiv({ cls: "jira-status" });
    statusEl.setText(task.status);
    el.style.display = "flex";
    el.style.flexDirection = "column";
    el.style.gap = "4px";
    keyEl.style.fontWeight = "bold";
    keyEl.style.color = "var(--text-accent)";
    statusEl.style.fontSize = "0.8em";
    statusEl.style.color = "var(--text-muted)";
    statusEl.style.fontStyle = "italic";
  }
  onChooseSuggestion(task, evt) {
    console.log("Task chosen:", task);
    if (this.onSelect) {
      this.onSelect(task);
    }
    this.close();
  }
};

// src/main.ts
var EmojiChecklistPlugin = class extends import_obsidian5.Plugin {
  async onload() {
    await this.loadSettings();
    console.log("Plugin loaded with settings:", this.settings);
    this.registerEvent(this.app.workspace.on("editor-change", (editor) => {
      const cursor = editor.getCursor();
      const line = editor.getLine(cursor.line);
      const beforeCursor = line.slice(0, cursor.ch);
      const triggerWord = this.settings.jiraSettings.triggerWord;
      console.log("Checking for trigger:", {
        triggerWord,
        beforeCursor,
        endsWith: beforeCursor.endsWith(triggerWord),
        enabled: this.settings.jiraSettings.enabled
      });
      if (beforeCursor.endsWith(triggerWord)) {
        console.log("Trigger word detected, handling Jira trigger");
        this.handleJiraTrigger(editor);
      }
    }));
    this.addCommand({
      id: "insert-jira-issue",
      name: "Insert Jira Issue",
      checkCallback: (checking) => {
        const view = this.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
        if (!view)
          return false;
        if (!checking) {
          this.insertJiraIssue(view);
        }
        return true;
      }
    });
    this.registerMarkdownPostProcessor(processCheckboxes.bind(this));
    this.addSettingTab(new EmojiChecklistSettingTab(this.app, this));
  }
  async insertJiraIssue(view) {
    if (!this.settings.jiraSettings.enabled) {
      new import_obsidian5.Notice("Please enable and configure Jira integration in settings first");
      return;
    }
    try {
      const jiraClient = new JiraClient(this.settings.jiraSettings);
      const tasks = await jiraClient.searchTasks("my tasks");
      if (tasks.length === 0) {
        new import_obsidian5.Notice("No Jira tasks found assigned to you");
        return;
      }
      new JiraTaskSuggester(this.app, tasks, (selectedTask) => {
        const cursor = view.editor.getCursor();
        const taskMarkdown = `- [ ] [${selectedTask.key}: ${selectedTask.summary}](${selectedTask.url}) (${selectedTask.status})`;
        view.editor.replaceRange(taskMarkdown + "\n", cursor, cursor);
        view.editor.setCursor({
          line: cursor.line + 1,
          ch: 0
        });
      });
    } catch (error) {
      console.error("Error fetching Jira tasks:", error);
      new import_obsidian5.Notice(error.message || "Error fetching Jira tasks");
    }
  }
  async handleJiraTrigger(_editor) {
    console.log("handleJiraTrigger called");
    if (!this.settings.jiraSettings.enabled) {
      console.log("Jira integration not enabled");
      new import_obsidian5.Notice("Please enable and configure Jira integration in settings first");
      return;
    }
    try {
      console.log("Creating Jira client with settings:", this.settings.jiraSettings);
      const jiraClient = new JiraClient(this.settings.jiraSettings);
      console.log("Fetching tasks...");
      const tasks = await jiraClient.searchTasks("my tasks");
      console.log("Fetched tasks:", tasks);
      if (tasks.length === 0) {
        console.log("No tasks found");
        new import_obsidian5.Notice("No Jira tasks found assigned to you");
        return;
      }
      console.log("Opening task suggester with", tasks.length, "tasks");
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
      if (!activeView) {
        console.error("No active markdown view");
        new import_obsidian5.Notice("Please open a markdown note first");
        return;
      }
      try {
        const suggester = new JiraTaskSuggester(this.app, tasks, (selectedTask) => {
          console.log("Task selected:", selectedTask);
          const editor = activeView.editor;
          const cursor = editor.getCursor();
          const currentLine = editor.getLine(cursor.line);
          const triggerWord = this.settings.jiraSettings.triggerWord;
          const newLine = currentLine.slice(0, cursor.ch - triggerWord.length) + `[${selectedTask.key}: ${selectedTask.summary}](${selectedTask.url}) (${selectedTask.status})` + currentLine.slice(cursor.ch);
          editor.setLine(cursor.line, newLine);
          editor.setCursor({
            line: cursor.line,
            ch: cursor.ch - triggerWord.length + `[${selectedTask.key}: ${selectedTask.summary}](${selectedTask.url}) (${selectedTask.status})`.length
          });
        });
        console.log("Suggester created:", suggester);
      } catch (suggesterError) {
        console.error("Error creating suggester:", suggesterError);
        new import_obsidian5.Notice("Failed to create task suggester");
      }
    } catch (error) {
      console.error("Error in handleJiraTrigger:", error);
      new import_obsidian5.Notice(error.message || "Error fetching Jira tasks");
    }
  }
  async loadSettings() {
    const loadedData = await this.loadData();
    console.log("Loaded data:", loadedData);
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
    console.log("Merged settings:", this.settings);
  }
  async saveSettings() {
    console.log("Saving settings:", this.settings);
    await this.saveData(this.settings);
  }
  refreshAllNotes() {
    this.app.workspace.trigger("markdown-preview-refresh");
    this.app.workspace.iterateAllLeaves((leaf) => {
      var _a;
      if (leaf.view.getViewType() === "markdown") {
        (_a = leaf.view.previewMode) == null ? void 0 : _a.rerender(true);
      }
    });
    new import_obsidian5.Notice("Applied emoji changes to all notes");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvcHJvY2Vzc29yLnRzIiwgInNyYy9qaXJhLnRzIiwgInNyYy9zdWdnZXN0ZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7RWRpdG9yLCBNYXJrZG93blByZXZpZXdWaWV3LCBNYXJrZG93blZpZXcsIE5vdGljZSwgUGx1Z2lufSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSB7RW1vamlDaGVja2xpc3RTZXR0aW5nc30gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQge0RFRkFVTFRfU0VUVElOR1N9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtFbW9qaUNoZWNrbGlzdFNldHRpbmdUYWJ9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHtwcm9jZXNzQ2hlY2tib3hlc30gZnJvbSAnLi9wcm9jZXNzb3InO1xuaW1wb3J0IHtKaXJhQ2xpZW50fSBmcm9tICcuL2ppcmEnO1xuaW1wb3J0IHtKaXJhVGFza1N1Z2dlc3Rlcn0gZnJvbSAnLi9zdWdnZXN0ZXInO1xuXG4vLyBBdWdtZW50IHRoZSBNYXJrZG93blZpZXcgdHlwZSBmcm9tIE9ic2lkaWFuXG5kZWNsYXJlIG1vZHVsZSAnb2JzaWRpYW4nIHtcbiAgICBpbnRlcmZhY2UgTWFya2Rvd25WaWV3IHtcbiAgICAgICAgcHJldmlld01vZGU6IE1hcmtkb3duUHJldmlld1ZpZXc7XG4gICAgICAgIGVkaXRvcjogRWRpdG9yO1xuICAgIH1cbn0gICBcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW1vamlDaGVja2xpc3RQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBFbW9qaUNoZWNrbGlzdFNldHRpbmdzO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgICAgICBjb25zb2xlLmxvZygnUGx1Z2luIGxvYWRlZCB3aXRoIHNldHRpbmdzOicsIHRoaXMuc2V0dGluZ3MpO1xuXG4gICAgICAgIC8vIFJlZ2lzdGVyIGVkaXRvciBjaGFuZ2UgaGFuZGxlciBmb3IgQCB0cmlnZ2Vyc1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1jaGFuZ2UnLCAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiZWZvcmVDdXJzb3IgPSBsaW5lLnNsaWNlKDAsIGN1cnNvci5jaCk7XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBqdXN0IHR5cGVkIHRoZSB0cmlnZ2VyIHdvcmRcbiAgICAgICAgICAgICAgICBjb25zdCB0cmlnZ2VyV29yZCA9IHRoaXMuc2V0dGluZ3MuamlyYVNldHRpbmdzLnRyaWdnZXJXb3JkO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyBmb3IgdHJpZ2dlcjonLCB7XG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJXb3JkLFxuICAgICAgICAgICAgICAgICAgICBiZWZvcmVDdXJzb3IsXG4gICAgICAgICAgICAgICAgICAgIGVuZHNXaXRoOiBiZWZvcmVDdXJzb3IuZW5kc1dpdGgodHJpZ2dlcldvcmQpLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0aGlzLnNldHRpbmdzLmppcmFTZXR0aW5ncy5lbmFibGVkXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYmVmb3JlQ3Vyc29yLmVuZHNXaXRoKHRyaWdnZXJXb3JkKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVHJpZ2dlciB3b3JkIGRldGVjdGVkLCBoYW5kbGluZyBKaXJhIHRyaWdnZXInKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVKaXJhVHJpZ2dlcihlZGl0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gQWRkIGNvbW1hbmQgdG8gaW5zZXJ0IEppcmEgaXNzdWVcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnaW5zZXJ0LWppcmEtaXNzdWUnLFxuICAgICAgICAgICAgbmFtZTogJ0luc2VydCBKaXJhIElzc3VlJyxcbiAgICAgICAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICAgICAgICAgIGlmICghdmlldykgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRKaXJhSXNzdWUodmlldyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVyTWFya2Rvd25Qb3N0UHJvY2Vzc29yKHByb2Nlc3NDaGVja2JveGVzLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEVtb2ppQ2hlY2tsaXN0U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaW5zZXJ0SmlyYUlzc3VlKHZpZXc6IE1hcmtkb3duVmlldykge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuamlyYVNldHRpbmdzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBlbmFibGUgYW5kIGNvbmZpZ3VyZSBKaXJhIGludGVncmF0aW9uIGluIHNldHRpbmdzIGZpcnN0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgamlyYUNsaWVudCA9IG5ldyBKaXJhQ2xpZW50KHRoaXMuc2V0dGluZ3MuamlyYVNldHRpbmdzKTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgamlyYUNsaWVudC5zZWFyY2hUYXNrcygnbXkgdGFza3MnKTtcblxuICAgICAgICAgICAgaWYgKHRhc2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIEppcmEgdGFza3MgZm91bmQgYXNzaWduZWQgdG8geW91Jyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuZXcgSmlyYVRhc2tTdWdnZXN0ZXIodGhpcy5hcHAsIHRhc2tzLCAoc2VsZWN0ZWRUYXNrKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gdmlldy5lZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza01hcmtkb3duID0gYC0gWyBdIFske3NlbGVjdGVkVGFzay5rZXl9OiAke3NlbGVjdGVkVGFzay5zdW1tYXJ5fV0oJHtzZWxlY3RlZFRhc2sudXJsfSkgKCR7c2VsZWN0ZWRUYXNrLnN0YXR1c30pYDtcblxuICAgICAgICAgICAgICAgIC8vIEluc2VydCBhdCBjdXJzb3IgcG9zaXRpb25cbiAgICAgICAgICAgICAgICB2aWV3LmVkaXRvci5yZXBsYWNlUmFuZ2UoXG4gICAgICAgICAgICAgICAgICAgIHRhc2tNYXJrZG93biArICdcXG4nLFxuICAgICAgICAgICAgICAgICAgICBjdXJzb3IsXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvclxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAvLyBNb3ZlIGN1cnNvciB0byBuZXh0IGxpbmVcbiAgICAgICAgICAgICAgICB2aWV3LmVkaXRvci5zZXRDdXJzb3Ioe1xuICAgICAgICAgICAgICAgICAgICBsaW5lOiBjdXJzb3IubGluZSArIDEsXG4gICAgICAgICAgICAgICAgICAgIGNoOiAwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIEppcmEgdGFza3M6JywgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShlcnJvci5tZXNzYWdlIHx8ICdFcnJvciBmZXRjaGluZyBKaXJhIHRhc2tzJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUppcmFUcmlnZ2VyKF9lZGl0b3I6IEVkaXRvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnaGFuZGxlSmlyYVRyaWdnZXIgY2FsbGVkJyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmppcmFTZXR0aW5ncy5lbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnSmlyYSBpbnRlZ3JhdGlvbiBub3QgZW5hYmxlZCcpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVuYWJsZSBhbmQgY29uZmlndXJlIEppcmEgaW50ZWdyYXRpb24gaW4gc2V0dGluZ3MgZmlyc3QnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgSmlyYSBjbGllbnQgd2l0aCBzZXR0aW5nczonLCB0aGlzLnNldHRpbmdzLmppcmFTZXR0aW5ncyk7XG4gICAgICAgICAgICBjb25zdCBqaXJhQ2xpZW50ID0gbmV3IEppcmFDbGllbnQodGhpcy5zZXR0aW5ncy5qaXJhU2V0dGluZ3MpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRmV0Y2hpbmcgdGFza3MuLi4nKTtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgamlyYUNsaWVudC5zZWFyY2hUYXNrcygnbXkgdGFza3MnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGZXRjaGVkIHRhc2tzOicsIHRhc2tzKTtcblxuICAgICAgICAgICAgaWYgKHRhc2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyB0YXNrcyBmb3VuZCcpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIEppcmEgdGFza3MgZm91bmQgYXNzaWduZWQgdG8geW91Jyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnT3BlbmluZyB0YXNrIHN1Z2dlc3RlciB3aXRoJywgdGFza3MubGVuZ3RoLCAndGFza3MnKTtcblxuICAgICAgICAgICAgLy8gRW5zdXJlIHdlJ3JlIGluIHRoZSBjb3JyZWN0IGNvbnRleHRcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICAgICAgaWYgKCFhY3RpdmVWaWV3KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gYWN0aXZlIG1hcmtkb3duIHZpZXcnKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2Ugb3BlbiBhIG1hcmtkb3duIG5vdGUgZmlyc3QnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBzdWdnZXN0ZXIgd2l0aCBtb3JlIHJvYnVzdCBlcnJvciBoYW5kbGluZ1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWdnZXN0ZXIgPSBuZXcgSmlyYVRhc2tTdWdnZXN0ZXIodGhpcy5hcHAsIHRhc2tzLCAoc2VsZWN0ZWRUYXNrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUYXNrIHNlbGVjdGVkOicsIHNlbGVjdGVkVGFzayk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmlnZ2VyV29yZCA9IHRoaXMuc2V0dGluZ3MuamlyYVNldHRpbmdzLnRyaWdnZXJXb3JkO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgdHJpZ2dlciB3b3JkIGFuZCByZXBsYWNlIHdpdGggdGhlIHRhc2tcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TGluZSA9IGN1cnJlbnRMaW5lLnNsaWNlKDAsIGN1cnNvci5jaCAtIHRyaWdnZXJXb3JkLmxlbmd0aCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBbJHtzZWxlY3RlZFRhc2sua2V5fTogJHtzZWxlY3RlZFRhc2suc3VtbWFyeX1dKCR7c2VsZWN0ZWRUYXNrLnVybH0pICgke3NlbGVjdGVkVGFzay5zdGF0dXN9KWAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRMaW5lLnNsaWNlKGN1cnNvci5jaCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgY3VycmVudCBsaW5lXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRMaW5lKGN1cnNvci5saW5lLCBuZXdMaW5lKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlIGN1cnNvciB0byBlbmQgb2YgaW5zZXJ0ZWQgdGV4dFxuICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmU6IGN1cnNvci5saW5lLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2g6IGN1cnNvci5jaCAtIHRyaWdnZXJXb3JkLmxlbmd0aCArIGBbJHtzZWxlY3RlZFRhc2sua2V5fTogJHtzZWxlY3RlZFRhc2suc3VtbWFyeX1dKCR7c2VsZWN0ZWRUYXNrLnVybH0pICgke3NlbGVjdGVkVGFzay5zdGF0dXN9KWAubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gQWRkaXRpb25hbCBsb2dnaW5nIHRvIHZlcmlmeSBzdWdnZXN0ZXIgY3JlYXRpb25cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3VnZ2VzdGVyIGNyZWF0ZWQ6Jywgc3VnZ2VzdGVyKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHN1Z2dlc3RlckVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgc3VnZ2VzdGVyOicsIHN1Z2dlc3RlckVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gY3JlYXRlIHRhc2sgc3VnZ2VzdGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBoYW5kbGVKaXJhVHJpZ2dlcjonLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGVycm9yLm1lc3NhZ2UgfHwgJ0Vycm9yIGZldGNoaW5nIEppcmEgdGFza3MnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0xvYWRlZCBkYXRhOicsIGxvYWRlZERhdGEpO1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgbG9hZGVkRGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNZXJnZWQgc2V0dGluZ3M6JywgdGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnU2F2aW5nIHNldHRpbmdzOicsIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIHJlZnJlc2hBbGxOb3RlcygpIHtcbiAgICAgICAgLy8gRm9yY2UgcmVmcmVzaCBhbGwgbWFya2Rvd24gdmlld3NcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ21hcmtkb3duLXByZXZpZXctcmVmcmVzaCcpO1xuXG4gICAgICAgIC8vIEZvcmNlIHJlLXJlbmRlciBvZiBhbGwgbGVhZiB2aWV3c1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcyhsZWFmID0+IHtcbiAgICAgICAgICAgIGlmIChsZWFmLnZpZXcuZ2V0Vmlld1R5cGUoKSA9PT0gJ21hcmtkb3duJykge1xuICAgICAgICAgICAgICAgIChsZWFmLnZpZXcgYXMgTWFya2Rvd25WaWV3KS5wcmV2aWV3TW9kZT8ucmVyZW5kZXIodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBOb3RpY2UoJ0FwcGxpZWQgZW1vamkgY2hhbmdlcyB0byBhbGwgbm90ZXMnKTtcbiAgICB9XG59XG4iLCAiZXhwb3J0IGludGVyZmFjZSBUYWdFbW9qaU1hcHBpbmcge1xuICAgIHRhZzogc3RyaW5nO1xuICAgIHVuY2hlY2tlZEVtb2ppOiBzdHJpbmc7XG4gICAgY2hlY2tlZEVtb2ppOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSmlyYVNldHRpbmdzIHtcbiAgICBlbmFibGVkOiBib29sZWFuO1xuICAgIGJhc2VVcmw6IHN0cmluZztcbiAgICB1c2VybmFtZTogc3RyaW5nO1xuICAgIGFwaVRva2VuOiBzdHJpbmc7XG4gICAgdHJpZ2dlcldvcmQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbW9qaUNoZWNrbGlzdFNldHRpbmdzIHtcbiAgICBjaGVja2VkRW1vamk6IHN0cmluZztcbiAgICB1bmNoZWNrZWRFbW9qaTogc3RyaW5nO1xuICAgIHRhZ01hcHBpbmdzOiBUYWdFbW9qaU1hcHBpbmdbXTtcbiAgICBqaXJhU2V0dGluZ3M6IEppcmFTZXR0aW5ncztcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEVtb2ppQ2hlY2tsaXN0U2V0dGluZ3MgPSB7XG4gICAgY2hlY2tlZEVtb2ppOiAnXHUyNzA1JyxcbiAgICB1bmNoZWNrZWRFbW9qaTogJ1x1MkIxQ1x1RkUwRicsXG4gICAgdGFnTWFwcGluZ3M6IFtcbiAgICAgICAge1xuICAgICAgICAgICAgdGFnOiAnc3RvcHBlcicsXG4gICAgICAgICAgICB1bmNoZWNrZWRFbW9qaTogJ1x1RDgzRFx1REVEMScsXG4gICAgICAgICAgICBjaGVja2VkRW1vamk6ICdcdTI3MDUnXG4gICAgICAgIH1cbiAgICBdLFxuICAgIGppcmFTZXR0aW5nczoge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgYmFzZVVybDogJycsXG4gICAgICAgIHVzZXJuYW1lOiAnJyxcbiAgICAgICAgYXBpVG9rZW46ICcnLFxuICAgICAgICB0cmlnZ2VyV29yZDogJ0BKaXJhJ1xuICAgIH1cbn07IiwgImltcG9ydCB7QXBwLCBOb3RpY2UsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmd9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBFbW9qaUNoZWNrbGlzdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHtERUZBVUxUX1NFVFRJTkdTfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIEVtb2ppQ2hlY2tsaXN0U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogRW1vamlDaGVja2xpc3RQbHVnaW47XG4gICAgdGVzdEVsOiBIVE1MRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVtb2ppQ2hlY2tsaXN0UGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgdXBkYXRlVGVzdFNlY3Rpb24oKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnRlc3RFbCkge1xuICAgICAgICAgICAgdGhpcy50ZXN0RWwuZW1wdHkoKTtcblxuICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy50ZXN0RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnTGl2ZSBQcmV2aWV3JyB9KTtcblxuICAgICAgICAgICAgY29uc3QgdW5jaGVja2VkRXhhbXBsZSA9IHRoaXMudGVzdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbScgfSk7XG4gICAgICAgICAgICB1bmNoZWNrZWRFeGFtcGxlLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnVW5jaGVja2VkIGV4YW1wbGU6ICcgfSk7XG4gICAgICAgICAgICBjb25zdCB1bmNoZWNrZWRDb250YWluZXIgPSB1bmNoZWNrZWRFeGFtcGxlLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICd0YXNrLXByZXZpZXcnIH0pO1xuICAgICAgICAgICAgdW5jaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMucGx1Z2luLnNldHRpbmdzLnVuY2hlY2tlZEVtb2ppLFxuICAgICAgICAgICAgICAgIGNsczogJ2Vtb2ppLXByZXZpZXcnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHVuY2hlY2tlZENvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJyBTYW1wbGUgdGFzaycgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNoZWNrZWRFeGFtcGxlID0gdGhpcy50ZXN0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcbiAgICAgICAgICAgIGNoZWNrZWRFeGFtcGxlLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnQ2hlY2tlZCBleGFtcGxlOiAnIH0pO1xuICAgICAgICAgICAgY29uc3QgY2hlY2tlZENvbnRhaW5lciA9IGNoZWNrZWRFeGFtcGxlLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICd0YXNrLXByZXZpZXcnIH0pO1xuICAgICAgICAgICAgY2hlY2tlZENvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja2VkRW1vamksXG4gICAgICAgICAgICAgICAgY2xzOiAnZW1vamktcHJldmlldydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgY2hlY2tlZFRleHQgPSBjaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnIFNhbXBsZSB0YXNrJyB9KTtcbiAgICAgICAgICAgIGNoZWNrZWRUZXh0LnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ2xpbmUtdGhyb3VnaCc7XG4gICAgICAgICAgICBjaGVja2VkVGV4dC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG5cbiAgICAgICAgICAgIC8vIEFkZCB0YWcgZXhhbXBsZXNcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWdNYXBwaW5ncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFnSGVhZGVyID0gdGhpcy50ZXN0RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVGFnIEV4YW1wbGVzJyB9KTtcbiAgICAgICAgICAgICAgICB0YWdIZWFkZXIuc3R5bGUubWFyZ2luVG9wID0gJzJlbSc7XG4gICAgICAgICAgICAgICAgdGFnSGVhZGVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxZW0nO1xuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtYXBwaW5nIG9mIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZ1VuY2hlY2tlZEV4YW1wbGUgPSB0aGlzLnRlc3RFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZXR0aW5nLWl0ZW0nIH0pO1xuICAgICAgICAgICAgICAgICAgICB0YWdVbmNoZWNrZWRFeGFtcGxlLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgIyR7bWFwcGluZy50YWd9IHVuY2hlY2tlZDogYCB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnVW5jaGVja2VkQ29udGFpbmVyID0gdGFnVW5jaGVja2VkRXhhbXBsZS5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAndGFzay1wcmV2aWV3JyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGFnVW5jaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbWFwcGluZy51bmNoZWNrZWRFbW9qaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsczogJ2Vtb2ppLXByZXZpZXcnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0YWdVbmNoZWNrZWRDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGAgU2FtcGxlICMke21hcHBpbmcudGFnfSB0YXNrYCB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWdDaGVja2VkRXhhbXBsZSA9IHRoaXMudGVzdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbScgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NoZWNrZWRFeGFtcGxlLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgIyR7bWFwcGluZy50YWd9IGNoZWNrZWQ6IGAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZ0NoZWNrZWRDb250YWluZXIgPSB0YWdDaGVja2VkRXhhbXBsZS5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAndGFzay1wcmV2aWV3JyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2hlY2tlZENvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG1hcHBpbmcuY2hlY2tlZEVtb2ppLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xzOiAnZW1vamktcHJldmlldydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZ0NoZWNrZWRUZXh0ID0gdGFnQ2hlY2tlZENvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYCBTYW1wbGUgIyR7bWFwcGluZy50YWd9IHRhc2tgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0YWdDaGVja2VkVGV4dC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdsaW5lLXRocm91Z2gnO1xuICAgICAgICAgICAgICAgICAgICB0YWdDaGVja2VkVGV4dC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG5cbiAgICAgICAgICAgICAgICAgICAgdGFnVW5jaGVja2VkRXhhbXBsZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMC41ZW0nO1xuICAgICAgICAgICAgICAgICAgICB0YWdDaGVja2VkRXhhbXBsZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMC41ZW0nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaGVhZGVyLnN0eWxlLm1hcmdpblRvcCA9ICcyZW0nO1xuICAgICAgICAgICAgaGVhZGVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxZW0nO1xuICAgICAgICAgICAgdW5jaGVja2VkRXhhbXBsZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMC41ZW0nO1xuICAgICAgICAgICAgY2hlY2tlZEV4YW1wbGUuc3R5bGUubWFyZ2luQm90dG9tID0gJzAuNWVtJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnRW1vamkgQ2hlY2tsaXN0IFNldHRpbmdzJyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdEZWZhdWx0IFVuY2hlY2tlZCBFbW9qaScpXG4gICAgICAgICAgICAuc2V0RGVzYygnRW1vamkgdG8gZGlzcGxheSBmb3IgdW5jaGVja2VkIHRhc2tzJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51bmNoZWNrZWRFbW9qaSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnVuY2hlY2tlZEVtb2ppID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRlc3RTZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGVkIGRlZmF1bHQgdW5jaGVja2VkIGVtb2ppOicsIHRoaXMucGx1Z2luLnNldHRpbmdzLnVuY2hlY2tlZEVtb2ppKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGVmYXVsdCBDaGVja2VkIEVtb2ppJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdFbW9qaSB0byBkaXNwbGF5IGZvciBjaGVja2VkIHRhc2tzJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja2VkRW1vamkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja2VkRW1vamkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGVzdFNlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgZGVmYXVsdCBjaGVja2VkIGVtb2ppOicsIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrZWRFbW9qaSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1RhZyBNYXBwaW5ncycgfSk7XG5cbiAgICAgICAgY29uc3QgdGFnTWFwcGluZ3NDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3RhZy1tYXBwaW5ncycpO1xuXG4gICAgICAgIC8vIEFkZCBleGlzdGluZyB0YWcgbWFwcGluZ3NcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MuZm9yRWFjaCgobWFwcGluZywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1hcHBpbmdDb250YWluZXIgPSB0YWdNYXBwaW5nc0NvbnRhaW5lci5jcmVhdGVEaXYoJ3RhZy1tYXBwaW5nJyk7XG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1hcHBpbmdDb250YWluZXIpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoYFRhZyAjJHttYXBwaW5nLnRhZ31gKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3RhZyBuYW1lJylcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKG1hcHBpbmcudGFnKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWdNYXBwaW5nc1tpbmRleF0udGFnID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGVzdFNlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGVkIHRhZyBtYXBwaW5nOicsIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcigndW5jaGVja2VkIGVtb2ppJylcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKG1hcHBpbmcudW5jaGVja2VkRW1vamkpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzW2luZGV4XS51bmNoZWNrZWRFbW9qaSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRlc3RTZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRlZCB0YWcgbWFwcGluZzonLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWdNYXBwaW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2NoZWNrZWQgZW1vamknKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobWFwcGluZy5jaGVja2VkRW1vamkpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzW2luZGV4XS5jaGVja2VkRW1vamkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUZXN0U2VjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgdGFnIG1hcHBpbmc6JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ3RyYXNoJylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVtb3ZlZCB0YWcgbWFwcGluZywgcmVtYWluaW5nOicsIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgYnV0dG9uIHRvIGFkZCBuZXcgdGFnIG1hcHBpbmdcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQWRkIFRhZyBNYXBwaW5nJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdBZGQgYSBuZXcgdGFnLWVtb2ppIG1hcHBpbmcnKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ0FkZCBOZXcgVGFnJylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiAnbmV3dGFnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuY2hlY2tlZEVtb2ppOiAnXHUyQjU1JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWRFbW9qaTogJ1x1MjcwNSdcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQWRkZWQgbmV3IHRhZyBtYXBwaW5nOicsIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1Jlc2V0IFNldHRpbmdzJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdSZXN0b3JlIGFsbCBzZXR0aW5ncyB0byB0aGVpciBkZWZhdWx0cycpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnUmVzdG9yZSBEZWZhdWx0cycpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1Jlc2V0IHNldHRpbmdzIHRvIGRlZmF1bHRzOicsIHRoaXMucGx1Z2luLnNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1NldHRpbmdzIHJlc3RvcmVkIHRvIGRlZmF1bHRzJyk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIEppcmEgU2V0dGluZ3NcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnSmlyYSBJbnRlZ3JhdGlvbicgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRW5hYmxlIEppcmEgSW50ZWdyYXRpb24nKVxuICAgICAgICAgICAgLnNldERlc2MoJ0VuYWJsZSBvciBkaXNhYmxlIEppcmEgaW50ZWdyYXRpb24nKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmppcmFTZXR0aW5ncy5lbmFibGVkKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuamlyYVNldHRpbmdzLmVuYWJsZWQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1RyaWdnZXIgV29yZCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnV29yZCB0aGF0IHRyaWdnZXJzIEppcmEgdGFzayBpbnNlcnRpb24gKGUuZy4sIEBqaXJhKScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0BqaXJhJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuamlyYVNldHRpbmdzLnRyaWdnZXJXb3JkKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuamlyYVNldHRpbmdzLnRyaWdnZXJXb3JkID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdKaXJhIEJhc2UgVVJMJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdZb3VyIEppcmEgaW5zdGFuY2UgVVJMIChlLmcuLCBodHRwczovL3lvdXItZG9tYWluLmF0bGFzc2lhbi5uZXQpJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignaHR0cHM6Ly95b3VyLWRvbWFpbi5hdGxhc3NpYW4ubmV0JylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuamlyYVNldHRpbmdzLmJhc2VVcmwpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5qaXJhU2V0dGluZ3MuYmFzZVVybCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnVXNlcm5hbWUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1lvdXIgSmlyYSBlbWFpbCBhZGRyZXNzJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignZW1haWxAZXhhbXBsZS5jb20nKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5qaXJhU2V0dGluZ3MudXNlcm5hbWUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5qaXJhU2V0dGluZ3MudXNlcm5hbWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0FQSSBUb2tlbicpXG4gICAgICAgICAgICAuc2V0RGVzYygnWW91ciBKaXJhIEFQSSB0b2tlbiAoZnJvbSBodHRwczovL2lkLmF0bGFzc2lhbi5jb20vbWFuYWdlLXByb2ZpbGUvc2VjdXJpdHkvYXBpLXRva2VucyknKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIEFQSSB0b2tlbicpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmppcmFTZXR0aW5ncy5hcGlUb2tlbilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmppcmFTZXR0aW5ncy5hcGlUb2tlbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQWRkIEFwcGx5IENoYW5nZXMgYnV0dG9uXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0FwcGx5IENoYW5nZXMnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0FwcGx5IGVtb2ppIGNoYW5nZXMgdG8gYWxsIG9wZW4gbm90ZXMnKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ0FwcGx5IENoYW5nZXMnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVmcmVzaEFsbE5vdGVzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIHRoaXMudGVzdEVsID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIHRoaXMudXBkYXRlVGVzdFNlY3Rpb24oKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHR5cGUge01hcmtkb3duUG9zdFByb2Nlc3NvciwgTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHtNYXJrZG93blJlbmRlckNoaWxkLCBNYXJrZG93blZpZXd9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIEVtb2ppQ2hlY2tsaXN0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5cbmludGVyZmFjZSBFZGl0b3JDaGFuZ2Uge1xuICAgIGZyb206IHsgbGluZTogbnVtYmVyOyBjaDogbnVtYmVyIH07XG4gICAgdG86IHsgbGluZTogbnVtYmVyOyBjaDogbnVtYmVyIH07XG4gICAgdGV4dDogc3RyaW5nO1xufVxuXG5jbGFzcyBFbW9qaVJlbmRlckNoaWxkIGV4dGVuZHMgTWFya2Rvd25SZW5kZXJDaGlsZCB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBzcGFuOiBIVE1MU3BhbkVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIoc3Bhbik7XG4gICAgfVxuXG4gICAgb251bmxvYWQoKTogdm9pZCB7XG4gICAgICAgIC8vIENsZWFudXAgaGFuZGxlZCBieSBwYXJlbnRcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDaGVja2JveFByb2Nlc3NvciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluZFRhZ0luTGluZShsaXN0SXRlbTogSFRNTEVsZW1lbnQpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGxpc3RJdGVtLnRleHRDb250ZW50IHx8ICcnO1xuICAgICAgICBjb25zdCB0YWdNYXRjaCA9IHRleHQucmVwbGFjZSgvXlteXFx3XFxzI10qXFxzKi8sICcnKS5tYXRjaCgvIyhcXHcrKS8pO1xuICAgICAgICByZXR1cm4gdGFnTWF0Y2ggPyB0YWdNYXRjaFsxXSA6IG51bGw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0RW1vamlzRm9yVGFnKFxuICAgICAgICBwbHVnaW46IEVtb2ppQ2hlY2tsaXN0UGx1Z2luLFxuICAgICAgICB0YWc6IHN0cmluZyB8IG51bGwsXG4gICAgICAgIGlzQ2hlY2tlZDogYm9vbGVhblxuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGlmICghdGFnKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNDaGVja2VkID8gcGx1Z2luLnNldHRpbmdzLmNoZWNrZWRFbW9qaSA6IHBsdWdpbi5zZXR0aW5ncy51bmNoZWNrZWRFbW9qaTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1hcHBpbmcgPSBwbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MuZmluZCgobSkgPT4gbS50YWcgPT09IHRhZyk7XG4gICAgICAgIGlmICghbWFwcGluZykge1xuICAgICAgICAgICAgcmV0dXJuIGlzQ2hlY2tlZCA/IHBsdWdpbi5zZXR0aW5ncy5jaGVja2VkRW1vamkgOiBwbHVnaW4uc2V0dGluZ3MudW5jaGVja2VkRW1vamk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaXNDaGVja2VkID8gbWFwcGluZy5jaGVja2VkRW1vamkgOiBtYXBwaW5nLnVuY2hlY2tlZEVtb2ppO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHVwZGF0ZUVkaXRvckNvbnRlbnQoXG4gICAgICAgIGVkaXRvcjogYW55LFxuICAgICAgICBsaW5lSW5kZXg6IG51bWJlcixcbiAgICAgICAgbmV3RW1vamk6IHN0cmluZ1xuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBsaW5lVGV4dCA9IGVkaXRvci5nZXRMaW5lKGxpbmVJbmRleCk7XG4gICAgICAgIGNvbnN0IG5ld1RleHQgPSBsaW5lVGV4dC5yZXBsYWNlKC9eW15cXHdcXHMjXSpcXHMqLywgYCR7bmV3RW1vaml9IGApO1xuXG4gICAgICAgIGNvbnN0IGNoYW5nZTogRWRpdG9yQ2hhbmdlID0ge1xuICAgICAgICAgICAgZnJvbTogeyBsaW5lOiBsaW5lSW5kZXgsIGNoOiAwIH0sXG4gICAgICAgICAgICB0bzogeyBsaW5lOiBsaW5lSW5kZXgsIGNoOiBsaW5lVGV4dC5sZW5ndGggfSxcbiAgICAgICAgICAgIHRleHQ6IG5ld1RleHRcbiAgICAgICAgfTtcblxuICAgICAgICBlZGl0b3IudHJhbnNhY3Rpb24oeyBjaGFuZ2VzOiBbY2hhbmdlXSB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBjcmVhdGVFbW9qaVNwYW4oZW1vamk6IHN0cmluZyk6IEhUTUxTcGFuRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIHNwYW4uY2xhc3NOYW1lID0gJ3Rhc2stbGlzdC1lbW9qaSc7XG4gICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBlbW9qaTtcbiAgICAgICAgcmV0dXJuIHNwYW47XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3R5bGVDb250YWluZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwpOiB2b2lkIHtcbiAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ3RvcCc7XG4gICAgICAgICAgICBjb250YWluZXIuc3R5bGUubWFyZ2luUmlnaHQgPSAnMC41ZW0nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgc2V0dXBFdmVudExpc3RlbmVycyhcbiAgICAgICAgcGx1Z2luOiBFbW9qaUNoZWNrbGlzdFBsdWdpbixcbiAgICAgICAgY2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQsXG4gICAgICAgIHNwYW46IEhUTUxTcGFuRWxlbWVudCxcbiAgICAgICAgdGFnOiBzdHJpbmcgfCBudWxsLFxuICAgICAgICBpbmRleDogbnVtYmVyLFxuICAgICAgICBlZGl0b3I6IGFueSxcbiAgICAgICAgc2VjdGlvbkluZm86IGFueSxcbiAgICAgICAgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0XG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZUVtb2ppID0gKGlzQ2hlY2tlZDogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3RW1vamkgPSB0aGlzLmdldEVtb2ppc0ZvclRhZyhwbHVnaW4sIHRhZywgaXNDaGVja2VkKTtcbiAgICAgICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBuZXdFbW9qaTtcblxuICAgICAgICAgICAgaWYgKGVkaXRvciAmJiBzZWN0aW9uSW5mbykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRWRpdG9yQ29udGVudChlZGl0b3IsIHNlY3Rpb25JbmZvLmxpbmVTdGFydCArIGluZGV4LCBuZXdFbW9qaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgdG9nZ2xlQ2hlY2tib3ggPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gIWNoZWNrYm94LmNoZWNrZWQ7XG4gICAgICAgICAgICB1cGRhdGVFbW9qaShjaGVja2JveC5jaGVja2VkKTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkaXNwYXRjaCBib3RoIGNoYW5nZSBhbmQgY2xpY2sgZXZlbnRzXG4gICAgICAgICAgICBjaGVja2JveC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnY2hhbmdlJywgeyBidWJibGVzOiB0cnVlIH0pKTtcbiAgICAgICAgICAgIGNoZWNrYm94LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdjbGljaycsIHsgYnViYmxlczogdHJ1ZSB9KSk7XG5cbiAgICAgICAgICAgIGlmIChjdHguc291cmNlUGF0aCkge1xuICAgICAgICAgICAgICAgIGN0eC5hZGRDaGlsZChuZXcgRW1vamlSZW5kZXJDaGlsZChzcGFuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgYXdhaXQgdG9nZ2xlQ2hlY2tib3goKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgdXBkYXRlRW1vamkoY2hlY2tib3guY2hlY2tlZCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgcHJvY2Vzc0NoZWNrYm94KFxuICAgICAgICBwbHVnaW46IEVtb2ppQ2hlY2tsaXN0UGx1Z2luLFxuICAgICAgICBjaGVja2JveDogSFRNTElucHV0RWxlbWVudCxcbiAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgZWRpdG9yOiBhbnksXG4gICAgICAgIHNlY3Rpb25JbmZvOiBhbnksXG4gICAgICAgIGN0eDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBsaXN0SXRlbSA9IGNoZWNrYm94LmNsb3Nlc3QoJ2xpLnRhc2stbGlzdC1pdGVtJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmICghbGlzdEl0ZW0pIHJldHVybjtcblxuICAgICAgICBjb25zdCB0YWcgPSB0aGlzLmZpbmRUYWdJbkxpbmUobGlzdEl0ZW0pO1xuICAgICAgICBjb25zdCBlbW9qaSA9IHRoaXMuZ2V0RW1vamlzRm9yVGFnKHBsdWdpbiwgdGFnLCBjaGVja2JveC5jaGVja2VkKTtcbiAgICAgICAgY29uc3Qgc3BhbiA9IHRoaXMuY3JlYXRlRW1vamlTcGFuKGVtb2ppKTtcblxuICAgICAgICBpZiAoZWRpdG9yICYmIHNlY3Rpb25JbmZvKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVkaXRvckNvbnRlbnQoZWRpdG9yLCBzZWN0aW9uSW5mby5saW5lU3RhcnQgKyBpbmRleCwgZW1vamkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKFxuICAgICAgICAgICAgcGx1Z2luLFxuICAgICAgICAgICAgY2hlY2tib3gsXG4gICAgICAgICAgICBzcGFuLFxuICAgICAgICAgICAgdGFnLFxuICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICBlZGl0b3IsXG4gICAgICAgICAgICBzZWN0aW9uSW5mbyxcbiAgICAgICAgICAgIGN0eFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuc3R5bGVDb250YWluZXIoY2hlY2tib3gucGFyZW50RWxlbWVudCk7XG4gICAgICAgIGNoZWNrYm94LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGNoZWNrYm94LmFmdGVyKHNwYW4pO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IHByb2Nlc3NDaGVja2JveGVzOiBNYXJrZG93blBvc3RQcm9jZXNzb3IgPSBmdW5jdGlvbihcbiAgICB0aGlzOiBFbW9qaUNoZWNrbGlzdFBsdWdpbixcbiAgICBlbDogSFRNTEVsZW1lbnQsXG4gICAgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0XG4pOiB2b2lkIHtcbiAgICBjb25zdCBjaGVja2JveGVzID0gZWwucXVlcnlTZWxlY3RvckFsbDxIVE1MSW5wdXRFbGVtZW50PignbGkudGFzay1saXN0LWl0ZW0gaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XG4gICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgY29uc3QgZWRpdG9yID0gdmlldz8uZWRpdG9yO1xuICAgIGNvbnN0IHNlY3Rpb25JbmZvID0gY3R4LmdldFNlY3Rpb25JbmZvKGVsKTtcblxuICAgIGNoZWNrYm94ZXMuZm9yRWFjaCgoY2hlY2tib3gsIGluZGV4KSA9PiB7XG4gICAgICAgIGlmICghKGNoZWNrYm94IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkpIHJldHVybjtcblxuICAgICAgICBDaGVja2JveFByb2Nlc3Nvci5wcm9jZXNzQ2hlY2tib3goXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgY2hlY2tib3gsXG4gICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgIHNlY3Rpb25JbmZvLFxuICAgICAgICAgICAgY3R4XG4gICAgICAgICk7XG4gICAgfSk7XG59O1xuIiwgImltcG9ydCB7IHJlcXVlc3RVcmwsIFJlcXVlc3RVcmxQYXJhbSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIHsgSmlyYVNldHRpbmdzIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSmlyYVRhc2sge1xuICAgIGtleTogc3RyaW5nO1xuICAgIHN1bW1hcnk6IHN0cmluZztcbiAgICB1cmw6IHN0cmluZztcbiAgICBzdGF0dXM6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEppcmFDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc2V0dGluZ3M6IEppcmFTZXR0aW5ncykge31cblxuICAgIHByaXZhdGUgZ2V0QXV0aEhlYWRlcigpOiBzdHJpbmcge1xuICAgICAgICAvLyBFbnN1cmUgd2UncmUgdXNpbmcgdGhlIGVtYWlsIGFkZHJlc3MgYW5kIEFQSSB0b2tlblxuICAgICAgICBjb25zdCBjcmVkZW50aWFscyA9IGAke3RoaXMuc2V0dGluZ3MudXNlcm5hbWV9OiR7dGhpcy5zZXR0aW5ncy5hcGlUb2tlbn1gO1xuICAgICAgICAvLyBDb252ZXJ0IHRvIGJhc2U2NCwgaGFuZGxpbmcgVW5pY29kZSBjaGFyYWN0ZXJzIGNvcnJlY3RseVxuICAgICAgICBjb25zdCBiYXNlNjRDcmVkZW50aWFscyA9IEJ1ZmZlci5mcm9tKGNyZWRlbnRpYWxzKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gICAgICAgIHJldHVybiBgQmFzaWMgJHtiYXNlNjRDcmVkZW50aWFsc31gO1xuICAgIH1cblxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCBiYXNlVXJsID0gdGhpcy5zZXR0aW5ncy5iYXNlVXJsLnJlcGxhY2UoL1xcLyQvLCAnJyk7XG4gICAgICAgIGNvbnN0IGFwaVVybCA9IGAke2Jhc2VVcmx9L3Jlc3QvYXBpLzIvbXlzZWxmYDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICB1cmw6IGFwaVVybCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiB0aGlzLmdldEF1dGhIZWFkZXIoKSxcbiAgICAgICAgICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzID09PSAyMDA7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDb25uZWN0aW9uIHRlc3QgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHNlYXJjaFRhc2tzKHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPEppcmFUYXNrW10+IHtcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmVuYWJsZWQgfHwgIXRoaXMuc2V0dGluZ3MuYmFzZVVybCB8fCAhdGhpcy5zZXR0aW5ncy5hcGlUb2tlbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdKaXJhIGludGVncmF0aW9uIGlzIG5vdCBwcm9wZXJseSBjb25maWd1cmVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUZXN0IGNvbm5lY3Rpb24gZmlyc3RcbiAgICAgICAgY29uc3QgaXNDb25uZWN0ZWQgPSBhd2FpdCB0aGlzLnRlc3RDb25uZWN0aW9uKCk7XG4gICAgICAgIGlmICghaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGF1dGhlbnRpY2F0ZSB3aXRoIEppcmEuIFBsZWFzZSBjaGVjayB5b3VyIGNyZWRlbnRpYWxzLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRW5zdXJlIHRoZSBiYXNlIFVSTCBkb2Vzbid0IGVuZCB3aXRoIGEgc2xhc2hcbiAgICAgICAgY29uc3QgYmFzZVVybCA9IHRoaXMuc2V0dGluZ3MuYmFzZVVybC5yZXBsYWNlKC9cXC8kLywgJycpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHF1ZXJ5IHRvIHByZXZlbnQgSlFMIGluamVjdGlvblxuICAgICAgICBjb25zdCBzYW5pdGl6ZWRRdWVyeSA9IHF1ZXJ5LnJlcGxhY2UoL1tcIiddL2csICcnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBzcGVjaWFsIHF1ZXJpZXNcbiAgICAgICAgbGV0IGpxbDogc3RyaW5nO1xuICAgICAgICBpZiAoc2FuaXRpemVkUXVlcnkudG9Mb3dlckNhc2UoKSA9PT0gJ215IHRhc2tzJyB8fCBzYW5pdGl6ZWRRdWVyeS50b0xvd2VyQ2FzZSgpID09PSAnYXNzaWduZWQgdG8gbWUnKSB7XG4gICAgICAgICAgICBqcWwgPSAnYXNzaWduZWUgPSBjdXJyZW50VXNlcigpJztcbiAgICAgICAgfSBlbHNlIGlmIChzYW5pdGl6ZWRRdWVyeS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoJ215JykpIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBcIm15IG9wZW4gdGFza3NcIiwgXCJteSBkb25lIHRhc2tzXCIsIGV0Yy5cbiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHNhbml0aXplZFF1ZXJ5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2RvbmUnKSA/ICdEb25lJyA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzYW5pdGl6ZWRRdWVyeS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdvcGVuJykgPyAnT3BlbicgOiBudWxsO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBqcWwgPSBzdGF0dXMgXG4gICAgICAgICAgICAgICAgPyBgYXNzaWduZWUgPSBjdXJyZW50VXNlcigpIEFORCBzdGF0dXMgPSBcIiR7c3RhdHVzfVwiYFxuICAgICAgICAgICAgICAgIDogYGFzc2lnbmVlID0gY3VycmVudFVzZXIoKSBBTkQgKHN1bW1hcnkgfiBcIiR7c2FuaXRpemVkUXVlcnl9XCIgT1IgZGVzY3JpcHRpb24gfiBcIiR7c2FuaXRpemVkUXVlcnl9XCIpYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGpxbCA9IGBhc3NpZ25lZSA9IGN1cnJlbnRVc2VyKCkgQU5EIChzdW1tYXJ5IH4gXCIke3Nhbml0aXplZFF1ZXJ5fVwiIE9SIGRlc2NyaXB0aW9uIH4gXCIke3Nhbml0aXplZFF1ZXJ5fVwiKWA7XG4gICAgICAgIH1cblxuICAgICAgICBqcWwgKz0gJyBPUkRFUiBCWSB1cGRhdGVkIERFU0MnO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ0pRTCBRdWVyeTonLCBqcWwpO1xuICAgICAgICBjb25zdCBhcGlVcmwgPSBgJHtiYXNlVXJsfS9yZXN0L2FwaS8yL3NlYXJjaD9qcWw9JHtlbmNvZGVVUklDb21wb25lbnQoanFsKX0mbWF4UmVzdWx0cz0xMCZmaWVsZHM9c3VtbWFyeSxzdGF0dXNgO1xuICAgICAgICBjb25zb2xlLmxvZygnQVBJIFVSTDonLCBhcGlVcmwpO1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3RQYXJhbXM6IFJlcXVlc3RVcmxQYXJhbSA9IHtcbiAgICAgICAgICAgIHVybDogYXBpVXJsLFxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IHRoaXMuZ2V0QXV0aEhlYWRlcigpLFxuICAgICAgICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ01ha2luZyByZXF1ZXN0Li4uJyk7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwocmVxdWVzdFBhcmFtcyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVzcG9uc2Ugc3RhdHVzOicsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlc3BvbnNlOicsIHJlc3BvbnNlLnRleHQpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSmlyYSBBUEkgcmV0dXJuZWQgc3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS50ZXh0fWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLmpzb24gfHwgIXJlc3BvbnNlLmpzb24uaXNzdWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCByZXNwb25zZSBmb3JtYXQ6JywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNwb25zZSBmb3JtYXQgZnJvbSBKaXJhIEFQSScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRm91bmQgaXNzdWVzOicsIHJlc3BvbnNlLmpzb24uaXNzdWVzLmxlbmd0aCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbi5pc3N1ZXMubWFwKChpc3N1ZTogYW55KSA9PiAoe1xuICAgICAgICAgICAgICAgIGtleTogaXNzdWUua2V5LFxuICAgICAgICAgICAgICAgIHN1bW1hcnk6IGlzc3VlLmZpZWxkcy5zdW1tYXJ5LFxuICAgICAgICAgICAgICAgIHVybDogYCR7YmFzZVVybH0vYnJvd3NlLyR7aXNzdWUua2V5fWAsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBpc3N1ZS5maWVsZHMuc3RhdHVzPy5uYW1lIHx8ICdVbmtub3duJ1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGV0YWlsczonLCB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGVycm9yLnN0YXR1cyxcbiAgICAgICAgICAgICAgICByZXNwb25zZTogZXJyb3IucmVzcG9uc2VcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoZXJyb3Iuc3RhdHVzID09PSA0MDEgfHwgZXJyb3Iuc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZC4gUGxlYXNlIHZlcmlmeTpcXG4xLiBZb3VyIGVtYWlsIGFkZHJlc3MgaXMgY29ycmVjdFxcbjIuIFlvdXIgQVBJIHRva2VuIGlzIGNvcnJlY3RcXG4zLiBZb3UgaGF2ZSB0aGUgbmVjZXNzYXJ5IHBlcm1pc3Npb25zJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGZvcm1hdFRhc2tzQXNNYXJrZG93bih0YXNrczogSmlyYVRhc2tbXSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiB0YXNrcy5tYXAodGFzayA9PiBcbiAgICAgICAgICAgIGAtIFsgXSBbJHt0YXNrLmtleX06ICR7dGFzay5zdW1tYXJ5fV0oJHt0YXNrLnVybH0pICgke3Rhc2suc3RhdHVzfSlgXG4gICAgICAgICkuam9pbignXFxuJyk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgSVN1Z2dlc3RPd25lciwgU2NvcGUsIFN1Z2dlc3RNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIHsgSmlyYVRhc2sgfSBmcm9tICcuL2ppcmEnO1xuXG5leHBvcnQgY2xhc3MgSmlyYVRhc2tTdWdnZXN0ZXIgZXh0ZW5kcyBTdWdnZXN0TW9kYWw8SmlyYVRhc2s+IHtcbiAgICBwcml2YXRlIHRhc2tzOiBKaXJhVGFza1tdID0gW107XG4gICAgcHJpdmF0ZSBvblNlbGVjdDogKHRhc2s6IEppcmFUYXNrKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRhc2tzOiBKaXJhVGFza1tdLCBvblNlbGVjdDogKHRhc2s6IEppcmFUYXNrKSA9PiB2b2lkKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdKaXJhVGFza1N1Z2dlc3RlciBjb25zdHJ1Y3RvciBjYWxsZWQnKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1Rhc2tzIHJlY2VpdmVkOicsIHRhc2tzKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMudGFza3MgPSB0YXNrcztcbiAgICAgICAgdGhpcy5vblNlbGVjdCA9IG9uU2VsZWN0O1xuICAgICAgICBcbiAgICAgICAgLy8gRXhwbGljaXRseSBzZXQgcGxhY2Vob2xkZXIgYW5kIHN0eWxpbmdcbiAgICAgICAgdGhpcy5zZXRQbGFjZWhvbGRlcihcIlNlbGVjdCBhIEppcmEgdGFzay4uLlwiKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEVuc3VyZSB0aGUgbW9kYWwgaXMgc3R5bGVkIGFuZCB2aXNpYmxlXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuYWRkQ2xhc3MoJ2ppcmEtdGFzay1zdWdnZXN0ZXInKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENlbnRlciB0aGUgbW9kYWxcbiAgICAgICAgdGhpcy5tb2RhbEVsLnN0eWxlLm1heFdpZHRoID0gJzYwMHB4JztcbiAgICAgICAgdGhpcy5tb2RhbEVsLnN0eWxlLndpZHRoID0gJzgwJSc7XG4gICAgICAgIHRoaXMubW9kYWxFbC5zdHlsZS50b3AgPSAnMzAlJztcbiAgICAgICAgdGhpcy5tb2RhbEVsLnN0eWxlLmxlZnQgPSAnNTAlJztcbiAgICAgICAgdGhpcy5tb2RhbEVsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoLTUwJSwgLTMwJSknO1xuICAgICAgICB0aGlzLm1vZGFsRWwuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnO1xuICAgICAgICBcbiAgICAgICAgLy8gU3R5bGUgdGhlIHN1Z2dlc3Rpb25zIGNvbnRhaW5lclxuICAgICAgICBjb25zdCBzdWdnZXN0aW9uc0NvbnRhaW5lciA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcuc3VnZ2VzdGlvbi1jb250YWluZXInKTtcbiAgICAgICAgaWYgKHN1Z2dlc3Rpb25zQ29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zQ29udGFpbmVyLnN0eWxlLm1heEhlaWdodCA9ICc0MDBweCc7XG4gICAgICAgICAgICBzdWdnZXN0aW9uc0NvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ2xvc2Ugb24gRXNjYXBlXG4gICAgICAgIHRoaXMuc2NvcGUgPSBuZXcgU2NvcGUoKTtcbiAgICAgICAgdGhpcy5zY29wZS5yZWdpc3RlcihbXSwgXCJFc2NhcGVcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBFeHBsaWNpdGx5IG9wZW4gdGhlIG1vZGFsXG4gICAgICAgIGNvbnNvbGUubG9nKCdBYm91dCB0byBvcGVuIG1vZGFsJyk7XG4gICAgICAgIHRoaXMub3BlbigpO1xuICAgIH1cblxuICAgIC8vIE92ZXJyaWRlIG9wZW4gbWV0aG9kIHRvIGVuc3VyZSBpdCdzIGZ1bGx5IHZpc2libGVcbiAgICBvcGVuKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnRXhwbGljaXRseSBvcGVuaW5nIG1vZGFsJyk7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZGl0aW9uYWwgdmlzaWJpbGl0eSBjaGVja3NcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgfVxuXG4gICAgZ2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IEppcmFUYXNrW10ge1xuICAgICAgICBjb25zb2xlLmxvZygnR2V0dGluZyBzdWdnZXN0aW9ucyBmb3IgcXVlcnk6JywgcXVlcnkpO1xuICAgICAgICBjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRUYXNrcyA9IHRoaXMudGFza3MuZmlsdGVyKHRhc2sgPT4gXG4gICAgICAgICAgICB0YXNrLmtleS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpIHx8XG4gICAgICAgICAgICB0YXNrLnN1bW1hcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygnRmlsdGVyZWQgdGFza3M6JywgZmlsdGVyZWRUYXNrcyk7XG4gICAgICAgIHJldHVybiBmaWx0ZXJlZFRhc2tzO1xuICAgIH1cblxuICAgIHJlbmRlclN1Z2dlc3Rpb24odGFzazogSmlyYVRhc2ssIGVsOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zb2xlLmxvZygnUmVuZGVyaW5nIHN1Z2dlc3Rpb24gZm9yIHRhc2s6JywgdGFzayk7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGVsLmNyZWF0ZURpdih7IGNsczogXCJqaXJhLXRhc2stc3VnZ2VzdGlvblwiIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qga2V5RWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcImppcmEta2V5XCIgfSk7XG4gICAgICAgIGtleUVsLnNldFRleHQodGFzay5rZXkpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3VtbWFyeUVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJqaXJhLXN1bW1hcnlcIiB9KTtcbiAgICAgICAgc3VtbWFyeUVsLnNldFRleHQodGFzay5zdW1tYXJ5KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN0YXR1c0VsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJqaXJhLXN0YXR1c1wiIH0pO1xuICAgICAgICBzdGF0dXNFbC5zZXRUZXh0KHRhc2suc3RhdHVzKTtcblxuICAgICAgICAvLyBBZGQgc3R5bGVzIGlubGluZSBzaW5jZSB3ZSBjYW4ndCBtb2RpZnkgdGhlIENTUyBmaWxlXG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgZWwuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XG4gICAgICAgIGVsLnN0eWxlLmdhcCA9IFwiNHB4XCI7XG4gICAgICAgIGtleUVsLnN0eWxlLmZvbnRXZWlnaHQgPSBcImJvbGRcIjtcbiAgICAgICAga2V5RWwuc3R5bGUuY29sb3IgPSBcInZhcigtLXRleHQtYWNjZW50KVwiO1xuICAgICAgICBzdGF0dXNFbC5zdHlsZS5mb250U2l6ZSA9IFwiMC44ZW1cIjtcbiAgICAgICAgc3RhdHVzRWwuc3R5bGUuY29sb3IgPSBcInZhcigtLXRleHQtbXV0ZWQpXCI7XG4gICAgICAgIHN0YXR1c0VsLnN0eWxlLmZvbnRTdHlsZSA9IFwiaXRhbGljXCI7XG4gICAgfVxuXG4gICAgb25DaG9vc2VTdWdnZXN0aW9uKHRhc2s6IEppcmFUYXNrLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdUYXNrIGNob3NlbjonLCB0YXNrKTtcbiAgICAgICAgLy8gRW5zdXJlIHRoZSBvblNlbGVjdCBjYWxsYmFjayBpcyBjYWxsZWRcbiAgICAgICAgaWYgKHRoaXMub25TZWxlY3QpIHtcbiAgICAgICAgICAgIHRoaXMub25TZWxlY3QodGFzayk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBQXdFOzs7QUNxQmpFLElBQU0sbUJBQTJDO0FBQUEsRUFDcEQsY0FBYztBQUFBLEVBQ2QsZ0JBQWdCO0FBQUEsRUFDaEIsYUFBYTtBQUFBLElBQ1Q7QUFBQSxNQUNJLEtBQUs7QUFBQSxNQUNMLGdCQUFnQjtBQUFBLE1BQ2hCLGNB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QVk7QUFDYixnQkFBUSxNQUFNO0FBQ2QsWUFBSSx3QkFBTztBQUNYO0FBQUE7QUFJSixVQUFJO0FBQ0EsY0FBTSxZQUFZLElBQUksa0JBQWtCLEtBQUssS0FBSyxPQUFPLENBQUMsaUJBQWlCO0FBQ3ZFLGtCQUFRLElBQUksa0JBQWtCO0FBQzlCLGdCQUFNLFNBQVMsV0FBVztBQUMxQixnQkFBTSxTQUFTLE9BQU87QUFDdEIsZ0JBQU0sY0FBYyxPQUFPLFFBQVEsT0FBTztBQUMxQyxnQkFBTSxjQUFjLEtBQUssU0FBUyxhQUFhO0FBRy9DLGdCQUFNLFVBQVUsWUFBWSxNQUFNLEdBQUcsT0FBTyxLQUFLLFlBQVksVUFDL0MsSUFBSSxhQUFhLFFBQVEsYUFBYSxZQUFZLGFBQWEsU0FBUyxhQUFhLFlBQ3JGLFlBQVksTUFBTSxPQUFPO0FBR3ZDLGlCQUFPLFFBQVEsT0FBTyxNQUFNO0FBRzVCLGlCQUFPLFVBQVU7QUFBQSxZQUNiLE1BQU0sT0FBTztBQUFBLFlBQ2IsSUFBSSxPQUFPLEtBQUssWUFBWSxTQUFTLElBQUksYUFBYSxRQUFRLGFBQWEsWUFBWSxhQUFhLFNBQVMsYUFBYSxVQUFVO0FBQUE7QUFBQTtBQUs1SSxnQkFBUSxJQUFJLHNCQUFzQjtBQUFBLGVBQzdCLGdCQUFQO0FBQ0UsZ0JBQVEsTUFBTSw2QkFBNkI7QUFDM0MsWUFBSSx3QkFBTztBQUFBO0FBQUEsYUFFVixPQUFQO0FBQ0UsY0FBUSxNQUFNLCtCQUErQjtBQUM3QyxVQUFJLHdCQUFPLE1BQU0sV0FBVztBQUFBO0FBQUE7QUFBQSxRQUk5QixlQUFlO0FBQ2pCLFVBQU0sYUFBYSxNQUFNLEtBQUs7QUFDOUIsWUFBUSxJQUFJLGdCQUFnQjtBQUM1QixTQUFLLFdBQVcsT0FBTyxPQUFPLElBQUksa0JBQWtCO0FBQ3BELFlBQVEsSUFBSSxvQkFBb0IsS0FBSztBQUFBO0FBQUEsUUFHbkMsZUFBZTtBQUNqQixZQUFRLElBQUksb0JBQW9CLEtBQUs7QUFDckMsVUFBTSxLQUFLLFNBQVMsS0FBSztBQUFBO0FBQUEsRUFHN0Isa0JBQWtCO0FBRWQsU0FBSyxJQUFJLFVBQVUsUUFBUTtBQUczQixTQUFLLElBQUksVUFBVSxpQkFBaUIsVUFBUTtBQTVMcEQ7QUE2TFksVUFBSSxLQUFLLEtBQUssa0JBQWtCLFlBQVk7QUFDeEMsUUFBQyxXQUFLLEtBQXNCLGdCQUEzQixtQkFBd0MsU0FBUztBQUFBO0FBQUE7QUFJMUQsUUFBSSx3QkFBTztBQUFBO0FBQUE7IiwKICAibmFtZXMiOiBbXQp9Cg==
