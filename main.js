/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};

// src/main.ts
__export(exports, {
  default: () => EmojiChecklistPlugin
});
var import_obsidian7 = __toModule(require("obsidian"));

// src/types.ts
var DEFAULT_SETTINGS = {
  checkedEmoji: "\u2705",
  uncheckedEmoji: "\u2B1C\uFE0F",
  tagMappings: [
    {
      tag: "stopper",
      uncheckedEmoji: "\u{1F6D1}",
      checkedEmoji: "\u2705"
    }
  ],
  jiraSettings: {
    enabled: false,
    baseUrl: "",
    username: "",
    apiToken: "",
    triggerWord: "@jira"
  },
  reportSettings: {
    enabled: true,
    showHeaders: true,
    sections: [
      {
        name: "GREETINGS",
        content: "Good Morning everyone",
        enabled: true,
        showHeader: true
      },
      {
        name: "DATE",
        content: "",
        enabled: true,
        showHeader: false
      },
      {
        name: "BODY",
        content: "",
        enabled: true,
        showHeader: true
      },
      {
        name: "STOPPERS",
        content: "",
        enabled: true,
        showHeader: true
      }
    ]
  },
  gitSettings: {
    githubToken: "",
    gitlabToken: "",
    gitlabUrl: ""
  }
};

// src/settings.ts
var import_obsidian = __toModule(require("obsidian"));
var EmojiChecklistSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  updateTestSection() {
    if (this.testEl) {
      this.testEl.empty();
      const header = this.testEl.createEl("h3", { text: "Live Preview" });
      const uncheckedExample = this.testEl.createEl("div", { cls: "setting-item" });
      uncheckedExample.createEl("span", { text: "Unchecked example: " });
      const uncheckedContainer = uncheckedExample.createEl("span", { cls: "task-preview" });
      uncheckedContainer.createEl("span", {
        text: this.plugin.settings.uncheckedEmoji,
        cls: "emoji-preview"
      });
      uncheckedContainer.createEl("span", { text: " Sample task" });
      const checkedExample = this.testEl.createEl("div", { cls: "setting-item" });
      checkedExample.createEl("span", { text: "Checked example: " });
      const checkedContainer = checkedExample.createEl("span", { cls: "task-preview" });
      checkedContainer.createEl("span", {
        text: this.plugin.settings.checkedEmoji,
        cls: "emoji-preview"
      });
      const checkedText = checkedContainer.createEl("span", { text: " Sample task" });
      checkedText.style.textDecoration = "line-through";
      checkedText.style.color = "var(--text-muted)";
      if (this.plugin.settings.tagMappings.length > 0) {
        const tagHeader = this.testEl.createEl("h3", { text: "Tag Examples" });
        tagHeader.style.marginTop = "2em";
        tagHeader.style.marginBottom = "1em";
        for (const mapping of this.plugin.settings.tagMappings) {
          const tagUncheckedExample = this.testEl.createEl("div", { cls: "setting-item" });
          tagUncheckedExample.createEl("span", { text: `#${mapping.tag} unchecked: ` });
          const tagUncheckedContainer = tagUncheckedExample.createEl("span", { cls: "task-preview" });
          tagUncheckedContainer.createEl("span", {
            text: mapping.uncheckedEmoji,
            cls: "emoji-preview"
          });
          tagUncheckedContainer.createEl("span", { text: ` Sample #${mapping.tag} task` });
          const tagCheckedExample = this.testEl.createEl("div", { cls: "setting-item" });
          tagCheckedExample.createEl("span", { text: `#${mapping.tag} checked: ` });
          const tagCheckedContainer = tagCheckedExample.createEl("span", { cls: "task-preview" });
          tagCheckedContainer.createEl("span", {
            text: mapping.checkedEmoji,
            cls: "emoji-preview"
          });
          const tagCheckedText = tagCheckedContainer.createEl("span", { text: ` Sample #${mapping.tag} task` });
          tagCheckedText.style.textDecoration = "line-through";
          tagCheckedText.style.color = "var(--text-muted)";
          tagUncheckedExample.style.marginBottom = "0.5em";
          tagCheckedExample.style.marginBottom = "0.5em";
        }
      }
      header.style.marginTop = "2em";
      header.style.marginBottom = "1em";
      uncheckedExample.style.marginBottom = "0.5em";
      checkedExample.style.marginBottom = "0.5em";
    }
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Emoji Checklist Settings" });
    this.testEl = containerEl.createDiv();
    this.updateTestSection();
    containerEl.createEl("h3", { text: "Basic Settings" });
    new import_obsidian.Setting(containerEl).setName("Default Unchecked Emoji").setDesc("Emoji to use for unchecked tasks").addText((text) => text.setPlaceholder("\u2B1C\uFE0F").setValue(this.plugin.settings.uncheckedEmoji).onChange((value) => {
      this.plugin.settings.uncheckedEmoji = value;
      this.updateTestSection();
    }));
    new import_obsidian.Setting(containerEl).setName("Default Checked Emoji").setDesc("Emoji to use for checked tasks").addText((text) => text.setPlaceholder("\u2705").setValue(this.plugin.settings.checkedEmoji).onChange((value) => {
      this.plugin.settings.checkedEmoji = value;
      this.updateTestSection();
    }));
    containerEl.createEl("h3", { text: "Tag Mappings" });
    const tagMappingsContainer = containerEl.createDiv("tag-mappings");
    this.plugin.settings.tagMappings.forEach((mapping, index) => {
      const mappingContainer = tagMappingsContainer.createDiv("tag-mapping");
      new import_obsidian.Setting(mappingContainer).setName(`Tag #${mapping.tag}`).addText((text) => text.setPlaceholder("tag name").setValue(mapping.tag).onChange((value) => {
        this.plugin.settings.tagMappings[index].tag = value;
        this.updateTestSection();
      })).addText((text) => text.setPlaceholder("unchecked emoji").setValue(mapping.uncheckedEmoji).onChange((value) => {
        this.plugin.settings.tagMappings[index].uncheckedEmoji = value;
        this.updateTestSection();
      })).addText((text) => text.setPlaceholder("checked emoji").setValue(mapping.checkedEmoji).onChange((value) => {
        this.plugin.settings.tagMappings[index].checkedEmoji = value;
        this.updateTestSection();
      })).addButton((button) => button.setIcon("trash").onClick(() => {
        this.plugin.settings.tagMappings.splice(index, 1);
        this.display();
      }));
    });
    new import_obsidian.Setting(tagMappingsContainer).addButton((button) => button.setButtonText("Add Tag Mapping").onClick(() => {
      this.plugin.settings.tagMappings.push({
        tag: "",
        uncheckedEmoji: "",
        checkedEmoji: ""
      });
      this.display();
    }));
    containerEl.createEl("h3", { text: "Jira Integration" });
    new import_obsidian.Setting(containerEl).setName("Enable Jira Integration").setDesc("Enable/disable Jira integration").addToggle((toggle) => toggle.setValue(this.plugin.settings.jiraSettings.enabled).onChange((value) => {
      this.plugin.settings.jiraSettings.enabled = value;
    }));
    new import_obsidian.Setting(containerEl).setName("Trigger Word").setDesc("Word that triggers Jira task insertion (e.g., @jira)").addText((text) => text.setPlaceholder("@jira").setValue(this.plugin.settings.jiraSettings.triggerWord).onChange((value) => {
      this.plugin.settings.jiraSettings.triggerWord = value;
    }));
    new import_obsidian.Setting(containerEl).setName("Jira Base URL").setDesc("Your Jira instance URL (e.g., https://your-domain.atlassian.net)").addText((text) => text.setPlaceholder("https://your-domain.atlassian.net").setValue(this.plugin.settings.jiraSettings.baseUrl).onChange((value) => {
      this.plugin.settings.jiraSettings.baseUrl = value;
    }));
    new import_obsidian.Setting(containerEl).setName("Username").setDesc("Your Jira email address").addText((text) => text.setPlaceholder("email@example.com").setValue(this.plugin.settings.jiraSettings.username).onChange((value) => {
      this.plugin.settings.jiraSettings.username = value;
    }));
    new import_obsidian.Setting(containerEl).setName("API Token").setDesc("Your Jira API token (from https://id.atlassian.com/manage-profile/security/api-tokens)").addText((text) => text.setPlaceholder("Enter your API token").setValue(this.plugin.settings.jiraSettings.apiToken).onChange((value) => {
      this.plugin.settings.jiraSettings.apiToken = value;
    }));
    containerEl.createEl("h3", { text: "Git Integration" });
    new import_obsidian.Setting(containerEl).setName("GitHub Token").setDesc("Your GitHub personal access token").addText((text) => text.setPlaceholder("ghp_...").setValue(this.plugin.settings.gitSettings.githubToken).onChange((value) => {
      this.plugin.settings.gitSettings.githubToken = value;
    }));
    new import_obsidian.Setting(containerEl).setName("GitLab Token").setDesc("Your GitLab personal access token").addText((text) => text.setPlaceholder("glpat-...").setValue(this.plugin.settings.gitSettings.gitlabToken).onChange((value) => {
      this.plugin.settings.gitSettings.gitlabToken = value;
    }));
    new import_obsidian.Setting(containerEl).setName("GitLab URL").setDesc("Your GitLab instance URL (e.g., https://gitlab.com)").addText((text) => text.setPlaceholder("https://gitlab.com").setValue(this.plugin.settings.gitSettings.gitlabUrl).onChange((value) => {
      this.plugin.settings.gitSettings.gitlabUrl = value;
    }));
    containerEl.createEl("h2", { text: "Report Settings" });
    new import_obsidian.Setting(containerEl).setName("Enable Report Feature").setDesc("Enable/disable the report formatting feature").addToggle((toggle) => toggle.setValue(this.plugin.settings.reportSettings.enabled).onChange((value) => {
      this.plugin.settings.reportSettings.enabled = value;
    }));
    new import_obsidian.Setting(containerEl).setName("Show Section Headers").setDesc("Show/hide section headers in the report").addToggle((toggle) => toggle.setValue(this.plugin.settings.reportSettings.showHeaders).onChange((value) => {
      this.plugin.settings.reportSettings.showHeaders = value;
    }));
    containerEl.createEl("h3", { text: "Report Sections" });
    for (let i = 0; i < this.plugin.settings.reportSettings.sections.length; i++) {
      const section = this.plugin.settings.reportSettings.sections[i];
      const sectionContainer = containerEl.createDiv();
      sectionContainer.addClass("report-section-settings");
      new import_obsidian.Setting(sectionContainer).setName(`Section: ${section.name}`).setDesc("Configure this section").addToggle((toggle) => toggle.setValue(section.enabled).onChange((value) => {
        section.enabled = value;
      })).addToggle((toggle) => toggle.setTooltip("Show section header").setValue(section.showHeader).onChange((value) => {
        section.showHeader = value;
      })).addText((text) => text.setPlaceholder("Section content").setValue(section.content).onChange((value) => {
        section.content = value;
      }));
    }
    new import_obsidian.Setting(containerEl).setName("Add New Section").setDesc("Add a new section to the report").addButton((button) => button.setButtonText("Add Section").onClick(() => {
      this.plugin.settings.reportSettings.sections.push({
        name: "New Section",
        content: "",
        enabled: true,
        showHeader: true
      });
      this.display();
    }));
    containerEl.createEl("h3", { text: "Save Changes" });
    new import_obsidian.Setting(containerEl).setName("Apply All Settings").setDesc("Save all changes made to the settings").addButton((button) => button.setButtonText("Apply").setCta().onClick(async () => {
      await this.plugin.saveSettings();
      new import_obsidian.Notice("All settings have been saved");
      this.plugin.refreshAllNotes();
    }));
  }
};

// src/processor.ts
var import_obsidian2 = __toModule(require("obsidian"));
var EmojiRenderChild = class extends import_obsidian2.MarkdownRenderChild {
  constructor(span) {
    super(span);
    this.span = span;
  }
  onunload() {
  }
};
var CheckboxProcessor = class {
  static findTagInLine(listItem) {
    const text = listItem.textContent || "";
    const tagMatch = text.replace(/^[^\w\s#]*\s*/, "").match(/#(\w+)/);
    return tagMatch ? tagMatch[1] : null;
  }
  static getEmojisForTag(plugin, tag, isChecked) {
    if (!tag) {
      return isChecked ? plugin.settings.checkedEmoji : plugin.settings.uncheckedEmoji;
    }
    const mapping = plugin.settings.tagMappings.find((m) => m.tag === tag);
    if (!mapping) {
      return isChecked ? plugin.settings.checkedEmoji : plugin.settings.uncheckedEmoji;
    }
    return isChecked ? mapping.checkedEmoji : mapping.uncheckedEmoji;
  }
  static updateEditorContent(editor, lineIndex, newEmoji) {
    const lineText = editor.getLine(lineIndex);
    const newText = lineText.replace(/^[^\w\s#]*\s*/, `${newEmoji} `);
    const change = {
      from: { line: lineIndex, ch: 0 },
      to: { line: lineIndex, ch: lineText.length },
      text: newText
    };
    editor.transaction({ changes: [change] });
  }
  static createEmojiSpan(emoji) {
    const span = document.createElement("span");
    span.className = "task-list-emoji";
    span.textContent = emoji;
    return span;
  }
  static styleContainer(container) {
    if (container) {
      container.style.display = "inline-block";
      container.style.verticalAlign = "top";
      container.style.marginRight = "0.5em";
    }
  }
  static setupEventListeners(plugin, checkbox, span, tag, index, editor, sectionInfo, ctx) {
    const updateEmoji = (isChecked) => {
      const newEmoji = this.getEmojisForTag(plugin, tag, isChecked);
      span.textContent = newEmoji;
      if (editor && sectionInfo) {
        this.updateEditorContent(editor, sectionInfo.lineStart + index, newEmoji);
      }
    };
    const toggleCheckbox = async () => {
      checkbox.checked = !checkbox.checked;
      updateEmoji(checkbox.checked);
      checkbox.dispatchEvent(new Event("change", { bubbles: true }));
      checkbox.dispatchEvent(new Event("click", { bubbles: true }));
      if (ctx.sourcePath) {
        ctx.addChild(new EmojiRenderChild(span));
      }
    };
    span.addEventListener("click", async (e) => {
      e.preventDefault();
      e.stopPropagation();
      await toggleCheckbox();
    });
    checkbox.addEventListener("change", () => {
      updateEmoji(checkbox.checked);
    });
  }
  static async processCheckbox(plugin, checkbox, index, editor, sectionInfo, ctx) {
    const listItem = checkbox.closest("li.task-list-item");
    if (!listItem)
      return;
    const tag = this.findTagInLine(listItem);
    const emoji = this.getEmojisForTag(plugin, tag, checkbox.checked);
    const span = this.createEmojiSpan(emoji);
    if (editor && sectionInfo) {
      this.updateEditorContent(editor, sectionInfo.lineStart + index, emoji);
    }
    this.setupEventListeners(plugin, checkbox, span, tag, index, editor, sectionInfo, ctx);
    this.styleContainer(checkbox.parentElement);
    checkbox.style.display = "none";
    checkbox.after(span);
  }
};
var processCheckboxes = function(el, ctx) {
  const checkboxes = el.querySelectorAll('li.task-list-item input[type="checkbox"]');
  const view = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
  const editor = view == null ? void 0 : view.editor;
  const sectionInfo = ctx.getSectionInfo(el);
  checkboxes.forEach((checkbox, index) => {
    if (!(checkbox instanceof HTMLInputElement))
      return;
    CheckboxProcessor.processCheckbox(this, checkbox, index, editor, sectionInfo, ctx);
  });
};

// src/jira.ts
var import_obsidian3 = __toModule(require("obsidian"));
var JiraClient = class {
  constructor(settings) {
    this.settings = settings;
  }
  getAuthHeader() {
    const credentials = `${this.settings.username}:${this.settings.apiToken}`;
    const base64Credentials = Buffer.from(credentials).toString("base64");
    return `Basic ${base64Credentials}`;
  }
  async testConnection() {
    const baseUrl = this.settings.baseUrl.replace(/\/$/, "");
    const apiUrl = `${baseUrl}/rest/api/2/myself`;
    try {
      const response = await (0, import_obsidian3.requestUrl)({
        url: apiUrl,
        method: "GET",
        headers: {
          "Authorization": this.getAuthHeader(),
          "Accept": "application/json"
        }
      });
      return response.status === 200;
    } catch (error) {
      console.error("Connection test failed:", error);
      return false;
    }
  }
  async searchTasks(query) {
    if (!this.settings.enabled || !this.settings.baseUrl || !this.settings.apiToken) {
      throw new Error("Jira integration is not properly configured");
    }
    const isConnected = await this.testConnection();
    if (!isConnected) {
      throw new Error("Could not authenticate with Jira. Please check your credentials.");
    }
    const baseUrl = this.settings.baseUrl.replace(/\/$/, "");
    const sanitizedQuery = query.replace(/["']/g, "");
    let jql;
    if (sanitizedQuery.toLowerCase() === "my tasks" || sanitizedQuery.toLowerCase() === "assigned to me") {
      jql = "assignee = currentUser()";
    } else if (sanitizedQuery.toLowerCase().startsWith("my")) {
      const status = sanitizedQuery.toLowerCase().includes("done") ? "Done" : sanitizedQuery.toLowerCase().includes("open") ? "Open" : null;
      jql = status ? `assignee = currentUser() AND status = "${status}"` : `assignee = currentUser() AND (summary ~ "${sanitizedQuery}" OR description ~ "${sanitizedQuery}")`;
    } else {
      jql = `assignee = currentUser() AND (summary ~ "${sanitizedQuery}" OR description ~ "${sanitizedQuery}")`;
    }
    jql += " ORDER BY updated DESC";
    console.log("JQL Query:", jql);
    const apiUrl = `${baseUrl}/rest/api/2/search?jql=${encodeURIComponent(jql)}&maxResults=10&fields=summary,status`;
    console.log("API URL:", apiUrl);
    const requestParams = {
      url: apiUrl,
      method: "GET",
      headers: {
        "Authorization": this.getAuthHeader(),
        "Accept": "application/json"
      }
    };
    try {
      console.log("Making request...");
      const response = await (0, import_obsidian3.requestUrl)(requestParams);
      console.log("Response status:", response.status);
      if (response.status !== 200) {
        console.error("Error response:", response.text);
        throw new Error(`Jira API returned status ${response.status}: ${response.text}`);
      }
      if (!response.json || !response.json.issues) {
        console.error("Invalid response format:", response);
        throw new Error("Invalid response format from Jira API");
      }
      console.log("Found issues:", response.json.issues.length);
      return response.json.issues.map((issue) => {
        var _a;
        return {
          key: issue.key,
          summary: issue.fields.summary,
          url: `${baseUrl}/browse/${issue.key}`,
          status: ((_a = issue.fields.status) == null ? void 0 : _a.name) || "Unknown"
        };
      });
    } catch (error) {
      console.error("Error details:", {
        message: error.message,
        status: error.status,
        response: error.response
      });
      if (error.status === 401 || error.status === 403) {
        throw new Error("Authentication failed. Please verify:\n1. Your email address is correct\n2. Your API token is correct\n3. You have the necessary permissions");
      }
      throw error;
    }
  }
  async formatTasksAsMarkdown(tasks) {
    return tasks.map((task) => `- [ ] [${task.key}: ${task.summary}](${task.url}) (${task.status})`).join("\n");
  }
};

// src/suggester.ts
var import_obsidian4 = __toModule(require("obsidian"));
var JiraTaskSuggester = class extends import_obsidian4.SuggestModal {
  constructor(app, tasks, onSelect) {
    super(app);
    this.tasks = [];
    this.selectedIndex = 0;
    console.log("JiraTaskSuggester constructor called");
    console.log("Tasks received:", tasks);
    this.tasks = tasks;
    this.onSelect = onSelect;
    this.setPlaceholder("Select a Jira task...");
    this.containerEl.addClass("jira-task-suggester");
    this.modalEl.style.maxWidth = "600px";
    this.modalEl.style.width = "80%";
    this.modalEl.style.top = "30%";
    this.modalEl.style.left = "50%";
    this.modalEl.style.transform = "translate(-50%, -30%)";
    this.modalEl.style.position = "fixed";
    const suggestionsContainer = this.modalEl.querySelector(".suggestion-container");
    if (suggestionsContainer instanceof HTMLElement) {
      suggestionsContainer.style.maxHeight = "400px";
      suggestionsContainer.style.width = "100%";
    }
    this.scope = new import_obsidian4.Scope();
    this.scope.register([], "Escape", () => {
      this.close();
      return false;
    });
    this.scope.register([], "Enter", (evt) => {
      const suggestions = this.getSuggestions(this.inputEl.value);
      if (suggestions && suggestions.length > 0) {
        this.onChooseSuggestion(suggestions[this.selectedIndex], evt);
        return false;
      }
      return true;
    });
    this.scope.register([], "ArrowUp", (evt) => {
      evt.preventDefault();
      this.selectedIndex = Math.max(0, this.selectedIndex - 1);
      this.updateSelectedSuggestion();
      return false;
    });
    this.scope.register([], "ArrowDown", (evt) => {
      evt.preventDefault();
      const suggestions = this.getSuggestions(this.inputEl.value);
      this.selectedIndex = Math.min(((suggestions == null ? void 0 : suggestions.length) || 1) - 1, this.selectedIndex + 1);
      this.updateSelectedSuggestion();
      return false;
    });
    console.log("About to open modal");
    this.open();
  }
  updateSelectedSuggestion() {
    const suggestionElements = this.modalEl.querySelectorAll(".suggestion-container .suggestion-item");
    suggestionElements.forEach((el, index) => {
      if (index === this.selectedIndex) {
        el.addClass("is-selected");
        el.style.backgroundColor = "var(--background-modifier-hover)";
      } else {
        el.removeClass("is-selected");
        el.style.backgroundColor = "transparent";
      }
    });
  }
  open() {
    console.log("Explicitly opening modal");
    super.open();
    this.containerEl.style.display = "block";
    this.containerEl.style.visibility = "visible";
    this.containerEl.style.opacity = "1";
  }
  getSuggestions(query) {
    console.log("Getting suggestions for query:", query);
    const lowerQuery = query.toLowerCase();
    const filteredTasks = this.tasks.filter((task) => task.key.toLowerCase().includes(lowerQuery) || task.summary.toLowerCase().includes(lowerQuery));
    console.log("Filtered tasks:", filteredTasks);
    return filteredTasks;
  }
  renderSuggestion(task, el) {
    console.log("Rendering suggestion for task:", task);
    el.addClass("suggestion-item");
    const container = el.createDiv({ cls: "suggestion-content" });
    container.style.display = "flex";
    container.style.alignItems = "center";
    container.style.gap = "8px";
    const iconContainer = container.createDiv({ cls: "suggestion-icon" });
    iconContainer.innerHTML = `<svg width="16" height="16" viewBox="0 0 128 128" fill="currentColor">
            <path d="M108.023 16H61.805c0 11.52 9.324 20.848 20.847 20.848h8.5v8.226c0 11.52 9.328 20.847 20.848 20.847V19.977A3.98 3.98 0 00108.023 16z"/>
            <path d="M85.121 39.04H38.902c0 11.52 9.324 20.847 20.847 20.847h8.5v8.226c0 11.524 9.328 20.847 20.848 20.847V43.016a3.978 3.978 0 00-3.976-3.977z"/>
            <path d="M62.219 62.078H16c0 11.524 9.324 20.847 20.847 20.847h8.5v8.23c0 11.52 9.328 20.847 20.848 20.847V66.055a3.979 3.979 0 00-3.976-3.977z"/>
        </svg>`;
    iconContainer.style.display = "flex";
    iconContainer.style.alignItems = "center";
    iconContainer.style.color = "var(--text-muted)";
    const textContainer = container.createDiv({ cls: "suggestion-text" });
    const titleEl = textContainer.createDiv({ cls: "suggestion-title" });
    titleEl.setText(`${task.key} - ${task.summary}`);
    titleEl.style.fontWeight = "bold";
    const statusEl = textContainer.createDiv({ cls: "suggestion-description" });
    statusEl.setText(task.status);
    statusEl.style.fontSize = "0.8em";
    statusEl.style.color = "var(--text-muted)";
    el.addEventListener("mouseenter", () => {
      var _a;
      el.addClass("is-selected");
      this.selectedIndex = Array.from(((_a = el.parentElement) == null ? void 0 : _a.children) || []).indexOf(el);
      this.updateSelectedSuggestion();
    });
    el.style.padding = "8px";
    el.style.cursor = "pointer";
    el.style.borderRadius = "4px";
    el.style.transition = "background-color 100ms ease-in-out";
  }
  onChooseSuggestion(task, evt) {
    console.log("Task chosen:", task);
    if (this.onSelect) {
      this.onSelect(task);
    }
    this.close();
  }
};

// src/git.ts
var import_obsidian5 = __toModule(require("obsidian"));
var GitIntegration = class {
  constructor(settings) {
    this.settings = settings;
  }
  getHeaders(isGitLab) {
    return {
      "Authorization": `Bearer ${isGitLab ? this.settings.gitlabToken : this.settings.githubToken}`,
      "Content-Type": "application/json"
    };
  }
  async getLastMergedCommit(repository, isGitLab) {
    try {
      if (isGitLab) {
        const encodedRepo = encodeURIComponent(repository);
        const url = `${this.settings.gitlabUrl}/api/v4/projects/${encodedRepo}/merge_requests?state=merged&order_by=updated_at&sort=desc&per_page=1`;
        const response = await (0, import_obsidian5.requestUrl)({
          url,
          headers: this.getHeaders(true)
        });
        return response.json[0];
      } else {
        const [owner, repo] = repository.split("/");
        const url = `https://api.github.com/repos/${owner}/${repo}/pulls?state=closed&sort=updated&direction=desc&per_page=1`;
        const response = await (0, import_obsidian5.requestUrl)({
          url,
          headers: this.getHeaders(false)
        });
        return response.json[0];
      }
    } catch (error) {
      console.error("Error fetching last merged commit:", error);
      throw error;
    }
  }
  async getPendingMergeRequests(repository, isGitLab) {
    try {
      if (isGitLab) {
        const encodedRepo = encodeURIComponent(repository);
        const url = `${this.settings.gitlabUrl}/api/v4/projects/${encodedRepo}/merge_requests?state=opened`;
        const response = await (0, import_obsidian5.requestUrl)({
          url,
          headers: this.getHeaders(true)
        });
        return response.json;
      } else {
        const [owner, repo] = repository.split("/");
        const url = `https://api.github.com/repos/${owner}/${repo}/pulls?state=open`;
        const response = await (0, import_obsidian5.requestUrl)({
          url,
          headers: this.getHeaders(false)
        });
        return response.json;
      }
    } catch (error) {
      console.error("Error fetching pending merge requests:", error);
      throw error;
    }
  }
  async getAllGitHubPRs() {
    try {
      const reposResponse = await (0, import_obsidian5.requestUrl)({
        url: "https://api.github.com/user/repos?affiliation=owner,collaborator,organization_member&sort=updated",
        headers: this.getHeaders(false)
      });
      const allPRs = await Promise.all(reposResponse.json.map(async (repo) => {
        const response = await (0, import_obsidian5.requestUrl)({
          url: `https://api.github.com/repos/${repo.full_name}/pulls?state=open`,
          headers: this.getHeaders(false)
        });
        return response.json.map((pr) => ({
          ...pr,
          repository: repo.full_name
        }));
      }));
      return allPRs.flat().sort((a, b) => new Date(b.updated_at).getTime() - new Date(a.updated_at).getTime());
    } catch (error) {
      console.error("Error fetching GitHub PRs:", error);
      throw error;
    }
  }
  async getAllGitLabMRs() {
    try {
      const projectsResponse = await (0, import_obsidian5.requestUrl)({
        url: `${this.settings.gitlabUrl}/api/v4/projects?membership=true&sort=desc`,
        headers: this.getHeaders(true)
      });
      const allMRs = await Promise.all(projectsResponse.json.map(async (project) => {
        const response = await (0, import_obsidian5.requestUrl)({
          url: `${this.settings.gitlabUrl}/api/v4/projects/${project.id}/merge_requests?state=opened`,
          headers: this.getHeaders(true)
        });
        return response.json.map((mr) => ({
          ...mr,
          repository: project.path_with_namespace
        }));
      }));
      return allMRs.flat().sort((a, b) => new Date(b.updated_at).getTime() - new Date(a.updated_at).getTime());
    } catch (error) {
      console.error("Error fetching GitLab MRs:", error);
      throw error;
    }
  }
  getSettings() {
    return this.settings;
  }
};

// src/gitSuggester.ts
var import_obsidian6 = __toModule(require("obsidian"));
var GitMergeRequestSuggester = class extends import_obsidian6.SuggestModal {
  constructor(app, inputEl, gitIntegration, suggestions, onChoose) {
    super(app);
    this.suggestions = [];
    this.loading = false;
    this.selectedIndex = 0;
    console.log("GitMergeRequestSuggester constructor called");
    this.gitIntegration = gitIntegration;
    this.inputEl = inputEl;
    if (suggestions) {
      this.suggestions = suggestions;
    }
    this.onChoose = onChoose;
    this.setPlaceholder("Search pull requests...");
    this.containerEl.addClass("git-mr-suggester");
    this.modalEl.style.maxWidth = "600px";
    this.modalEl.style.width = "80%";
    this.modalEl.style.top = "30%";
    this.modalEl.style.left = "50%";
    this.modalEl.style.transform = "translate(-50%, -30%)";
    this.modalEl.style.position = "fixed";
    const suggestionsContainer = this.modalEl.querySelector(".suggestion-container");
    if (suggestionsContainer instanceof HTMLElement) {
      suggestionsContainer.style.maxHeight = "400px";
      suggestionsContainer.style.width = "100%";
      suggestionsContainer.style.border = "1px solid var(--background-modifier-border)";
      suggestionsContainer.style.borderRadius = "4px";
      suggestionsContainer.style.overflow = "auto";
    }
    const inputContainer = this.modalEl.querySelector(".prompt");
    if (inputContainer instanceof HTMLElement) {
      inputContainer.style.border = "1px solid var(--background-modifier-border)";
      inputContainer.style.borderRadius = "4px";
      inputContainer.style.margin = "0 0 8px 0";
    }
    const input = this.modalEl.querySelector(".prompt-input");
    if (input instanceof HTMLElement) {
      input.style.width = "100%";
      input.style.padding = "8px 12px";
      input.style.border = "none";
      input.style.background = "var(--background-primary)";
    }
    this.scope = new import_obsidian6.Scope();
    this.scope.register([], "Escape", () => {
      this.close();
      return false;
    });
    this.scope.register([], "Enter", async (evt) => {
      const suggestions2 = await this.getSuggestions(this.inputEl.value);
      if (suggestions2 && suggestions2.length > 0) {
        this.onChooseSuggestion(suggestions2[this.selectedIndex], evt);
        return false;
      }
      return true;
    });
    this.scope.register([], "ArrowUp", async (evt) => {
      evt.preventDefault();
      this.selectedIndex = Math.max(0, this.selectedIndex - 1);
      this.updateSelectedSuggestion();
      return false;
    });
    this.scope.register([], "ArrowDown", async (evt) => {
      evt.preventDefault();
      const suggestions2 = await this.getSuggestions(this.inputEl.value);
      this.selectedIndex = Math.min(((suggestions2 == null ? void 0 : suggestions2.length) || 1) - 1, this.selectedIndex + 1);
      this.updateSelectedSuggestion();
      return false;
    });
    console.log("About to open modal");
    this.open();
  }
  updateSelectedSuggestion() {
    const suggestionElements = this.modalEl.querySelectorAll(".suggestion-container .suggestion-item");
    suggestionElements.forEach((el, index) => {
      if (index === this.selectedIndex) {
        el.addClass("is-selected");
        el.scrollIntoView({ block: "nearest" });
      } else {
        el.removeClass("is-selected");
      }
    });
  }
  async getSuggestions(query) {
    if (this.loading)
      return this.suggestions;
    try {
      this.loading = true;
      const searchStr = query.toLowerCase();
      const filteredSuggestions = this.suggestions.filter((mr) => {
        var _a, _b, _c, _d;
        return mr.title.toLowerCase().includes(searchStr) || ((_a = mr.description) == null ? void 0 : _a.toLowerCase().includes(searchStr)) || (mr.web_url || mr.html_url || "").toLowerCase().includes(searchStr) || ((_b = mr.author.name) == null ? void 0 : _b.toLowerCase().includes(searchStr)) || ((_c = mr.author.login) == null ? void 0 : _c.toLowerCase().includes(searchStr)) || ((_d = mr.author.username) == null ? void 0 : _d.toLowerCase().includes(searchStr));
      });
      return filteredSuggestions;
    } catch (error) {
      console.error("Error filtering suggestions:", error);
      return [];
    } finally {
      this.loading = false;
    }
  }
  onChooseSuggestion(result, evt) {
    if (this.onChoose) {
      this.onChoose(result);
    }
    this.close();
  }
  renderSuggestion(result, el) {
    var _a, _b, _c, _d;
    el.addClass("suggestion-item");
    const container = el.createDiv({ cls: "suggestion-content" });
    container.style.display = "flex";
    container.style.alignItems = "center";
    container.style.gap = "8px";
    const iconContainer = container.createDiv({ cls: "suggestion-icon" });
    if ((_a = result.web_url) == null ? void 0 : _a.includes("gitlab")) {
      iconContainer.innerHTML = `<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M15.97 9.058l-.895-2.756L13.3.842c-.09-.282-.488-.282-.58 0L10.946 6.3H5.054L3.28.842c-.09-.282-.488-.282-.58 0L.924 6.302.03 9.058c-.082.25.008.526.22.682l7.75 5.63 7.75-5.63c.212-.156.302-.43.22-.682"/>
            </svg>`;
    } else {
      iconContainer.innerHTML = `<svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8"/>
            </svg>`;
    }
    iconContainer.style.display = "flex";
    iconContainer.style.alignItems = "center";
    iconContainer.style.color = "var(--text-muted)";
    const textContainer = container.createDiv({ cls: "suggestion-text" });
    const titleEl = textContainer.createDiv({ cls: "suggestion-title" });
    titleEl.setText(result.title);
    titleEl.style.fontWeight = "bold";
    const descEl = textContainer.createDiv({ cls: "suggestion-description" });
    descEl.setText(`#${result.number || ""} by ${((_b = result.author) == null ? void 0 : _b.name) || ((_c = result.author) == null ? void 0 : _c.username) || ((_d = result.author) == null ? void 0 : _d.login) || "Unknown"}`);
    descEl.style.fontSize = "0.8em";
    descEl.style.color = "var(--text-muted)";
  }
};

// src/main.ts
var EmojiChecklistPlugin = class extends import_obsidian7.Plugin {
  async onload() {
    await this.loadSettings();
    console.log("Plugin loaded with settings:", this.settings);
    this.registerEvent(this.app.workspace.on("editor-change", (editor) => {
      const cursor = editor.getCursor();
      const line = editor.getLine(cursor.line);
      const beforeCursor = line.slice(0, cursor.ch);
      const triggerWord = this.settings.jiraSettings.triggerWord;
      console.log("Checking for trigger:", {
        triggerWord,
        beforeCursor,
        endsWith: beforeCursor.endsWith(triggerWord),
        enabled: this.settings.jiraSettings.enabled
      });
      if (beforeCursor.endsWith(triggerWord)) {
        console.log("Trigger word detected, handling Jira trigger");
        this.handleJiraTrigger(editor);
      }
    }));
    this.addCommand({
      id: "insert-jira-issue",
      name: "Insert Jira Issue",
      checkCallback: (checking) => {
        const view = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
        if (!view)
          return false;
        if (!checking) {
          this.insertJiraIssue(view);
        }
        return true;
      }
    });
    this.registerMarkdownPostProcessor(processCheckboxes.bind(this));
    this.addSettingTab(new EmojiChecklistSettingTab(this.app, this));
    this.registerEvent(this.app.workspace.on("editor-menu", (menu, editor) => {
      if (editor.getSelection()) {
        menu.addItem((item) => {
          item.setTitle("Copy as Formatted Report").setIcon("clipboard-copy").onClick(() => this.formatAndCopyToClipboard(editor));
        });
      }
    }));
    this.addCommand({
      id: "view-github-prs",
      name: "View GitHub Pull Requests",
      checkCallback: (checking) => {
        if (!this.settings.gitSettings.githubToken)
          return false;
        if (!checking) {
          this.viewGitHubPRs();
        }
        return true;
      }
    });
    this.addCommand({
      id: "view-gitlab-mrs",
      name: "View GitLab Merge Requests",
      checkCallback: (checking) => {
        if (!this.settings.gitSettings.gitlabToken || !this.settings.gitSettings.gitlabUrl)
          return false;
        if (!checking) {
          this.viewGitLabMRs();
        }
        return true;
      }
    });
    this.registerEvent(this.app.workspace.on("editor-menu", (menu, editor) => {
      menu.addItem((item) => {
        item.setTitle("Git Integration").setIcon("git-pull-request").onClick(() => {
          const gitMenu = new import_obsidian7.Modal(this.app);
          if (this.settings.gitSettings.githubToken) {
            gitMenu.contentEl.createEl("button", {
              text: "View GitHub Pull Requests",
              cls: "git-result-item",
              attr: { "data-url": "github" }
            }).addEventListener("click", () => {
              this.viewGitHubPRs();
            });
          }
          if (this.settings.gitSettings.gitlabToken && this.settings.gitSettings.gitlabUrl) {
            gitMenu.contentEl.createEl("button", {
              text: "View GitLab Merge Requests",
              cls: "git-result-item",
              attr: { "data-url": "gitlab" }
            }).addEventListener("click", () => {
              this.viewGitLabMRs();
            });
          }
          gitMenu.open();
        });
      });
    }));
  }
  formatAndCopyToClipboard(editor) {
    const selectedText = editor.getSelection();
    if (!selectedText) {
      new import_obsidian7.Notice("No text selected");
      return;
    }
    if (!this.settings.reportSettings.enabled) {
      new import_obsidian7.Notice("Report feature is disabled in settings");
      return;
    }
    const getEmoji = (line, isChecked) => {
      for (const mapping of this.settings.tagMappings) {
        if (line.toLowerCase().includes(`#${mapping.tag.toLowerCase()}`)) {
          return isChecked ? mapping.checkedEmoji : mapping.uncheckedEmoji;
        }
      }
      return isChecked ? this.settings.checkedEmoji : this.settings.uncheckedEmoji;
    };
    const lines = selectedText.split("\n");
    const processLine = (line) => {
      line = line.trim();
      if (line.startsWith("- [x]")) {
        return line.replace("- [x]", getEmoji(line, true));
      } else if (line.startsWith("- [ ]")) {
        return line.replace("- [ ]", getEmoji(line, false));
      }
      return line;
    };
    const tasks = lines.filter((line) => line.trim().length > 0).map(processLine);
    const stoppers = lines.filter((line) => line.toLowerCase().includes("#stopper")).map(processLine);
    const today = new Date().toLocaleDateString("en-US", {
      weekday: "long",
      year: "numeric",
      month: "long",
      day: "numeric"
    });
    const contentParts = [];
    for (const section of this.settings.reportSettings.sections) {
      if (!section.enabled)
        continue;
      if (this.settings.reportSettings.showHeaders && section.showHeader) {
        contentParts.push(`### ${section.name}`);
      }
      let sectionContent = section.content;
      switch (section.name) {
        case "DATE":
          sectionContent = `\u{1F4C5} ${today}`;
          break;
        case "BODY":
          sectionContent = tasks.filter((task) => !task.toLowerCase().includes("#stopper")).join("\n");
          break;
        case "STOPPERS":
          sectionContent = stoppers.join("\n");
          break;
      }
      if (sectionContent) {
        contentParts.push(sectionContent);
        contentParts.push("");
      }
    }
    const formattedContent = contentParts.join("\n");
    navigator.clipboard.writeText(formattedContent).then(() => {
      new import_obsidian7.Notice("Formatted content copied to clipboard");
    }).catch(() => {
      new import_obsidian7.Notice("Failed to copy to clipboard");
    });
  }
  async insertJiraIssue(view) {
    if (!this.settings.jiraSettings.enabled) {
      new import_obsidian7.Notice("Please enable and configure Jira integration in settings first");
      return;
    }
    try {
      const jiraClient = new JiraClient(this.settings.jiraSettings);
      const tasks = await jiraClient.searchTasks("my tasks");
      if (tasks.length === 0) {
        new import_obsidian7.Notice("No Jira tasks found assigned to you");
        return;
      }
      new JiraTaskSuggester(this.app, tasks, (selectedTask) => {
        const cursor = view.editor.getCursor();
        const taskMarkdown = `- [ ] [${selectedTask.key}: ${selectedTask.summary}](${selectedTask.url}) (${selectedTask.status})`;
        view.editor.replaceRange(taskMarkdown + "\n", cursor, cursor);
        view.editor.setCursor({
          line: cursor.line + 1,
          ch: 0
        });
      });
    } catch (error) {
      console.error("Error fetching Jira tasks:", error);
      new import_obsidian7.Notice(error.message || "Error fetching Jira tasks");
    }
  }
  async handleJiraTrigger(_editor) {
    console.log("handleJiraTrigger called");
    if (!this.settings.jiraSettings.enabled) {
      console.log("Jira integration not enabled");
      new import_obsidian7.Notice("Please enable and configure Jira integration in settings first");
      return;
    }
    try {
      console.log("Creating Jira client with settings:", this.settings.jiraSettings);
      const jiraClient = new JiraClient(this.settings.jiraSettings);
      console.log("Fetching tasks...");
      const tasks = await jiraClient.searchTasks("my tasks");
      console.log("Fetched tasks:", tasks);
      if (tasks.length === 0) {
        console.log("No tasks found");
        new import_obsidian7.Notice("No Jira tasks found assigned to you");
        return;
      }
      console.log("Opening task suggester with", tasks.length, "tasks");
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
      if (!activeView) {
        console.error("No active markdown view");
        new import_obsidian7.Notice("Please open a markdown note first");
        return;
      }
      try {
        const suggester = new JiraTaskSuggester(this.app, tasks, (selectedTask) => {
          console.log("Task selected:", selectedTask);
          const editor = activeView.editor;
          const cursor = editor.getCursor();
          const triggerWord = this.settings.jiraSettings.triggerWord;
          const currentLine = editor.getLine(cursor.line);
          const newLine = currentLine.slice(0, cursor.ch - triggerWord.length) + `[${selectedTask.key}: ${selectedTask.summary}](${selectedTask.url}) (${selectedTask.status})` + currentLine.slice(cursor.ch);
          editor.setLine(cursor.line, newLine);
          editor.setCursor({
            line: cursor.line,
            ch: cursor.ch - triggerWord.length + `[${selectedTask.key}: ${selectedTask.summary}](${selectedTask.url}) (${selectedTask.status})`.length
          });
        });
        console.log("Suggester created:", suggester);
      } catch (suggesterError) {
        console.error("Error creating suggester:", suggesterError);
        new import_obsidian7.Notice("Failed to create task suggester");
      }
    } catch (error) {
      console.error("Error in handleJiraTrigger:", error);
      new import_obsidian7.Notice(error.message || "Error fetching Jira tasks");
    }
  }
  async viewGitHubPRs() {
    try {
      const gitIntegration = new GitIntegration(this.settings.gitSettings);
      const prs = await gitIntegration.getAllGitHubPRs();
      if (!prs || prs.length === 0) {
        new import_obsidian7.Notice("No open pull requests found");
        return;
      }
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
      if (!activeView) {
        new import_obsidian7.Notice("No active markdown view");
        return;
      }
      new GitMergeRequestSuggester(this.app, document.createElement("input"), gitIntegration, prs, (selectedPR) => {
        const editor = activeView.editor;
        const linkText = `[${selectedPR.title}](${selectedPR.html_url || selectedPR.web_url})`;
        editor.replaceSelection(linkText);
        new import_obsidian7.Notice("Pull request link inserted");
      });
    } catch (error) {
      new import_obsidian7.Notice("Error fetching GitHub PRs: " + error.message);
      console.error("Error fetching GitHub PRs:", error);
    }
  }
  async viewGitLabMRs() {
    try {
      const gitIntegration = new GitIntegration(this.settings.gitSettings);
      const mrs = await gitIntegration.getAllGitLabMRs();
      if (!mrs || mrs.length === 0) {
        new import_obsidian7.Notice("No open merge requests found");
        return;
      }
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
      if (!activeView) {
        new import_obsidian7.Notice("No active markdown view");
        return;
      }
      new GitMergeRequestSuggester(this.app, document.createElement("input"), gitIntegration, mrs, (selectedMR) => {
        const editor = activeView.editor;
        const linkText = `[${selectedMR.title}](${selectedMR.html_url || selectedMR.web_url})`;
        editor.replaceSelection(linkText);
        new import_obsidian7.Notice("Merge request link inserted");
      });
    } catch (error) {
      new import_obsidian7.Notice("Error fetching GitLab MRs: " + error.message);
      console.error("Error fetching GitLab MRs:", error);
    }
  }
  async promptForRepository(type = "github") {
    return new Promise((resolve) => {
      const gitIntegration = new GitIntegration(this.settings.gitSettings);
      const inputEl = document.createElement("input");
      inputEl.type = "text";
      inputEl.placeholder = type === "github" ? "Search GitHub pull requests..." : "Search GitLab merge requests...";
      new GitMergeRequestSuggester(this.app, inputEl, gitIntegration, void 0, (selectedPR) => {
        const repoUrl = selectedPR.web_url || selectedPR.html_url || "";
        try {
          const urlObj = new URL(repoUrl);
          const pathParts = urlObj.pathname.split("/");
          resolve(`${pathParts[1]}/${pathParts[2]}`);
        } catch (error) {
          console.error("Error extracting repo path:", error);
          resolve(null);
        }
      });
    });
  }
  async loadSettings() {
    const loadedData = await this.loadData();
    console.log("Loaded data:", loadedData);
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
    console.log("Merged settings:", this.settings);
  }
  async saveSettings() {
    console.log("Saving settings:", this.settings);
    await this.saveData(this.settings);
  }
  refreshAllNotes() {
    this.app.workspace.trigger("markdown-preview-refresh");
    this.app.workspace.iterateAllLeaves((leaf) => {
      var _a;
      if (leaf.view.getViewType() === "markdown") {
        (_a = leaf.view.previewMode) == null ? void 0 : _a.rerender(true);
      }
    });
    new import_obsidian7.Notice("Applied emoji changes to all notes");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvcHJvY2Vzc29yLnRzIiwgInNyYy9qaXJhLnRzIiwgInNyYy9zdWdnZXN0ZXIudHMiLCAic3JjL2dpdC50cyIsICJzcmMvZ2l0U3VnZ2VzdGVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge0VkaXRvciwgTWFya2Rvd25QcmV2aWV3VmlldywgTWFya2Rvd25WaWV3LCBOb3RpY2UsIFBsdWdpbiwgTW9kYWwsIE1lbnUsIFN1Z2dlc3RNb2RhbCwgQXBwfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSB7RW1vamlDaGVja2xpc3RTZXR0aW5nc30gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQge0RFRkFVTFRfU0VUVElOR1N9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtFbW9qaUNoZWNrbGlzdFNldHRpbmdUYWJ9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHtwcm9jZXNzQ2hlY2tib3hlc30gZnJvbSAnLi9wcm9jZXNzb3InO1xuaW1wb3J0IHtKaXJhQ2xpZW50fSBmcm9tICcuL2ppcmEnO1xuaW1wb3J0IHtKaXJhVGFza1N1Z2dlc3Rlcn0gZnJvbSAnLi9zdWdnZXN0ZXInO1xuaW1wb3J0IHtHaXRJbnRlZ3JhdGlvbn0gZnJvbSAnLi9naXQnO1xuaW1wb3J0IHtHaXRNZXJnZVJlcXVlc3RTdWdnZXN0ZXIsIEdpdE1lcmdlUmVxdWVzdH0gZnJvbSAnLi9naXRTdWdnZXN0ZXInO1xuXG4vLyBBdWdtZW50IHRoZSBNYXJrZG93blZpZXcgdHlwZSBmcm9tIE9ic2lkaWFuXG5kZWNsYXJlIG1vZHVsZSAnb2JzaWRpYW4nIHtcbiAgICBpbnRlcmZhY2UgTWFya2Rvd25WaWV3IHtcbiAgICAgICAgcHJldmlld01vZGU6IE1hcmtkb3duUHJldmlld1ZpZXc7XG4gICAgICAgIGVkaXRvcjogRWRpdG9yO1xuICAgIH1cbn0gICBcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW1vamlDaGVja2xpc3RQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBFbW9qaUNoZWNrbGlzdFNldHRpbmdzO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgICAgICBjb25zb2xlLmxvZygnUGx1Z2luIGxvYWRlZCB3aXRoIHNldHRpbmdzOicsIHRoaXMuc2V0dGluZ3MpO1xuXG4gICAgICAgIC8vIFJlZ2lzdGVyIGVkaXRvciBjaGFuZ2UgaGFuZGxlciBmb3IgQCB0cmlnZ2Vyc1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1jaGFuZ2UnLCAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiZWZvcmVDdXJzb3IgPSBsaW5lLnNsaWNlKDAsIGN1cnNvci5jaCk7XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBqdXN0IHR5cGVkIHRoZSB0cmlnZ2VyIHdvcmRcbiAgICAgICAgICAgICAgICBjb25zdCB0cmlnZ2VyV29yZCA9IHRoaXMuc2V0dGluZ3MuamlyYVNldHRpbmdzLnRyaWdnZXJXb3JkO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyBmb3IgdHJpZ2dlcjonLCB7XG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJXb3JkLFxuICAgICAgICAgICAgICAgICAgICBiZWZvcmVDdXJzb3IsXG4gICAgICAgICAgICAgICAgICAgIGVuZHNXaXRoOiBiZWZvcmVDdXJzb3IuZW5kc1dpdGgodHJpZ2dlcldvcmQpLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0aGlzLnNldHRpbmdzLmppcmFTZXR0aW5ncy5lbmFibGVkXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYmVmb3JlQ3Vyc29yLmVuZHNXaXRoKHRyaWdnZXJXb3JkKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVHJpZ2dlciB3b3JkIGRldGVjdGVkLCBoYW5kbGluZyBKaXJhIHRyaWdnZXInKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVKaXJhVHJpZ2dlcihlZGl0b3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gQWRkIGNvbW1hbmQgdG8gaW5zZXJ0IEppcmEgaXNzdWVcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnaW5zZXJ0LWppcmEtaXNzdWUnLFxuICAgICAgICAgICAgbmFtZTogJ0luc2VydCBKaXJhIElzc3VlJyxcbiAgICAgICAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICAgICAgICAgIGlmICghdmlldykgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRKaXJhSXNzdWUodmlldyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnJlZ2lzdGVyTWFya2Rvd25Qb3N0UHJvY2Vzc29yKHByb2Nlc3NDaGVja2JveGVzLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEVtb2ppQ2hlY2tsaXN0U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgICAgIC8vIFJlZ2lzdGVyIHRoZSBlZGl0b3IgbWVudSBjb21tYW5kXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLW1lbnUnLCAobWVudSwgZWRpdG9yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVkaXRvci5nZXRTZWxlY3Rpb24oKSkge1xuICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoJ0NvcHkgYXMgRm9ybWF0dGVkIFJlcG9ydCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ2NsaXBib2FyZC1jb3B5JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmZvcm1hdEFuZENvcHlUb0NsaXBib2FyZChlZGl0b3IpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBBZGQgR2l0IGludGVncmF0aW9uIGNvbW1hbmRzXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3ZpZXctZ2l0aHViLXBycycsXG4gICAgICAgICAgICBuYW1lOiAnVmlldyBHaXRIdWIgUHVsbCBSZXF1ZXN0cycsXG4gICAgICAgICAgICBjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZ2l0U2V0dGluZ3MuZ2l0aHViVG9rZW4pIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlld0dpdEh1YlBScygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAndmlldy1naXRsYWItbXJzJyxcbiAgICAgICAgICAgIG5hbWU6ICdWaWV3IEdpdExhYiBNZXJnZSBSZXF1ZXN0cycsXG4gICAgICAgICAgICBjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZ2l0U2V0dGluZ3MuZ2l0bGFiVG9rZW4gfHwgIXRoaXMuc2V0dGluZ3MuZ2l0U2V0dGluZ3MuZ2l0bGFiVXJsKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGVja2luZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdHaXRMYWJNUnMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBHaXQgbWVudSB0byB0aGUgZWRpdG9yIGNvbnRleHQgbWVudVxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1tZW51JywgKG1lbnUsIGVkaXRvcikgPT4ge1xuICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoJ0dpdCBJbnRlZ3JhdGlvbicpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbignZ2l0LXB1bGwtcmVxdWVzdCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2l0TWVudSA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZ2l0U2V0dGluZ3MuZ2l0aHViVG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2l0TWVudS5jb250ZW50RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdWaWV3IEdpdEh1YiBQdWxsIFJlcXVlc3RzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsczogJ2dpdC1yZXN1bHQtaXRlbScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyOiB7ICdkYXRhLXVybCc6ICdnaXRodWInIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdHaXRIdWJQUnMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmdpdFNldHRpbmdzLmdpdGxhYlRva2VuICYmIHRoaXMuc2V0dGluZ3MuZ2l0U2V0dGluZ3MuZ2l0bGFiVXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdpdE1lbnUuY29udGVudEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnVmlldyBHaXRMYWIgTWVyZ2UgUmVxdWVzdHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xzOiAnZ2l0LXJlc3VsdC1pdGVtJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHI6IHsgJ2RhdGEtdXJsJzogJ2dpdGxhYicgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlld0dpdExhYk1ScygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2l0TWVudS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmb3JtYXRBbmRDb3B5VG9DbGlwYm9hcmQoZWRpdG9yOiBFZGl0b3IpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRUZXh0ID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICBpZiAoIXNlbGVjdGVkVGV4dCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gdGV4dCBzZWxlY3RlZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLnJlcG9ydFNldHRpbmdzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1JlcG9ydCBmZWF0dXJlIGlzIGRpc2FibGVkIGluIHNldHRpbmdzJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSBhcHByb3ByaWF0ZSBlbW9qaSBiYXNlZCBvbiB0YWcgYW5kIGNoZWNrZWQgc3RhdHVzXG4gICAgICAgIGNvbnN0IGdldEVtb2ppID0gKGxpbmU6IHN0cmluZywgaXNDaGVja2VkOiBib29sZWFuKTogc3RyaW5nID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbWFwcGluZyBvZiB0aGlzLnNldHRpbmdzLnRhZ01hcHBpbmdzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhgIyR7bWFwcGluZy50YWcudG9Mb3dlckNhc2UoKX1gKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNDaGVja2VkID8gbWFwcGluZy5jaGVja2VkRW1vamkgOiBtYXBwaW5nLnVuY2hlY2tlZEVtb2ppO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpc0NoZWNrZWQgPyB0aGlzLnNldHRpbmdzLmNoZWNrZWRFbW9qaSA6IHRoaXMuc2V0dGluZ3MudW5jaGVja2VkRW1vamk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUGFyc2UgdGhlIHNlbGVjdGVkIHRleHQgdG8gZmluZCB0YXNrcyBhbmQgc3RvcHBlcnNcbiAgICAgICAgY29uc3QgbGluZXMgPSBzZWxlY3RlZFRleHQuc3BsaXQoJ1xcbicpO1xuICAgICAgICBjb25zdCBwcm9jZXNzTGluZSA9IChsaW5lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGxpbmUgPSBsaW5lLnRyaW0oKTtcbiAgICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJy0gW3hdJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGluZS5yZXBsYWNlKCctIFt4XScsIGdldEVtb2ppKGxpbmUsIHRydWUpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKCctIFsgXScpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmUucmVwbGFjZSgnLSBbIF0nLCBnZXRFbW9qaShsaW5lLCBmYWxzZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGxpbmU7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgdGFza3MgPSBsaW5lc1xuICAgICAgICAgICAgLmZpbHRlcihsaW5lID0+IGxpbmUudHJpbSgpLmxlbmd0aCA+IDApXG4gICAgICAgICAgICAubWFwKHByb2Nlc3NMaW5lKTtcblxuICAgICAgICBjb25zdCBzdG9wcGVycyA9IGxpbmVzXG4gICAgICAgICAgICAuZmlsdGVyKGxpbmUgPT4gbGluZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCcjc3RvcHBlcicpKVxuICAgICAgICAgICAgLm1hcChwcm9jZXNzTGluZSk7XG5cbiAgICAgICAgLy8gR2V0IHRvZGF5J3MgZGF0ZVxuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHsgXG4gICAgICAgICAgICB3ZWVrZGF5OiAnbG9uZycsXG4gICAgICAgICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICAgICAgICBtb250aDogJ2xvbmcnLFxuICAgICAgICAgICAgZGF5OiAnbnVtZXJpYydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQnVpbGQgdGhlIGNvbnRlbnQgYmFzZWQgb24gZW5hYmxlZCBzZWN0aW9uc1xuICAgICAgICBjb25zdCBjb250ZW50UGFydHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgZm9yIChjb25zdCBzZWN0aW9uIG9mIHRoaXMuc2V0dGluZ3MucmVwb3J0U2V0dGluZ3Muc2VjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghc2VjdGlvbi5lbmFibGVkKSBjb250aW51ZTtcblxuICAgICAgICAgICAgLy8gQWRkIHNlY3Rpb24gaGVhZGVyIGlmIGVuYWJsZWRcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnJlcG9ydFNldHRpbmdzLnNob3dIZWFkZXJzICYmIHNlY3Rpb24uc2hvd0hlYWRlcikge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRQYXJ0cy5wdXNoKGAjIyMgJHtzZWN0aW9uLm5hbWV9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBzZWN0aW9uIGNvbnRlbnRcbiAgICAgICAgICAgIGxldCBzZWN0aW9uQ29udGVudCA9IHNlY3Rpb24uY29udGVudDtcbiAgICAgICAgICAgIHN3aXRjaCAoc2VjdGlvbi5uYW1lKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnREFURSc6XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25Db250ZW50ID0gYFx1RDgzRFx1RENDNSAke3RvZGF5fWA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0JPRFknOlxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uQ29udGVudCA9IHRhc2tzXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHRhc2sgPT4gIXRhc2sudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnI3N0b3BwZXInKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCdcXG4nKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnU1RPUFBFUlMnOlxuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uQ29udGVudCA9IHN0b3BwZXJzLmpvaW4oJ1xcbicpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNlY3Rpb25Db250ZW50KSB7XG4gICAgICAgICAgICAgICAgY29udGVudFBhcnRzLnB1c2goc2VjdGlvbkNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnRQYXJ0cy5wdXNoKCcnKTsgLy8gQWRkIGVtcHR5IGxpbmUgYWZ0ZXIgc2VjdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZm9ybWF0dGVkQ29udGVudCA9IGNvbnRlbnRQYXJ0cy5qb2luKCdcXG4nKTtcblxuICAgICAgICAvLyBDb3B5IHRvIGNsaXBib2FyZFxuICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChmb3JtYXR0ZWRDb250ZW50KVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0Zvcm1hdHRlZCBjb250ZW50IGNvcGllZCB0byBjbGlwYm9hcmQnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBjb3B5IHRvIGNsaXBib2FyZCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBpbnNlcnRKaXJhSXNzdWUodmlldzogTWFya2Rvd25WaWV3KSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5qaXJhU2V0dGluZ3MuZW5hYmxlZCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVuYWJsZSBhbmQgY29uZmlndXJlIEppcmEgaW50ZWdyYXRpb24gaW4gc2V0dGluZ3MgZmlyc3QnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBqaXJhQ2xpZW50ID0gbmV3IEppcmFDbGllbnQodGhpcy5zZXR0aW5ncy5qaXJhU2V0dGluZ3MpO1xuICAgICAgICAgICAgY29uc3QgdGFza3MgPSBhd2FpdCBqaXJhQ2xpZW50LnNlYXJjaFRhc2tzKCdteSB0YXNrcycpO1xuXG4gICAgICAgICAgICBpZiAodGFza3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gSmlyYSB0YXNrcyBmb3VuZCBhc3NpZ25lZCB0byB5b3UnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5ldyBKaXJhVGFza1N1Z2dlc3Rlcih0aGlzLmFwcCwgdGFza3MsIChzZWxlY3RlZFRhc2spID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJzb3IgPSB2aWV3LmVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrTWFya2Rvd24gPSBgLSBbIF0gWyR7c2VsZWN0ZWRUYXNrLmtleX06ICR7c2VsZWN0ZWRUYXNrLnN1bW1hcnl9XSgke3NlbGVjdGVkVGFzay51cmx9KSAoJHtzZWxlY3RlZFRhc2suc3RhdHVzfSlgO1xuXG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IGF0IGN1cnNvciBwb3NpdGlvblxuICAgICAgICAgICAgICAgIHZpZXcuZWRpdG9yLnJlcGxhY2VSYW5nZShcbiAgICAgICAgICAgICAgICAgICAgdGFza01hcmtkb3duICsgJ1xcbicsXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcixcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIC8vIE1vdmUgY3Vyc29yIHRvIG5leHQgbGluZVxuICAgICAgICAgICAgICAgIHZpZXcuZWRpdG9yLnNldEN1cnNvcih7XG4gICAgICAgICAgICAgICAgICAgIGxpbmU6IGN1cnNvci5saW5lICsgMSxcbiAgICAgICAgICAgICAgICAgICAgY2g6IDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgSmlyYSB0YXNrczonLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGVycm9yLm1lc3NhZ2UgfHwgJ0Vycm9yIGZldGNoaW5nIEppcmEgdGFza3MnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlSmlyYVRyaWdnZXIoX2VkaXRvcjogRWRpdG9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdoYW5kbGVKaXJhVHJpZ2dlciBjYWxsZWQnKTtcblxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuamlyYVNldHRpbmdzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdKaXJhIGludGVncmF0aW9uIG5vdCBlbmFibGVkJyk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2UgZW5hYmxlIGFuZCBjb25maWd1cmUgSmlyYSBpbnRlZ3JhdGlvbiBpbiBzZXR0aW5ncyBmaXJzdCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDcmVhdGluZyBKaXJhIGNsaWVudCB3aXRoIHNldHRpbmdzOicsIHRoaXMuc2V0dGluZ3MuamlyYVNldHRpbmdzKTtcbiAgICAgICAgICAgIGNvbnN0IGppcmFDbGllbnQgPSBuZXcgSmlyYUNsaWVudCh0aGlzLnNldHRpbmdzLmppcmFTZXR0aW5ncyk7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyB0YXNrcy4uLicpO1xuICAgICAgICAgICAgY29uc3QgdGFza3MgPSBhd2FpdCBqaXJhQ2xpZW50LnNlYXJjaFRhc2tzKCdteSB0YXNrcycpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZldGNoZWQgdGFza3M6JywgdGFza3MpO1xuXG4gICAgICAgICAgICBpZiAodGFza3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHRhc2tzIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gSmlyYSB0YXNrcyBmb3VuZCBhc3NpZ25lZCB0byB5b3UnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdPcGVuaW5nIHRhc2sgc3VnZ2VzdGVyIHdpdGgnLCB0YXNrcy5sZW5ndGgsICd0YXNrcycpO1xuXG4gICAgICAgICAgICAvLyBFbnN1cmUgd2UncmUgaW4gdGhlIGNvcnJlY3QgY29udGV4dFxuICAgICAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgICAgICBpZiAoIWFjdGl2ZVZpZXcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdObyBhY3RpdmUgbWFya2Rvd24gdmlldycpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBvcGVuIGEgbWFya2Rvd24gbm90ZSBmaXJzdCcpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ3JlYXRlIHN1Z2dlc3RlciB3aXRoIG1vcmUgcm9idXN0IGVycm9yIGhhbmRsaW5nXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1Z2dlc3RlciA9IG5ldyBKaXJhVGFza1N1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgICAgIHRhc2tzLFxuICAgICAgICAgICAgICAgICAgICAoc2VsZWN0ZWRUYXNrKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVGFzayBzZWxlY3RlZDonLCBzZWxlY3RlZFRhc2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmlnZ2VyV29yZCA9IHRoaXMuc2V0dGluZ3MuamlyYVNldHRpbmdzLnRyaWdnZXJXb3JkO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudExpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgdHJpZ2dlciB3b3JkIGFuZCByZXBsYWNlIHdpdGggdGhlIHRhc2tcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0xpbmUgPSBjdXJyZW50TGluZS5zbGljZSgwLCBjdXJzb3IuY2ggLSB0cmlnZ2VyV29yZC5sZW5ndGgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFske3NlbGVjdGVkVGFzay5rZXl9OiAke3NlbGVjdGVkVGFzay5zdW1tYXJ5fV0oJHtzZWxlY3RlZFRhc2sudXJsfSkgKCR7c2VsZWN0ZWRUYXNrLnN0YXR1c30pYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRMaW5lLnNsaWNlKGN1cnNvci5jaCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIGN1cnJlbnQgbGluZVxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldExpbmUoY3Vyc29yLmxpbmUsIG5ld0xpbmUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlIGN1cnNvciB0byBlbmQgb2YgaW5zZXJ0ZWQgdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZTogY3Vyc29yLmxpbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2g6IGN1cnNvci5jaCAtIHRyaWdnZXJXb3JkLmxlbmd0aCArIGBbJHtzZWxlY3RlZFRhc2sua2V5fTogJHtzZWxlY3RlZFRhc2suc3VtbWFyeX1dKCR7c2VsZWN0ZWRUYXNrLnVybH0pICgke3NlbGVjdGVkVGFzay5zdGF0dXN9KWAubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAvLyBBZGRpdGlvbmFsIGxvZ2dpbmcgdG8gdmVyaWZ5IHN1Z2dlc3RlciBjcmVhdGlvblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdWdnZXN0ZXIgY3JlYXRlZDonLCBzdWdnZXN0ZXIpO1xuICAgICAgICAgICAgfSBjYXRjaCAoc3VnZ2VzdGVyRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBzdWdnZXN0ZXI6Jywgc3VnZ2VzdGVyRXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBjcmVhdGUgdGFzayBzdWdnZXN0ZXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGhhbmRsZUppcmFUcmlnZ2VyOicsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoZXJyb3IubWVzc2FnZSB8fCAnRXJyb3IgZmV0Y2hpbmcgSmlyYSB0YXNrcycpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyB2aWV3R2l0SHViUFJzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZ2l0SW50ZWdyYXRpb24gPSBuZXcgR2l0SW50ZWdyYXRpb24odGhpcy5zZXR0aW5ncy5naXRTZXR0aW5ncyk7XG4gICAgICAgICAgICBjb25zdCBwcnMgPSBhd2FpdCBnaXRJbnRlZ3JhdGlvbi5nZXRBbGxHaXRIdWJQUnMoKTtcbiAgICAgICAgICAgIGlmICghcHJzIHx8IHBycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBvcGVuIHB1bGwgcmVxdWVzdHMgZm91bmQnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICAgICAgaWYgKCFhY3RpdmVWaWV3KSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIG1hcmtkb3duIHZpZXcnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5ldyBHaXRNZXJnZVJlcXVlc3RTdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKSxcbiAgICAgICAgICAgICAgICBnaXRJbnRlZ3JhdGlvbixcbiAgICAgICAgICAgICAgICBwcnMsXG4gICAgICAgICAgICAgICAgKHNlbGVjdGVkUFIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtUZXh0ID0gYFske3NlbGVjdGVkUFIudGl0bGV9XSgke3NlbGVjdGVkUFIuaHRtbF91cmwgfHwgc2VsZWN0ZWRQUi53ZWJfdXJsfSlgO1xuICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihsaW5rVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1B1bGwgcmVxdWVzdCBsaW5rIGluc2VydGVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yIGZldGNoaW5nIEdpdEh1YiBQUnM6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIEdpdEh1YiBQUnM6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyB2aWV3R2l0TGFiTVJzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZ2l0SW50ZWdyYXRpb24gPSBuZXcgR2l0SW50ZWdyYXRpb24odGhpcy5zZXR0aW5ncy5naXRTZXR0aW5ncyk7XG4gICAgICAgICAgICBjb25zdCBtcnMgPSBhd2FpdCBnaXRJbnRlZ3JhdGlvbi5nZXRBbGxHaXRMYWJNUnMoKTtcbiAgICAgICAgICAgIGlmICghbXJzIHx8IG1ycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBvcGVuIG1lcmdlIHJlcXVlc3RzIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgICAgICAgIGlmICghYWN0aXZlVmlldykge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBtYXJrZG93biB2aWV3Jyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuZXcgR2l0TWVyZ2VSZXF1ZXN0U3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JyksXG4gICAgICAgICAgICAgICAgZ2l0SW50ZWdyYXRpb24sXG4gICAgICAgICAgICAgICAgbXJzLFxuICAgICAgICAgICAgICAgIChzZWxlY3RlZE1SKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rVGV4dCA9IGBbJHtzZWxlY3RlZE1SLnRpdGxlfV0oJHtzZWxlY3RlZE1SLmh0bWxfdXJsIHx8IHNlbGVjdGVkTVIud2ViX3VybH0pYDtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24obGlua1RleHQpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdNZXJnZSByZXF1ZXN0IGxpbmsgaW5zZXJ0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgZmV0Y2hpbmcgR2l0TGFiIE1SczogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgR2l0TGFiIE1SczonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHByb21wdEZvclJlcG9zaXRvcnkodHlwZTogJ2dpdGh1YicgfCAnZ2l0bGFiJyA9ICdnaXRodWInKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZ2l0SW50ZWdyYXRpb24gPSBuZXcgR2l0SW50ZWdyYXRpb24odGhpcy5zZXR0aW5ncy5naXRTZXR0aW5ncyk7XG4gICAgICAgICAgICBjb25zdCBpbnB1dEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgIGlucHV0RWwudHlwZSA9ICd0ZXh0JztcbiAgICAgICAgICAgIGlucHV0RWwucGxhY2Vob2xkZXIgPSB0eXBlID09PSAnZ2l0aHViJyBcbiAgICAgICAgICAgICAgICA/IFwiU2VhcmNoIEdpdEh1YiBwdWxsIHJlcXVlc3RzLi4uXCIgXG4gICAgICAgICAgICAgICAgOiBcIlNlYXJjaCBHaXRMYWIgbWVyZ2UgcmVxdWVzdHMuLi5cIjtcblxuICAgICAgICAgICAgbmV3IEdpdE1lcmdlUmVxdWVzdFN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgICAgICBpbnB1dEVsLFxuICAgICAgICAgICAgICAgIGdpdEludGVncmF0aW9uLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAoc2VsZWN0ZWRQUjogR2l0TWVyZ2VSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcG9VcmwgPSBzZWxlY3RlZFBSLndlYl91cmwgfHwgc2VsZWN0ZWRQUi5odG1sX3VybCB8fCAnJztcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybE9iaiA9IG5ldyBVUkwocmVwb1VybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRoUGFydHMgPSB1cmxPYmoucGF0aG5hbWUuc3BsaXQoJy8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoYCR7cGF0aFBhcnRzWzFdfS8ke3BhdGhQYXJ0c1syXX1gKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGV4dHJhY3RpbmcgcmVwbyBwYXRoOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGxvYWRlZERhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdMb2FkZWQgZGF0YTonLCBsb2FkZWREYXRhKTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGxvYWRlZERhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZygnTWVyZ2VkIHNldHRpbmdzOicsIHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1NhdmluZyBzZXR0aW5nczonLCB0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICB9XG5cbiAgICByZWZyZXNoQWxsTm90ZXMoKSB7XG4gICAgICAgIC8vIEZvcmNlIHJlZnJlc2ggYWxsIG1hcmtkb3duIHZpZXdzXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdtYXJrZG93bi1wcmV2aWV3LXJlZnJlc2gnKTtcblxuICAgICAgICAvLyBGb3JjZSByZS1yZW5kZXIgb2YgYWxsIGxlYWYgdmlld3NcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMobGVhZiA9PiB7XG4gICAgICAgICAgICBpZiAobGVhZi52aWV3LmdldFZpZXdUeXBlKCkgPT09ICdtYXJrZG93bicpIHtcbiAgICAgICAgICAgICAgICAobGVhZi52aWV3IGFzIE1hcmtkb3duVmlldykucHJldmlld01vZGU/LnJlcmVuZGVyKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBuZXcgTm90aWNlKCdBcHBsaWVkIGVtb2ppIGNoYW5nZXMgdG8gYWxsIG5vdGVzJyk7XG4gICAgfVxufVxuIiwgImV4cG9ydCBpbnRlcmZhY2UgVGFnRW1vamlNYXBwaW5nIHtcbiAgICB0YWc6IHN0cmluZztcbiAgICB1bmNoZWNrZWRFbW9qaTogc3RyaW5nO1xuICAgIGNoZWNrZWRFbW9qaTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEppcmFTZXR0aW5ncyB7XG4gICAgZW5hYmxlZDogYm9vbGVhbjtcbiAgICBiYXNlVXJsOiBzdHJpbmc7XG4gICAgdXNlcm5hbWU6IHN0cmluZztcbiAgICBhcGlUb2tlbjogc3RyaW5nO1xuICAgIHRyaWdnZXJXb3JkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVwb3J0U2VjdGlvbiB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICBlbmFibGVkOiBib29sZWFuO1xuICAgIHNob3dIZWFkZXI6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVwb3J0U2V0dGluZ3Mge1xuICAgIGVuYWJsZWQ6IGJvb2xlYW47XG4gICAgc2VjdGlvbnM6IFJlcG9ydFNlY3Rpb25bXTtcbiAgICBzaG93SGVhZGVyczogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHaXRTZXR0aW5ncyB7XG4gICAgZ2l0aHViVG9rZW46IHN0cmluZztcbiAgICBnaXRsYWJUb2tlbjogc3RyaW5nO1xuICAgIGdpdGxhYlVybDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVtb2ppQ2hlY2tsaXN0U2V0dGluZ3Mge1xuICAgIGNoZWNrZWRFbW9qaTogc3RyaW5nO1xuICAgIHVuY2hlY2tlZEVtb2ppOiBzdHJpbmc7XG4gICAgdGFnTWFwcGluZ3M6IFRhZ0Vtb2ppTWFwcGluZ1tdO1xuICAgIGppcmFTZXR0aW5nczogSmlyYVNldHRpbmdzO1xuICAgIHJlcG9ydFNldHRpbmdzOiBSZXBvcnRTZXR0aW5ncztcbiAgICBnaXRTZXR0aW5nczogR2l0U2V0dGluZ3M7XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBFbW9qaUNoZWNrbGlzdFNldHRpbmdzID0ge1xuICAgIGNoZWNrZWRFbW9qaTogJ1x1MjcwNScsXG4gICAgdW5jaGVja2VkRW1vamk6ICdcdTJCMUNcdUZFMEYnLFxuICAgIHRhZ01hcHBpbmdzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRhZzogJ3N0b3BwZXInLFxuICAgICAgICAgICAgdW5jaGVja2VkRW1vamk6ICdcdUQ4M0RcdURFRDEnLFxuICAgICAgICAgICAgY2hlY2tlZEVtb2ppOiAnXHUyNzA1J1xuICAgICAgICB9XG4gICAgXSxcbiAgICBqaXJhU2V0dGluZ3M6IHtcbiAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgIGJhc2VVcmw6ICcnLFxuICAgICAgICB1c2VybmFtZTogJycsXG4gICAgICAgIGFwaVRva2VuOiAnJyxcbiAgICAgICAgdHJpZ2dlcldvcmQ6ICdAamlyYSdcbiAgICB9LFxuICAgIHJlcG9ydFNldHRpbmdzOiB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIHNob3dIZWFkZXJzOiB0cnVlLFxuICAgICAgICBzZWN0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdHUkVFVElOR1MnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdHb29kIE1vcm5pbmcgZXZlcnlvbmUnLFxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgc2hvd0hlYWRlcjogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnREFURScsXG4gICAgICAgICAgICAgICAgY29udGVudDogJycsXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaG93SGVhZGVyOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnQk9EWScsXG4gICAgICAgICAgICAgICAgY29udGVudDogJycsXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaG93SGVhZGVyOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdTVE9QUEVSUycsXG4gICAgICAgICAgICAgICAgY29udGVudDogJycsXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaG93SGVhZGVyOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9LFxuICAgIGdpdFNldHRpbmdzOiB7XG4gICAgICAgIGdpdGh1YlRva2VuOiAnJyxcbiAgICAgICAgZ2l0bGFiVG9rZW46ICcnLFxuICAgICAgICBnaXRsYWJVcmw6ICcnXG4gICAgfVxufTsiLCAiaW1wb3J0IHtBcHAsIE5vdGljZSwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZ30gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEVtb2ppQ2hlY2tsaXN0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQge0RFRkFVTFRfU0VUVElOR1N9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgRW1vamlDaGVja2xpc3RTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBFbW9qaUNoZWNrbGlzdFBsdWdpbjtcbiAgICB0ZXN0RWw6IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW1vamlDaGVja2xpc3RQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICB1cGRhdGVUZXN0U2VjdGlvbigpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudGVzdEVsKSB7XG4gICAgICAgICAgICB0aGlzLnRlc3RFbC5lbXB0eSgpO1xuXG4gICAgICAgICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLnRlc3RFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdMaXZlIFByZXZpZXcnIH0pO1xuXG4gICAgICAgICAgICBjb25zdCB1bmNoZWNrZWRFeGFtcGxlID0gdGhpcy50ZXN0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcbiAgICAgICAgICAgIHVuY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdVbmNoZWNrZWQgZXhhbXBsZTogJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IHVuY2hlY2tlZENvbnRhaW5lciA9IHVuY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ3Rhc2stcHJldmlldycgfSk7XG4gICAgICAgICAgICB1bmNoZWNrZWRDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogdGhpcy5wbHVnaW4uc2V0dGluZ3MudW5jaGVja2VkRW1vamksXG4gICAgICAgICAgICAgICAgY2xzOiAnZW1vamktcHJldmlldydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdW5jaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnIFNhbXBsZSB0YXNrJyB9KTtcblxuICAgICAgICAgICAgY29uc3QgY2hlY2tlZEV4YW1wbGUgPSB0aGlzLnRlc3RFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZXR0aW5nLWl0ZW0nIH0pO1xuICAgICAgICAgICAgY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdDaGVja2VkIGV4YW1wbGU6ICcgfSk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2VkQ29udGFpbmVyID0gY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ3Rhc2stcHJldmlldycgfSk7XG4gICAgICAgICAgICBjaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrZWRFbW9qaSxcbiAgICAgICAgICAgICAgICBjbHM6ICdlbW9qaS1wcmV2aWV3J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2VkVGV4dCA9IGNoZWNrZWRDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICcgU2FtcGxlIHRhc2snIH0pO1xuICAgICAgICAgICAgY2hlY2tlZFRleHQuc3R5bGUudGV4dERlY29yYXRpb24gPSAnbGluZS10aHJvdWdoJztcbiAgICAgICAgICAgIGNoZWNrZWRUZXh0LnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblxuICAgICAgICAgICAgLy8gQWRkIHRhZyBleGFtcGxlc1xuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YWdIZWFkZXIgPSB0aGlzLnRlc3RFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdUYWcgRXhhbXBsZXMnIH0pO1xuICAgICAgICAgICAgICAgIHRhZ0hlYWRlci5zdHlsZS5tYXJnaW5Ub3AgPSAnMmVtJztcbiAgICAgICAgICAgICAgICB0YWdIZWFkZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1hcHBpbmcgb2YgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnVW5jaGVja2VkRXhhbXBsZSA9IHRoaXMudGVzdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbScgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhZ1VuY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGAjJHttYXBwaW5nLnRhZ30gdW5jaGVja2VkOiBgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWdVbmNoZWNrZWRDb250YWluZXIgPSB0YWdVbmNoZWNrZWRFeGFtcGxlLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICd0YXNrLXByZXZpZXcnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0YWdVbmNoZWNrZWRDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBtYXBwaW5nLnVuY2hlY2tlZEVtb2ppLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xzOiAnZW1vamktcHJldmlldydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhZ1VuY2hlY2tlZENvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYCBTYW1wbGUgIyR7bWFwcGluZy50YWd9IHRhc2tgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZ0NoZWNrZWRFeGFtcGxlID0gdGhpcy50ZXN0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGAjJHttYXBwaW5nLnRhZ30gY2hlY2tlZDogYCB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnQ2hlY2tlZENvbnRhaW5lciA9IHRhZ0NoZWNrZWRFeGFtcGxlLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICd0YXNrLXByZXZpZXcnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0YWdDaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbWFwcGluZy5jaGVja2VkRW1vamksXG4gICAgICAgICAgICAgICAgICAgICAgICBjbHM6ICdlbW9qaS1wcmV2aWV3J1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnQ2hlY2tlZFRleHQgPSB0YWdDaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgIFNhbXBsZSAjJHttYXBwaW5nLnRhZ30gdGFza2AgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NoZWNrZWRUZXh0LnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ2xpbmUtdGhyb3VnaCc7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NoZWNrZWRUZXh0LnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblxuICAgICAgICAgICAgICAgICAgICB0YWdVbmNoZWNrZWRFeGFtcGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwLjVlbSc7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NoZWNrZWRFeGFtcGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwLjVlbSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBoZWFkZXIuc3R5bGUubWFyZ2luVG9wID0gJzJlbSc7XG4gICAgICAgICAgICBoZWFkZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XG4gICAgICAgICAgICB1bmNoZWNrZWRFeGFtcGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwLjVlbSc7XG4gICAgICAgICAgICBjaGVja2VkRXhhbXBsZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMC41ZW0nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdFbW9qaSBDaGVja2xpc3QgU2V0dGluZ3MnfSk7XG5cbiAgICAgICAgLy8gQWRkIHRlc3Qgc2VjdGlvblxuICAgICAgICB0aGlzLnRlc3RFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuICAgICAgICB0aGlzLnVwZGF0ZVRlc3RTZWN0aW9uKCk7XG5cbiAgICAgICAgLy8gQmFzaWMgU2V0dGluZ3NcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywge3RleHQ6ICdCYXNpYyBTZXR0aW5ncyd9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdEZWZhdWx0IFVuY2hlY2tlZCBFbW9qaScpXG4gICAgICAgICAgICAuc2V0RGVzYygnRW1vamkgdG8gdXNlIGZvciB1bmNoZWNrZWQgdGFza3MnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdcdTJCMUNcdUZFMEYnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51bmNoZWNrZWRFbW9qaSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnVuY2hlY2tlZEVtb2ppID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGVzdFNlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGVmYXVsdCBDaGVja2VkIEVtb2ppJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdFbW9qaSB0byB1c2UgZm9yIGNoZWNrZWQgdGFza3MnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdcdTI3MDUnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja2VkRW1vamkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja2VkRW1vamkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUZXN0U2VjdGlvbigpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBUYWcgTWFwcGluZ3NcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywge3RleHQ6ICdUYWcgTWFwcGluZ3MnfSk7XG4gICAgICAgIGNvbnN0IHRhZ01hcHBpbmdzQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCd0YWctbWFwcGluZ3MnKTtcblxuICAgICAgICAvLyBBZGQgZXhpc3RpbmcgdGFnIG1hcHBpbmdzXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzLmZvckVhY2goKG1hcHBpbmcsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtYXBwaW5nQ29udGFpbmVyID0gdGFnTWFwcGluZ3NDb250YWluZXIuY3JlYXRlRGl2KCd0YWctbWFwcGluZycpO1xuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhtYXBwaW5nQ29udGFpbmVyKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKGBUYWcgIyR7bWFwcGluZy50YWd9YClcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCd0YWcgbmFtZScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShtYXBwaW5nLnRhZylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3NbaW5kZXhdLnRhZyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUZXN0U2VjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCd1bmNoZWNrZWQgZW1vamknKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobWFwcGluZy51bmNoZWNrZWRFbW9qaSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3NbaW5kZXhdLnVuY2hlY2tlZEVtb2ppID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRlc3RTZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2NoZWNrZWQgZW1vamknKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobWFwcGluZy5jaGVja2VkRW1vamkpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzW2luZGV4XS5jaGVja2VkRW1vamkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGVzdFNlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCd0cmFzaCcpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgTmV3IFRhZyBNYXBwaW5nIGJ1dHRvblxuICAgICAgICBuZXcgU2V0dGluZyh0YWdNYXBwaW5nc0NvbnRhaW5lcilcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdBZGQgVGFnIE1hcHBpbmcnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5jaGVja2VkRW1vamk6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEVtb2ppOiAnJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIEppcmEgSW50ZWdyYXRpb24gU2V0dGluZ3NcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywge3RleHQ6ICdKaXJhIEludGVncmF0aW9uJ30pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0VuYWJsZSBKaXJhIEludGVncmF0aW9uJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdFbmFibGUvZGlzYWJsZSBKaXJhIGludGVncmF0aW9uJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5qaXJhU2V0dGluZ3MuZW5hYmxlZClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmppcmFTZXR0aW5ncy5lbmFibGVkID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1RyaWdnZXIgV29yZCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnV29yZCB0aGF0IHRyaWdnZXJzIEppcmEgdGFzayBpbnNlcnRpb24gKGUuZy4sIEBqaXJhKScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0BqaXJhJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuamlyYVNldHRpbmdzLnRyaWdnZXJXb3JkKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuamlyYVNldHRpbmdzLnRyaWdnZXJXb3JkID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0ppcmEgQmFzZSBVUkwnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1lvdXIgSmlyYSBpbnN0YW5jZSBVUkwgKGUuZy4sIGh0dHBzOi8veW91ci1kb21haW4uYXRsYXNzaWFuLm5ldCknKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwczovL3lvdXItZG9tYWluLmF0bGFzc2lhbi5uZXQnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5qaXJhU2V0dGluZ3MuYmFzZVVybClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmppcmFTZXR0aW5ncy5iYXNlVXJsID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1VzZXJuYW1lJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdZb3VyIEppcmEgZW1haWwgYWRkcmVzcycpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2VtYWlsQGV4YW1wbGUuY29tJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuamlyYVNldHRpbmdzLnVzZXJuYW1lKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuamlyYVNldHRpbmdzLnVzZXJuYW1lID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0FQSSBUb2tlbicpXG4gICAgICAgICAgICAuc2V0RGVzYygnWW91ciBKaXJhIEFQSSB0b2tlbiAoZnJvbSBodHRwczovL2lkLmF0bGFzc2lhbi5jb20vbWFuYWdlLXByb2ZpbGUvc2VjdXJpdHkvYXBpLXRva2VucyknKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIEFQSSB0b2tlbicpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmppcmFTZXR0aW5ncy5hcGlUb2tlbilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmppcmFTZXR0aW5ncy5hcGlUb2tlbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBHaXQgSW50ZWdyYXRpb24gU2V0dGluZ3NcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywge3RleHQ6ICdHaXQgSW50ZWdyYXRpb24nfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnR2l0SHViIFRva2VuJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdZb3VyIEdpdEh1YiBwZXJzb25hbCBhY2Nlc3MgdG9rZW4nKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdnaHBfLi4uJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2l0U2V0dGluZ3MuZ2l0aHViVG9rZW4pXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5naXRTZXR0aW5ncy5naXRodWJUb2tlbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdHaXRMYWIgVG9rZW4nKVxuICAgICAgICAgICAgLnNldERlc2MoJ1lvdXIgR2l0TGFiIHBlcnNvbmFsIGFjY2VzcyB0b2tlbicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2dscGF0LS4uLicpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdpdFNldHRpbmdzLmdpdGxhYlRva2VuKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2l0U2V0dGluZ3MuZ2l0bGFiVG9rZW4gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnR2l0TGFiIFVSTCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnWW91ciBHaXRMYWIgaW5zdGFuY2UgVVJMIChlLmcuLCBodHRwczovL2dpdGxhYi5jb20pJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignaHR0cHM6Ly9naXRsYWIuY29tJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2l0U2V0dGluZ3MuZ2l0bGFiVXJsKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2l0U2V0dGluZ3MuZ2l0bGFiVXJsID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFJlcG9ydCBTZXR0aW5nc1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ1JlcG9ydCBTZXR0aW5ncyd9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbmFibGUgUmVwb3J0IEZlYXR1cmUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0VuYWJsZS9kaXNhYmxlIHRoZSByZXBvcnQgZm9ybWF0dGluZyBmZWF0dXJlJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBvcnRTZXR0aW5ncy5lbmFibGVkKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwb3J0U2V0dGluZ3MuZW5hYmxlZCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTaG93IFNlY3Rpb24gSGVhZGVycycpXG4gICAgICAgICAgICAuc2V0RGVzYygnU2hvdy9oaWRlIHNlY3Rpb24gaGVhZGVycyBpbiB0aGUgcmVwb3J0JylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBvcnRTZXR0aW5ncy5zaG93SGVhZGVycylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcG9ydFNldHRpbmdzLnNob3dIZWFkZXJzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFNlY3Rpb24gU2V0dGluZ3NcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywge3RleHQ6ICdSZXBvcnQgU2VjdGlvbnMnfSk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBvcnRTZXR0aW5ncy5zZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbiA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcG9ydFNldHRpbmdzLnNlY3Rpb25zW2ldO1xuICAgICAgICAgICAgY29uc3Qgc2VjdGlvbkNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgc2VjdGlvbkNvbnRhaW5lci5hZGRDbGFzcygncmVwb3J0LXNlY3Rpb24tc2V0dGluZ3MnKTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcoc2VjdGlvbkNvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShgU2VjdGlvbjogJHtzZWN0aW9uLm5hbWV9YClcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnQ29uZmlndXJlIHRoaXMgc2VjdGlvbicpXG4gICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZWN0aW9uLmVuYWJsZWQpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb24uZW5hYmxlZCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ1Nob3cgc2VjdGlvbiBoZWFkZXInKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2VjdGlvbi5zaG93SGVhZGVyKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLnNob3dIZWFkZXIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignU2VjdGlvbiBjb250ZW50JylcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHNlY3Rpb24uY29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5jb250ZW50ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBOZXcgU2VjdGlvbiBCdXR0b25cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQWRkIE5ldyBTZWN0aW9uJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdBZGQgYSBuZXcgc2VjdGlvbiB0byB0aGUgcmVwb3J0JylcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdBZGQgU2VjdGlvbicpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBvcnRTZXR0aW5ncy5zZWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdOZXcgU2VjdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93SGVhZGVyOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQXBwbHkgQWxsIFNldHRpbmdzIGJ1dHRvblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7dGV4dDogJ1NhdmUgQ2hhbmdlcyd9KTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0FwcGx5IEFsbCBTZXR0aW5ncycpXG4gICAgICAgICAgICAuc2V0RGVzYygnU2F2ZSBhbGwgY2hhbmdlcyBtYWRlIHRvIHRoZSBzZXR0aW5ncycpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnQXBwbHknKVxuICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0FsbCBzZXR0aW5ncyBoYXZlIGJlZW4gc2F2ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVmcmVzaEFsbE5vdGVzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgdHlwZSB7TWFya2Rvd25Qb3N0UHJvY2Vzc29yLCBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0fSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQge01hcmtkb3duUmVuZGVyQ2hpbGQsIE1hcmtkb3duVmlld30gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgRW1vamlDaGVja2xpc3RQbHVnaW4gZnJvbSAnLi9tYWluJztcblxuaW50ZXJmYWNlIEVkaXRvckNoYW5nZSB7XG4gICAgZnJvbTogeyBsaW5lOiBudW1iZXI7IGNoOiBudW1iZXIgfTtcbiAgICB0bzogeyBsaW5lOiBudW1iZXI7IGNoOiBudW1iZXIgfTtcbiAgICB0ZXh0OiBzdHJpbmc7XG59XG5cbmNsYXNzIEVtb2ppUmVuZGVyQ2hpbGQgZXh0ZW5kcyBNYXJrZG93blJlbmRlckNoaWxkIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHNwYW46IEhUTUxTcGFuRWxlbWVudCkge1xuICAgICAgICBzdXBlcihzcGFuKTtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpOiB2b2lkIHtcbiAgICAgICAgLy8gQ2xlYW51cCBoYW5kbGVkIGJ5IHBhcmVudFxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIENoZWNrYm94UHJvY2Vzc29yIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5kVGFnSW5MaW5lKGxpc3RJdGVtOiBIVE1MRWxlbWVudCk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICBjb25zdCB0ZXh0ID0gbGlzdEl0ZW0udGV4dENvbnRlbnQgfHwgJyc7XG4gICAgICAgIGNvbnN0IHRhZ01hdGNoID0gdGV4dC5yZXBsYWNlKC9eW15cXHdcXHMjXSpcXHMqLywgJycpLm1hdGNoKC8jKFxcdyspLyk7XG4gICAgICAgIHJldHVybiB0YWdNYXRjaCA/IHRhZ01hdGNoWzFdIDogbnVsbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBnZXRFbW9qaXNGb3JUYWcoXG4gICAgICAgIHBsdWdpbjogRW1vamlDaGVja2xpc3RQbHVnaW4sXG4gICAgICAgIHRhZzogc3RyaW5nIHwgbnVsbCxcbiAgICAgICAgaXNDaGVja2VkOiBib29sZWFuXG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKCF0YWcpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0NoZWNrZWQgPyBwbHVnaW4uc2V0dGluZ3MuY2hlY2tlZEVtb2ppIDogcGx1Z2luLnNldHRpbmdzLnVuY2hlY2tlZEVtb2ppO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWFwcGluZyA9IHBsdWdpbi5zZXR0aW5ncy50YWdNYXBwaW5ncy5maW5kKChtKSA9PiBtLnRhZyA9PT0gdGFnKTtcbiAgICAgICAgaWYgKCFtYXBwaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNDaGVja2VkID8gcGx1Z2luLnNldHRpbmdzLmNoZWNrZWRFbW9qaSA6IHBsdWdpbi5zZXR0aW5ncy51bmNoZWNrZWRFbW9qaTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpc0NoZWNrZWQgPyBtYXBwaW5nLmNoZWNrZWRFbW9qaSA6IG1hcHBpbmcudW5jaGVja2VkRW1vamk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgdXBkYXRlRWRpdG9yQ29udGVudChcbiAgICAgICAgZWRpdG9yOiBhbnksXG4gICAgICAgIGxpbmVJbmRleDogbnVtYmVyLFxuICAgICAgICBuZXdFbW9qaTogc3RyaW5nXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxpbmVUZXh0ID0gZWRpdG9yLmdldExpbmUobGluZUluZGV4KTtcbiAgICAgICAgY29uc3QgbmV3VGV4dCA9IGxpbmVUZXh0LnJlcGxhY2UoL15bXlxcd1xccyNdKlxccyovLCBgJHtuZXdFbW9qaX0gYCk7XG5cbiAgICAgICAgY29uc3QgY2hhbmdlOiBFZGl0b3JDaGFuZ2UgPSB7XG4gICAgICAgICAgICBmcm9tOiB7IGxpbmU6IGxpbmVJbmRleCwgY2g6IDAgfSxcbiAgICAgICAgICAgIHRvOiB7IGxpbmU6IGxpbmVJbmRleCwgY2g6IGxpbmVUZXh0Lmxlbmd0aCB9LFxuICAgICAgICAgICAgdGV4dDogbmV3VGV4dFxuICAgICAgICB9O1xuXG4gICAgICAgIGVkaXRvci50cmFuc2FjdGlvbih7IGNoYW5nZXM6IFtjaGFuZ2VdIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNyZWF0ZUVtb2ppU3BhbihlbW9qaTogc3RyaW5nKTogSFRNTFNwYW5FbGVtZW50IHtcbiAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSAndGFzay1saXN0LWVtb2ppJztcbiAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IGVtb2ppO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBzdHlsZUNvbnRhaW5lcihjb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCk6IHZvaWQge1xuICAgICAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAndG9wJztcbiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5tYXJnaW5SaWdodCA9ICcwLjVlbSc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBzZXR1cEV2ZW50TGlzdGVuZXJzKFxuICAgICAgICBwbHVnaW46IEVtb2ppQ2hlY2tsaXN0UGx1Z2luLFxuICAgICAgICBjaGVja2JveDogSFRNTElucHV0RWxlbWVudCxcbiAgICAgICAgc3BhbjogSFRNTFNwYW5FbGVtZW50LFxuICAgICAgICB0YWc6IHN0cmluZyB8IG51bGwsXG4gICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICAgIGVkaXRvcjogYW55LFxuICAgICAgICBzZWN0aW9uSW5mbzogYW55LFxuICAgICAgICBjdHg6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHRcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdXBkYXRlRW1vamkgPSAoaXNDaGVja2VkOiBib29sZWFuKTogdm9pZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdFbW9qaSA9IHRoaXMuZ2V0RW1vamlzRm9yVGFnKHBsdWdpbiwgdGFnLCBpc0NoZWNrZWQpO1xuICAgICAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IG5ld0Vtb2ppO1xuXG4gICAgICAgICAgICBpZiAoZWRpdG9yICYmIHNlY3Rpb25JbmZvKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVFZGl0b3JDb250ZW50KGVkaXRvciwgc2VjdGlvbkluZm8ubGluZVN0YXJ0ICsgaW5kZXgsIG5ld0Vtb2ppKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB0b2dnbGVDaGVja2JveCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSAhY2hlY2tib3guY2hlY2tlZDtcbiAgICAgICAgICAgIHVwZGF0ZUVtb2ppKGNoZWNrYm94LmNoZWNrZWQpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGRpc3BhdGNoIGJvdGggY2hhbmdlIGFuZCBjbGljayBldmVudHNcbiAgICAgICAgICAgIGNoZWNrYm94LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdjaGFuZ2UnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xuICAgICAgICAgICAgY2hlY2tib3guZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2NsaWNrJywgeyBidWJibGVzOiB0cnVlIH0pKTtcblxuICAgICAgICAgICAgaWYgKGN0eC5zb3VyY2VQYXRoKSB7XG4gICAgICAgICAgICAgICAgY3R4LmFkZENoaWxkKG5ldyBFbW9qaVJlbmRlckNoaWxkKHNwYW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBhd2FpdCB0b2dnbGVDaGVja2JveCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICB1cGRhdGVFbW9qaShjaGVja2JveC5jaGVja2VkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBwcm9jZXNzQ2hlY2tib3goXG4gICAgICAgIHBsdWdpbjogRW1vamlDaGVja2xpc3RQbHVnaW4sXG4gICAgICAgIGNoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50LFxuICAgICAgICBpbmRleDogbnVtYmVyLFxuICAgICAgICBlZGl0b3I6IGFueSxcbiAgICAgICAgc2VjdGlvbkluZm86IGFueSxcbiAgICAgICAgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0XG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGxpc3RJdGVtID0gY2hlY2tib3guY2xvc2VzdCgnbGkudGFzay1saXN0LWl0ZW0nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgaWYgKCFsaXN0SXRlbSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHRhZyA9IHRoaXMuZmluZFRhZ0luTGluZShsaXN0SXRlbSk7XG4gICAgICAgIGNvbnN0IGVtb2ppID0gdGhpcy5nZXRFbW9qaXNGb3JUYWcocGx1Z2luLCB0YWcsIGNoZWNrYm94LmNoZWNrZWQpO1xuICAgICAgICBjb25zdCBzcGFuID0gdGhpcy5jcmVhdGVFbW9qaVNwYW4oZW1vamkpO1xuXG4gICAgICAgIGlmIChlZGl0b3IgJiYgc2VjdGlvbkluZm8pIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRWRpdG9yQ29udGVudChlZGl0b3IsIHNlY3Rpb25JbmZvLmxpbmVTdGFydCArIGluZGV4LCBlbW9qaSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldHVwRXZlbnRMaXN0ZW5lcnMoXG4gICAgICAgICAgICBwbHVnaW4sXG4gICAgICAgICAgICBjaGVja2JveCxcbiAgICAgICAgICAgIHNwYW4sXG4gICAgICAgICAgICB0YWcsXG4gICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgIHNlY3Rpb25JbmZvLFxuICAgICAgICAgICAgY3R4XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5zdHlsZUNvbnRhaW5lcihjaGVja2JveC5wYXJlbnRFbGVtZW50KTtcbiAgICAgICAgY2hlY2tib3guc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgY2hlY2tib3guYWZ0ZXIoc3Bhbik7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgcHJvY2Vzc0NoZWNrYm94ZXM6IE1hcmtkb3duUG9zdFByb2Nlc3NvciA9IGZ1bmN0aW9uKFxuICAgIHRoaXM6IEVtb2ppQ2hlY2tsaXN0UGx1Z2luLFxuICAgIGVsOiBIVE1MRWxlbWVudCxcbiAgICBjdHg6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHRcbik6IHZvaWQge1xuICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCdsaS50YXNrLWxpc3QtaXRlbSBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICBjb25zdCBlZGl0b3IgPSB2aWV3Py5lZGl0b3I7XG4gICAgY29uc3Qgc2VjdGlvbkluZm8gPSBjdHguZ2V0U2VjdGlvbkluZm8oZWwpO1xuXG4gICAgY2hlY2tib3hlcy5mb3JFYWNoKChjaGVja2JveCwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKCEoY2hlY2tib3ggaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSkgcmV0dXJuO1xuXG4gICAgICAgIENoZWNrYm94UHJvY2Vzc29yLnByb2Nlc3NDaGVja2JveChcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBjaGVja2JveCxcbiAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgc2VjdGlvbkluZm8sXG4gICAgICAgICAgICBjdHhcbiAgICAgICAgKTtcbiAgICB9KTtcbn07XG4iLCAiaW1wb3J0IHsgcmVxdWVzdFVybCwgUmVxdWVzdFVybFBhcmFtIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgeyBKaXJhU2V0dGluZ3MgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBKaXJhVGFzayB7XG4gICAga2V5OiBzdHJpbmc7XG4gICAgc3VtbWFyeTogc3RyaW5nO1xuICAgIHVybDogc3RyaW5nO1xuICAgIHN0YXR1czogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgSmlyYUNsaWVudCB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzZXR0aW5nczogSmlyYVNldHRpbmdzKSB7fVxuXG4gICAgcHJpdmF0ZSBnZXRBdXRoSGVhZGVyKCk6IHN0cmluZyB7XG4gICAgICAgIC8vIEVuc3VyZSB3ZSdyZSB1c2luZyB0aGUgZW1haWwgYWRkcmVzcyBhbmQgQVBJIHRva2VuXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gYCR7dGhpcy5zZXR0aW5ncy51c2VybmFtZX06JHt0aGlzLnNldHRpbmdzLmFwaVRva2VufWA7XG4gICAgICAgIC8vIENvbnZlcnQgdG8gYmFzZTY0LCBoYW5kbGluZyBVbmljb2RlIGNoYXJhY3RlcnMgY29ycmVjdGx5XG4gICAgICAgIGNvbnN0IGJhc2U2NENyZWRlbnRpYWxzID0gQnVmZmVyLmZyb20oY3JlZGVudGlhbHMpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICAgICAgcmV0dXJuIGBCYXNpYyAke2Jhc2U2NENyZWRlbnRpYWxzfWA7XG4gICAgfVxuXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IGJhc2VVcmwgPSB0aGlzLnNldHRpbmdzLmJhc2VVcmwucmVwbGFjZSgvXFwvJC8sICcnKTtcbiAgICAgICAgY29uc3QgYXBpVXJsID0gYCR7YmFzZVVybH0vcmVzdC9hcGkvMi9teXNlbGZgO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICAgICAgICAgIHVybDogYXBpVXJsLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IHRoaXMuZ2V0QXV0aEhlYWRlcigpLFxuICAgICAgICAgICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMgPT09IDIwMDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Nvbm5lY3Rpb24gdGVzdCBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgc2VhcmNoVGFza3MocXVlcnk6IHN0cmluZyk6IFByb21pc2U8SmlyYVRhc2tbXT4ge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuZW5hYmxlZCB8fCAhdGhpcy5zZXR0aW5ncy5iYXNlVXJsIHx8ICF0aGlzLnNldHRpbmdzLmFwaVRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ppcmEgaW50ZWdyYXRpb24gaXMgbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRlc3QgY29ubmVjdGlvbiBmaXJzdFxuICAgICAgICBjb25zdCBpc0Nvbm5lY3RlZCA9IGF3YWl0IHRoaXMudGVzdENvbm5lY3Rpb24oKTtcbiAgICAgICAgaWYgKCFpc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgYXV0aGVudGljYXRlIHdpdGggSmlyYS4gUGxlYXNlIGNoZWNrIHlvdXIgY3JlZGVudGlhbHMuJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFbnN1cmUgdGhlIGJhc2UgVVJMIGRvZXNuJ3QgZW5kIHdpdGggYSBzbGFzaFxuICAgICAgICBjb25zdCBiYXNlVXJsID0gdGhpcy5zZXR0aW5ncy5iYXNlVXJsLnJlcGxhY2UoL1xcLyQvLCAnJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBDbGVhbiB1cCB0aGUgcXVlcnkgdG8gcHJldmVudCBKUUwgaW5qZWN0aW9uXG4gICAgICAgIGNvbnN0IHNhbml0aXplZFF1ZXJ5ID0gcXVlcnkucmVwbGFjZSgvW1wiJ10vZywgJycpO1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIHNwZWNpYWwgcXVlcmllc1xuICAgICAgICBsZXQganFsOiBzdHJpbmc7XG4gICAgICAgIGlmIChzYW5pdGl6ZWRRdWVyeS50b0xvd2VyQ2FzZSgpID09PSAnbXkgdGFza3MnIHx8IHNhbml0aXplZFF1ZXJ5LnRvTG93ZXJDYXNlKCkgPT09ICdhc3NpZ25lZCB0byBtZScpIHtcbiAgICAgICAgICAgIGpxbCA9ICdhc3NpZ25lZSA9IGN1cnJlbnRVc2VyKCknO1xuICAgICAgICB9IGVsc2UgaWYgKHNhbml0aXplZFF1ZXJ5LnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgnbXknKSkge1xuICAgICAgICAgICAgLy8gSGFuZGxlIFwibXkgb3BlbiB0YXNrc1wiLCBcIm15IGRvbmUgdGFza3NcIiwgZXRjLlxuICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gc2FuaXRpemVkUXVlcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZG9uZScpID8gJ0RvbmUnIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNhbml0aXplZFF1ZXJ5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ29wZW4nKSA/ICdPcGVuJyA6IG51bGw7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGpxbCA9IHN0YXR1cyBcbiAgICAgICAgICAgICAgICA/IGBhc3NpZ25lZSA9IGN1cnJlbnRVc2VyKCkgQU5EIHN0YXR1cyA9IFwiJHtzdGF0dXN9XCJgXG4gICAgICAgICAgICAgICAgOiBgYXNzaWduZWUgPSBjdXJyZW50VXNlcigpIEFORCAoc3VtbWFyeSB+IFwiJHtzYW5pdGl6ZWRRdWVyeX1cIiBPUiBkZXNjcmlwdGlvbiB+IFwiJHtzYW5pdGl6ZWRRdWVyeX1cIilgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAganFsID0gYGFzc2lnbmVlID0gY3VycmVudFVzZXIoKSBBTkQgKHN1bW1hcnkgfiBcIiR7c2FuaXRpemVkUXVlcnl9XCIgT1IgZGVzY3JpcHRpb24gfiBcIiR7c2FuaXRpemVkUXVlcnl9XCIpYDtcbiAgICAgICAgfVxuXG4gICAgICAgIGpxbCArPSAnIE9SREVSIEJZIHVwZGF0ZWQgREVTQyc7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZygnSlFMIFF1ZXJ5OicsIGpxbCk7XG4gICAgICAgIGNvbnN0IGFwaVVybCA9IGAke2Jhc2VVcmx9L3Jlc3QvYXBpLzIvc2VhcmNoP2pxbD0ke2VuY29kZVVSSUNvbXBvbmVudChqcWwpfSZtYXhSZXN1bHRzPTEwJmZpZWxkcz1zdW1tYXJ5LHN0YXR1c2A7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBUEkgVVJMOicsIGFwaVVybCk7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdFBhcmFtczogUmVxdWVzdFVybFBhcmFtID0ge1xuICAgICAgICAgICAgdXJsOiBhcGlVcmwsXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogdGhpcy5nZXRBdXRoSGVhZGVyKCksXG4gICAgICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTWFraW5nIHJlcXVlc3QuLi4nKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybChyZXF1ZXN0UGFyYW1zKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZXNwb25zZSBzdGF0dXM6JywgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVzcG9uc2U6JywgcmVzcG9uc2UudGV4dCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBKaXJhIEFQSSByZXR1cm5lZCBzdGF0dXMgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnRleHR9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2UuanNvbiB8fCAhcmVzcG9uc2UuanNvbi5pc3N1ZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIHJlc3BvbnNlIGZvcm1hdDonLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJlc3BvbnNlIGZvcm1hdCBmcm9tIEppcmEgQVBJJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCBpc3N1ZXM6JywgcmVzcG9uc2UuanNvbi5pc3N1ZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uLmlzc3Vlcy5tYXAoKGlzc3VlOiBhbnkpID0+ICh7XG4gICAgICAgICAgICAgICAga2V5OiBpc3N1ZS5rZXksXG4gICAgICAgICAgICAgICAgc3VtbWFyeTogaXNzdWUuZmllbGRzLnN1bW1hcnksXG4gICAgICAgICAgICAgICAgdXJsOiBgJHtiYXNlVXJsfS9icm93c2UvJHtpc3N1ZS5rZXl9YCxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGlzc3VlLmZpZWxkcy5zdGF0dXM/Lm5hbWUgfHwgJ1Vua25vd24nXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZXRhaWxzOicsIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIHN0YXR1czogZXJyb3Iuc3RhdHVzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlOiBlcnJvci5yZXNwb25zZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXMgPT09IDQwMSB8fCBlcnJvci5zdGF0dXMgPT09IDQwMykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gZmFpbGVkLiBQbGVhc2UgdmVyaWZ5OlxcbjEuIFlvdXIgZW1haWwgYWRkcmVzcyBpcyBjb3JyZWN0XFxuMi4gWW91ciBBUEkgdG9rZW4gaXMgY29ycmVjdFxcbjMuIFlvdSBoYXZlIHRoZSBuZWNlc3NhcnkgcGVybWlzc2lvbnMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZm9ybWF0VGFza3NBc01hcmtkb3duKHRhc2tzOiBKaXJhVGFza1tdKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIHRhc2tzLm1hcCh0YXNrID0+IFxuICAgICAgICAgICAgYC0gWyBdIFske3Rhc2sua2V5fTogJHt0YXNrLnN1bW1hcnl9XSgke3Rhc2sudXJsfSkgKCR7dGFzay5zdGF0dXN9KWBcbiAgICAgICAgKS5qb2luKCdcXG4nKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBJU3VnZ2VzdE93bmVyLCBTY29wZSwgU3VnZ2VzdE1vZGFsIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgeyBKaXJhVGFzayB9IGZyb20gJy4vamlyYSc7XG5cbmV4cG9ydCBjbGFzcyBKaXJhVGFza1N1Z2dlc3RlciBleHRlbmRzIFN1Z2dlc3RNb2RhbDxKaXJhVGFzaz4ge1xuICAgIHByaXZhdGUgdGFza3M6IEppcmFUYXNrW10gPSBbXTtcbiAgICBwcml2YXRlIG9uU2VsZWN0OiAodGFzazogSmlyYVRhc2spID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSBzZWxlY3RlZEluZGV4ID0gMDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0YXNrczogSmlyYVRhc2tbXSwgb25TZWxlY3Q6ICh0YXNrOiBKaXJhVGFzaykgPT4gdm9pZCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICBjb25zb2xlLmxvZygnSmlyYVRhc2tTdWdnZXN0ZXIgY29uc3RydWN0b3IgY2FsbGVkJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdUYXNrcyByZWNlaXZlZDonLCB0YXNrcyk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnRhc2tzID0gdGFza3M7XG4gICAgICAgIHRoaXMub25TZWxlY3QgPSBvblNlbGVjdDtcbiAgICAgICAgXG4gICAgICAgIC8vIEV4cGxpY2l0bHkgc2V0IHBsYWNlaG9sZGVyIGFuZCBzdHlsaW5nXG4gICAgICAgIHRoaXMuc2V0UGxhY2Vob2xkZXIoXCJTZWxlY3QgYSBKaXJhIHRhc2suLi5cIik7XG4gICAgICAgIFxuICAgICAgICAvLyBFbnN1cmUgdGhlIG1vZGFsIGlzIHN0eWxlZCBhbmQgdmlzaWJsZVxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKCdqaXJhLXRhc2stc3VnZ2VzdGVyJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBDZW50ZXIgdGhlIG1vZGFsXG4gICAgICAgIHRoaXMubW9kYWxFbC5zdHlsZS5tYXhXaWR0aCA9ICc2MDBweCc7XG4gICAgICAgIHRoaXMubW9kYWxFbC5zdHlsZS53aWR0aCA9ICc4MCUnO1xuICAgICAgICB0aGlzLm1vZGFsRWwuc3R5bGUudG9wID0gJzMwJSc7XG4gICAgICAgIHRoaXMubW9kYWxFbC5zdHlsZS5sZWZ0ID0gJzUwJSc7XG4gICAgICAgIHRoaXMubW9kYWxFbC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKC01MCUsIC0zMCUpJztcbiAgICAgICAgdGhpcy5tb2RhbEVsLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgICAgICAgXG4gICAgICAgIC8vIFN0eWxlIHRoZSBzdWdnZXN0aW9ucyBjb250YWluZXJcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnNDb250YWluZXIgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnN1Z2dlc3Rpb24tY29udGFpbmVyJyk7XG4gICAgICAgIGlmIChzdWdnZXN0aW9uc0NvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICBzdWdnZXN0aW9uc0NvbnRhaW5lci5zdHlsZS5tYXhIZWlnaHQgPSAnNDAwcHgnO1xuICAgICAgICAgICAgc3VnZ2VzdGlvbnNDb250YWluZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNldCB1cCBrZXlib2FyZCBuYXZpZ2F0aW9uXG4gICAgICAgIHRoaXMuc2NvcGUgPSBuZXcgU2NvcGUoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENsb3NlIG9uIEVzY2FwZVxuICAgICAgICB0aGlzLnNjb3BlLnJlZ2lzdGVyKFtdLCBcIkVzY2FwZVwiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEVudGVyIHRvIHNlbGVjdFxuICAgICAgICB0aGlzLnNjb3BlLnJlZ2lzdGVyKFtdLCBcIkVudGVyXCIsIChldnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gdGhpcy5nZXRTdWdnZXN0aW9ucyh0aGlzLmlucHV0RWwudmFsdWUpO1xuICAgICAgICAgICAgaWYgKHN1Z2dlc3Rpb25zICYmIHN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2hvb3NlU3VnZ2VzdGlvbihzdWdnZXN0aW9uc1t0aGlzLnNlbGVjdGVkSW5kZXhdLCBldnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBcnJvdyBrZXkgbmF2aWdhdGlvblxuICAgICAgICB0aGlzLnNjb3BlLnJlZ2lzdGVyKFtdLCBcIkFycm93VXBcIiwgKGV2dDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBNYXRoLm1heCgwLCB0aGlzLnNlbGVjdGVkSW5kZXggLSAxKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRTdWdnZXN0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2NvcGUucmVnaXN0ZXIoW10sIFwiQXJyb3dEb3duXCIsIChldnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSB0aGlzLmdldFN1Z2dlc3Rpb25zKHRoaXMuaW5wdXRFbC52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBNYXRoLm1pbigoc3VnZ2VzdGlvbnM/Lmxlbmd0aCB8fCAxKSAtIDEsIHRoaXMuc2VsZWN0ZWRJbmRleCArIDEpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZFN1Z2dlc3Rpb24oKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRXhwbGljaXRseSBvcGVuIHRoZSBtb2RhbFxuICAgICAgICBjb25zb2xlLmxvZygnQWJvdXQgdG8gb3BlbiBtb2RhbCcpO1xuICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVNlbGVjdGVkU3VnZ2VzdGlvbigpIHtcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbkVsZW1lbnRzID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdWdnZXN0aW9uLWNvbnRhaW5lciAuc3VnZ2VzdGlvbi1pdGVtJyk7XG4gICAgICAgIHN1Z2dlc3Rpb25FbGVtZW50cy5mb3JFYWNoKChlbCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdGhpcy5zZWxlY3RlZEluZGV4KSB7XG4gICAgICAgICAgICAgICAgZWwuYWRkQ2xhc3MoJ2lzLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgKGVsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3ZlciknO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbC5yZW1vdmVDbGFzcygnaXMtc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE92ZXJyaWRlIG9wZW4gbWV0aG9kIHRvIGVuc3VyZSBpdCdzIGZ1bGx5IHZpc2libGVcbiAgICBvcGVuKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnRXhwbGljaXRseSBvcGVuaW5nIG1vZGFsJyk7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZGl0aW9uYWwgdmlzaWJpbGl0eSBjaGVja3NcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgfVxuXG4gICAgZ2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IEppcmFUYXNrW10ge1xuICAgICAgICBjb25zb2xlLmxvZygnR2V0dGluZyBzdWdnZXN0aW9ucyBmb3IgcXVlcnk6JywgcXVlcnkpO1xuICAgICAgICBjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWRUYXNrcyA9IHRoaXMudGFza3MuZmlsdGVyKHRhc2sgPT4gXG4gICAgICAgICAgICB0YXNrLmtleS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpIHx8XG4gICAgICAgICAgICB0YXNrLnN1bW1hcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLmxvZygnRmlsdGVyZWQgdGFza3M6JywgZmlsdGVyZWRUYXNrcyk7XG4gICAgICAgIHJldHVybiBmaWx0ZXJlZFRhc2tzO1xuICAgIH1cblxuICAgIHJlbmRlclN1Z2dlc3Rpb24odGFzazogSmlyYVRhc2ssIGVsOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zb2xlLmxvZygnUmVuZGVyaW5nIHN1Z2dlc3Rpb24gZm9yIHRhc2s6JywgdGFzayk7XG4gICAgICAgIGVsLmFkZENsYXNzKCdzdWdnZXN0aW9uLWl0ZW0nKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBjb250YWluZXIgZm9yIGJldHRlciBhbGlnbm1lbnRcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZWwuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi1jb250ZW50JyB9KTtcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5nYXAgPSAnOHB4JztcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBKaXJhIGljb25cbiAgICAgICAgY29uc3QgaWNvbkNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWljb24nIH0pO1xuICAgICAgICBpY29uQ29udGFpbmVyLmlubmVySFRNTCA9IGA8c3ZnIHdpZHRoPVwiMTZcIiBoZWlnaHQ9XCIxNlwiIHZpZXdCb3g9XCIwIDAgMTI4IDEyOFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTA4LjAyMyAxNkg2MS44MDVjMCAxMS41MiA5LjMyNCAyMC44NDggMjAuODQ3IDIwLjg0OGg4LjV2OC4yMjZjMCAxMS41MiA5LjMyOCAyMC44NDcgMjAuODQ4IDIwLjg0N1YxOS45NzdBMy45OCAzLjk4IDAgMDAxMDguMDIzIDE2elwiLz5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNODUuMTIxIDM5LjA0SDM4LjkwMmMwIDExLjUyIDkuMzI0IDIwLjg0NyAyMC44NDcgMjAuODQ3aDguNXY4LjIyNmMwIDExLjUyNCA5LjMyOCAyMC44NDcgMjAuODQ4IDIwLjg0N1Y0My4wMTZhMy45NzggMy45NzggMCAwMC0zLjk3Ni0zLjk3N3pcIi8+XG4gICAgICAgICAgICA8cGF0aCBkPVwiTTYyLjIxOSA2Mi4wNzhIMTZjMCAxMS41MjQgOS4zMjQgMjAuODQ3IDIwLjg0NyAyMC44NDdoOC41djguMjNjMCAxMS41MiA5LjMyOCAyMC44NDcgMjAuODQ4IDIwLjg0N1Y2Ni4wNTVhMy45NzkgMy45NzkgMCAwMC0zLjk3Ni0zLjk3N3pcIi8+XG4gICAgICAgIDwvc3ZnPmA7XG4gICAgICAgIGljb25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgaWNvbkNvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICAgIGljb25Db250YWluZXIuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuXG4gICAgICAgIC8vIEFkZCB0ZXh0IGNvbnRlbnRcbiAgICAgICAgY29uc3QgdGV4dENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLXRleHQnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gS2V5IGFuZCBTdW1tYXJ5IGluIHRpdGxlXG4gICAgICAgIGNvbnN0IHRpdGxlRWwgPSB0ZXh0Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24tdGl0bGUnIH0pO1xuICAgICAgICB0aXRsZUVsLnNldFRleHQoYCR7dGFzay5rZXl9IC0gJHt0YXNrLnN1bW1hcnl9YCk7XG4gICAgICAgIHRpdGxlRWwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgICAgXG4gICAgICAgIC8vIFN0YXR1cyBpbiBkZXNjcmlwdGlvblxuICAgICAgICBjb25zdCBzdGF0dXNFbCA9IHRleHRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi1kZXNjcmlwdGlvbicgfSk7XG4gICAgICAgIHN0YXR1c0VsLnNldFRleHQodGFzay5zdGF0dXMpO1xuICAgICAgICBzdGF0dXNFbC5zdHlsZS5mb250U2l6ZSA9ICcwLjhlbSc7XG4gICAgICAgIHN0YXR1c0VsLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblxuICAgICAgICAvLyBBZGQgaG92ZXIgYW5kIHNlbGVjdGlvbiBoYW5kbGluZ1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgZWwuYWRkQ2xhc3MoJ2lzLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSBBcnJheS5mcm9tKGVsLnBhcmVudEVsZW1lbnQ/LmNoaWxkcmVuIHx8IFtdKS5pbmRleE9mKGVsKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRTdWdnZXN0aW9uKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFN0eWxlIGZvciBob3ZlciBhbmQgc2VsZWN0aW9uXG4gICAgICAgIGVsLnN0eWxlLnBhZGRpbmcgPSAnOHB4JztcbiAgICAgICAgZWwuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICBlbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcbiAgICAgICAgZWwuc3R5bGUudHJhbnNpdGlvbiA9ICdiYWNrZ3JvdW5kLWNvbG9yIDEwMG1zIGVhc2UtaW4tb3V0JztcbiAgICB9XG5cbiAgICBvbkNob29zZVN1Z2dlc3Rpb24odGFzazogSmlyYVRhc2ssIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1Rhc2sgY2hvc2VuOicsIHRhc2spO1xuICAgICAgICAvLyBFbnN1cmUgdGhlIG9uU2VsZWN0IGNhbGxiYWNrIGlzIGNhbGxlZFxuICAgICAgICBpZiAodGhpcy5vblNlbGVjdCkge1xuICAgICAgICAgICAgdGhpcy5vblNlbGVjdCh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IHJlcXVlc3RVcmwsIFJlcXVlc3RVcmxQYXJhbSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEdpdFNldHRpbmdzIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBHaXRJbnRlZ3JhdGlvbiB7XG4gICAgcHJpdmF0ZSBzZXR0aW5nczogR2l0U2V0dGluZ3M7XG5cbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogR2l0U2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SGVhZGVycyhpc0dpdExhYjogYm9vbGVhbik6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7aXNHaXRMYWIgPyB0aGlzLnNldHRpbmdzLmdpdGxhYlRva2VuIDogdGhpcy5zZXR0aW5ncy5naXRodWJUb2tlbn1gLFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRMYXN0TWVyZ2VkQ29tbWl0KHJlcG9zaXRvcnk6IHN0cmluZywgaXNHaXRMYWI6IGJvb2xlYW4pOiBQcm9taXNlPGFueT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGlzR2l0TGFiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5jb2RlZFJlcG8gPSBlbmNvZGVVUklDb21wb25lbnQocmVwb3NpdG9yeSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5zZXR0aW5ncy5naXRsYWJVcmx9L2FwaS92NC9wcm9qZWN0cy8ke2VuY29kZWRSZXBvfS9tZXJnZV9yZXF1ZXN0cz9zdGF0ZT1tZXJnZWQmb3JkZXJfYnk9dXBkYXRlZF9hdCZzb3J0PWRlc2MmcGVyX3BhZ2U9MWA7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmdldEhlYWRlcnModHJ1ZSksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb25bMF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtvd25lciwgcmVwb10gPSByZXBvc2l0b3J5LnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtvd25lcn0vJHtyZXBvfS9wdWxscz9zdGF0ZT1jbG9zZWQmc29ydD11cGRhdGVkJmRpcmVjdGlvbj1kZXNjJnBlcl9wYWdlPTFgO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKGZhbHNlKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvblswXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGxhc3QgbWVyZ2VkIGNvbW1pdDonLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldFBlbmRpbmdNZXJnZVJlcXVlc3RzKHJlcG9zaXRvcnk6IHN0cmluZywgaXNHaXRMYWI6IGJvb2xlYW4pOiBQcm9taXNlPGFueVtdPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoaXNHaXRMYWIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmNvZGVkUmVwbyA9IGVuY29kZVVSSUNvbXBvbmVudChyZXBvc2l0b3J5KTtcbiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLnNldHRpbmdzLmdpdGxhYlVybH0vYXBpL3Y0L3Byb2plY3RzLyR7ZW5jb2RlZFJlcG99L21lcmdlX3JlcXVlc3RzP3N0YXRlPW9wZW5lZGA7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmdldEhlYWRlcnModHJ1ZSksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb247XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtvd25lciwgcmVwb10gPSByZXBvc2l0b3J5LnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtvd25lcn0vJHtyZXBvfS9wdWxscz9zdGF0ZT1vcGVuYDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICAgICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuZ2V0SGVhZGVycyhmYWxzZSksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwZW5kaW5nIG1lcmdlIHJlcXVlc3RzOicsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxsR2l0SHViUFJzKCk6IFByb21pc2U8YW55W10+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEZpcnN0IGdldCBhbGwgcmVwb3NpdG9yaWVzIHRoZSB1c2VyIGhhcyBhY2Nlc3MgdG9cbiAgICAgICAgICAgIGNvbnN0IHJlcG9zUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL2FwaS5naXRodWIuY29tL3VzZXIvcmVwb3M/YWZmaWxpYXRpb249b3duZXIsY29sbGFib3JhdG9yLG9yZ2FuaXphdGlvbl9tZW1iZXImc29ydD11cGRhdGVkJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmdldEhlYWRlcnMoZmFsc2UpLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEdldCBvcGVuIFBScyBmcm9tIGVhY2ggcmVwb3NpdG9yeVxuICAgICAgICAgICAgY29uc3QgYWxsUFJzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICAgICAgcmVwb3NSZXNwb25zZS5qc29uLm1hcChhc3luYyAocmVwbzogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwby5mdWxsX25hbWV9L3B1bGxzP3N0YXRlPW9wZW5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKGZhbHNlKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uLm1hcCgocHI6IGFueSkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwb3NpdG9yeTogcmVwby5mdWxsX25hbWVcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBGbGF0dGVuIHRoZSBhcnJheSBvZiBhcnJheXMgYW5kIHNvcnQgYnkgdXBkYXRlZCBkYXRlXG4gICAgICAgICAgICByZXR1cm4gYWxsUFJzLmZsYXQoKS5zb3J0KChhLCBiKSA9PiBcbiAgICAgICAgICAgICAgICBuZXcgRGF0ZShiLnVwZGF0ZWRfYXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEudXBkYXRlZF9hdCkuZ2V0VGltZSgpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgR2l0SHViIFBSczonLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldEFsbEdpdExhYk1ScygpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBGaXJzdCBnZXQgYWxsIHByb2plY3RzIHRoZSB1c2VyIGhhcyBhY2Nlc3MgdG9cbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RzUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMuc2V0dGluZ3MuZ2l0bGFiVXJsfS9hcGkvdjQvcHJvamVjdHM/bWVtYmVyc2hpcD10cnVlJnNvcnQ9ZGVzY2AsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKHRydWUpLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEdldCBvcGVuIE1ScyBmcm9tIGVhY2ggcHJvamVjdFxuICAgICAgICAgICAgY29uc3QgYWxsTVJzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICAgICAgcHJvamVjdHNSZXNwb25zZS5qc29uLm1hcChhc3luYyAocHJvamVjdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IGAke3RoaXMuc2V0dGluZ3MuZ2l0bGFiVXJsfS9hcGkvdjQvcHJvamVjdHMvJHtwcm9qZWN0LmlkfS9tZXJnZV9yZXF1ZXN0cz9zdGF0ZT1vcGVuZWRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5nZXRIZWFkZXJzKHRydWUpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24ubWFwKChtcjogYW55KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ubXIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBvc2l0b3J5OiBwcm9qZWN0LnBhdGhfd2l0aF9uYW1lc3BhY2VcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBGbGF0dGVuIHRoZSBhcnJheSBvZiBhcnJheXMgYW5kIHNvcnQgYnkgdXBkYXRlZCBkYXRlXG4gICAgICAgICAgICByZXR1cm4gYWxsTVJzLmZsYXQoKS5zb3J0KChhLCBiKSA9PiBcbiAgICAgICAgICAgICAgICBuZXcgRGF0ZShiLnVwZGF0ZWRfYXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEudXBkYXRlZF9hdCkuZ2V0VGltZSgpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgR2l0TGFiIE1SczonLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFNldHRpbmdzKCk6IEdpdFNldHRpbmdzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3M7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgSVN1Z2dlc3RPd25lciwgU2NvcGUsIFN1Z2dlc3RNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEdpdEludGVncmF0aW9uIH0gZnJvbSAnLi9naXQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEdpdE1lcmdlUmVxdWVzdCB7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIHdlYl91cmw/OiBzdHJpbmc7ICAvLyBHaXRMYWJcbiAgICBodG1sX3VybD86IHN0cmluZzsgLy8gR2l0SHViXG4gICAgc3RhdGU6IHN0cmluZztcbiAgICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gICAgbnVtYmVyPzogbnVtYmVyO1xuICAgIGF1dGhvcjoge1xuICAgICAgICBuYW1lPzogc3RyaW5nO1xuICAgICAgICBsb2dpbj86IHN0cmluZzsgLy8gR2l0SHViXG4gICAgICAgIHVzZXJuYW1lPzogc3RyaW5nOyAvLyBHaXRMYWJcbiAgICB9O1xufVxuXG5leHBvcnQgY2xhc3MgR2l0TWVyZ2VSZXF1ZXN0U3VnZ2VzdGVyIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPEdpdE1lcmdlUmVxdWVzdD4ge1xuICAgIHByaXZhdGUgc3VnZ2VzdGlvbnM6IEdpdE1lcmdlUmVxdWVzdFtdID0gW107XG4gICAgcHJpdmF0ZSBsb2FkaW5nID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBnaXRJbnRlZ3JhdGlvbjogR2l0SW50ZWdyYXRpb247XG4gICAgcHJpdmF0ZSBvbkNob29zZT86IChzZWxlY3RlZFBSOiBHaXRNZXJnZVJlcXVlc3QpID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSBzZWxlY3RlZEluZGV4ID0gMDtcbiAgICBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGFwcDogQXBwLFxuICAgICAgICBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50LFxuICAgICAgICBnaXRJbnRlZ3JhdGlvbjogR2l0SW50ZWdyYXRpb24sXG4gICAgICAgIHN1Z2dlc3Rpb25zPzogR2l0TWVyZ2VSZXF1ZXN0W10sXG4gICAgICAgIG9uQ2hvb3NlPzogKHNlbGVjdGVkUFI6IEdpdE1lcmdlUmVxdWVzdCkgPT4gdm9pZFxuICAgICkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICBjb25zb2xlLmxvZygnR2l0TWVyZ2VSZXF1ZXN0U3VnZ2VzdGVyIGNvbnN0cnVjdG9yIGNhbGxlZCcpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5naXRJbnRlZ3JhdGlvbiA9IGdpdEludGVncmF0aW9uO1xuICAgICAgICB0aGlzLmlucHV0RWwgPSBpbnB1dEVsO1xuICAgICAgICBcbiAgICAgICAgaWYgKHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgICAgICB0aGlzLnN1Z2dlc3Rpb25zID0gc3VnZ2VzdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFN0b3JlIHRoZSBvbkNob29zZSBjYWxsYmFja1xuICAgICAgICB0aGlzLm9uQ2hvb3NlID0gb25DaG9vc2U7XG4gICAgICAgIFxuICAgICAgICAvLyBFeHBsaWNpdGx5IHNldCBwbGFjZWhvbGRlciBhbmQgc3R5bGluZ1xuICAgICAgICB0aGlzLnNldFBsYWNlaG9sZGVyKFwiU2VhcmNoIHB1bGwgcmVxdWVzdHMuLi5cIik7XG4gICAgICAgIFxuICAgICAgICAvLyBTdHlsZSB0aGUgbW9kYWxcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnZ2l0LW1yLXN1Z2dlc3RlcicpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2VudGVyIHRoZSBtb2RhbFxuICAgICAgICB0aGlzLm1vZGFsRWwuc3R5bGUubWF4V2lkdGggPSAnNjAwcHgnO1xuICAgICAgICB0aGlzLm1vZGFsRWwuc3R5bGUud2lkdGggPSAnODAlJztcbiAgICAgICAgdGhpcy5tb2RhbEVsLnN0eWxlLnRvcCA9ICczMCUnO1xuICAgICAgICB0aGlzLm1vZGFsRWwuc3R5bGUubGVmdCA9ICc1MCUnO1xuICAgICAgICB0aGlzLm1vZGFsRWwuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgtNTAlLCAtMzAlKSc7XG4gICAgICAgIHRoaXMubW9kYWxFbC5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgIFxuICAgICAgICAvLyBTdHlsZSB0aGUgc3VnZ2VzdGlvbnMgY29udGFpbmVyXG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zQ29udGFpbmVyID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy5zdWdnZXN0aW9uLWNvbnRhaW5lcicpO1xuICAgICAgICBpZiAoc3VnZ2VzdGlvbnNDb250YWluZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgc3VnZ2VzdGlvbnNDb250YWluZXIuc3R5bGUubWF4SGVpZ2h0ID0gJzQwMHB4JztcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zQ29udGFpbmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICAgICAgc3VnZ2VzdGlvbnNDb250YWluZXIuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuICAgICAgICAgICAgc3VnZ2VzdGlvbnNDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XG4gICAgICAgICAgICBzdWdnZXN0aW9uc0NvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN0eWxlIHRoZSBpbnB1dCBjb250YWluZXJcbiAgICAgICAgY29uc3QgaW5wdXRDb250YWluZXIgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnByb21wdCcpO1xuICAgICAgICBpZiAoaW5wdXRDb250YWluZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgaW5wdXRDb250YWluZXIuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuICAgICAgICAgICAgaW5wdXRDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XG4gICAgICAgICAgICBpbnB1dENvbnRhaW5lci5zdHlsZS5tYXJnaW4gPSAnMCAwIDhweCAwJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN0eWxlIHRoZSBpbnB1dFxuICAgICAgICBjb25zdCBpbnB1dCA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcucHJvbXB0LWlucHV0Jyk7XG4gICAgICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICBpbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgICAgIGlucHV0LnN0eWxlLnBhZGRpbmcgPSAnOHB4IDEycHgnO1xuICAgICAgICAgICAgaW5wdXQuc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuICAgICAgICAgICAgaW5wdXQuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2V0IHVwIGtleWJvYXJkIG5hdmlnYXRpb25cbiAgICAgICAgdGhpcy5zY29wZSA9IG5ldyBTY29wZSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xvc2Ugb24gRXNjYXBlXG4gICAgICAgIHRoaXMuc2NvcGUucmVnaXN0ZXIoW10sIFwiRXNjYXBlXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRW50ZXIgdG8gc2VsZWN0XG4gICAgICAgIHRoaXMuc2NvcGUucmVnaXN0ZXIoW10sIFwiRW50ZXJcIiwgYXN5bmMgKGV2dDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBhd2FpdCB0aGlzLmdldFN1Z2dlc3Rpb25zKHRoaXMuaW5wdXRFbC52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoc3VnZ2VzdGlvbnMgJiYgc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMub25DaG9vc2VTdWdnZXN0aW9uKHN1Z2dlc3Rpb25zW3RoaXMuc2VsZWN0ZWRJbmRleF0sIGV2dCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFycm93IGtleSBuYXZpZ2F0aW9uXG4gICAgICAgIHRoaXMuc2NvcGUucmVnaXN0ZXIoW10sIFwiQXJyb3dVcFwiLCBhc3luYyAoZXZ0OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IE1hdGgubWF4KDAsIHRoaXMuc2VsZWN0ZWRJbmRleCAtIDEpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZFN1Z2dlc3Rpb24oKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zY29wZS5yZWdpc3RlcihbXSwgXCJBcnJvd0Rvd25cIiwgYXN5bmMgKGV2dDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zdCBzdWdnZXN0aW9ucyA9IGF3YWl0IHRoaXMuZ2V0U3VnZ2VzdGlvbnModGhpcy5pbnB1dEVsLnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IE1hdGgubWluKChzdWdnZXN0aW9ucz8ubGVuZ3RoIHx8IDEpIC0gMSwgdGhpcy5zZWxlY3RlZEluZGV4ICsgMSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkU3VnZ2VzdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBPcGVuIHRoZSBtb2RhbFxuICAgICAgICBjb25zb2xlLmxvZygnQWJvdXQgdG8gb3BlbiBtb2RhbCcpO1xuICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVNlbGVjdGVkU3VnZ2VzdGlvbigpIHtcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbkVsZW1lbnRzID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdWdnZXN0aW9uLWNvbnRhaW5lciAuc3VnZ2VzdGlvbi1pdGVtJyk7XG4gICAgICAgIHN1Z2dlc3Rpb25FbGVtZW50cy5mb3JFYWNoKChlbCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gdGhpcy5zZWxlY3RlZEluZGV4KSB7XG4gICAgICAgICAgICAgICAgZWwuYWRkQ2xhc3MoJ2lzLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgLy8gRW5zdXJlIHRoZSBzZWxlY3RlZCBpdGVtIGlzIHZpc2libGVcbiAgICAgICAgICAgICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnNjcm9sbEludG9WaWV3KHsgYmxvY2s6ICduZWFyZXN0JyB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWwucmVtb3ZlQ2xhc3MoJ2lzLXNlbGVjdGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBQcm9taXNlPEdpdE1lcmdlUmVxdWVzdFtdPiB7XG4gICAgICAgIGlmICh0aGlzLmxvYWRpbmcpIHJldHVybiB0aGlzLnN1Z2dlc3Rpb25zO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZpbHRlciB0aGUgZXhpc3Rpbmcgc3VnZ2VzdGlvbnMgYmFzZWQgb24gdGhlIHF1ZXJ5XG4gICAgICAgICAgICBjb25zdCBzZWFyY2hTdHIgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRTdWdnZXN0aW9ucyA9IHRoaXMuc3VnZ2VzdGlvbnMuZmlsdGVyKG1yID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbXIudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hTdHIpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICBtci5kZXNjcmlwdGlvbj8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hTdHIpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgIChtci53ZWJfdXJsIHx8IG1yLmh0bWxfdXJsIHx8ICcnKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFN0cikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgbXIuYXV0aG9yLm5hbWU/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoU3RyKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICBtci5hdXRob3IubG9naW4/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoU3RyKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICBtci5hdXRob3IudXNlcm5hbWU/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoU3RyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyZWRTdWdnZXN0aW9ucztcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZpbHRlcmluZyBzdWdnZXN0aW9uczonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uQ2hvb3NlU3VnZ2VzdGlvbihyZXN1bHQ6IEdpdE1lcmdlUmVxdWVzdCwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5vbkNob29zZSkge1xuICAgICAgICAgICAgdGhpcy5vbkNob29zZShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG5cbiAgICByZW5kZXJTdWdnZXN0aW9uKHJlc3VsdDogR2l0TWVyZ2VSZXF1ZXN0LCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgZWwuYWRkQ2xhc3MoJ3N1Z2dlc3Rpb24taXRlbScpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGNvbnRhaW5lciBmb3IgYmV0dGVyIGFsaWdubWVudFxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWNvbnRlbnQnIH0pO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmdhcCA9ICc4cHgnO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIEdpdExhYi9HaXRIdWIgaWNvblxuICAgICAgICBjb25zdCBpY29uQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24taWNvbicgfSk7XG4gICAgICAgIGlmIChyZXN1bHQud2ViX3VybD8uaW5jbHVkZXMoJ2dpdGxhYicpKSB7XG4gICAgICAgICAgICBpY29uQ29udGFpbmVyLmlubmVySFRNTCA9IGA8c3ZnIHdpZHRoPVwiMTZcIiBoZWlnaHQ9XCIxNlwiIHZpZXdCb3g9XCIwIDAgMTYgMTZcIiBmaWxsPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgPHBhdGggZD1cIk0xNS45NyA5LjA1OGwtLjg5NS0yLjc1NkwxMy4zLjg0MmMtLjA5LS4yODItLjQ4OC0uMjgyLS41OCAwTDEwLjk0NiA2LjNINS4wNTRMMy4yOC44NDJjLS4wOS0uMjgyLS40ODgtLjI4Mi0uNTggMEwuOTI0IDYuMzAyLjAzIDkuMDU4Yy0uMDgyLjI1LjAwOC41MjYuMjIuNjgybDcuNzUgNS42MyA3Ljc1LTUuNjNjLjIxMi0uMTU2LjMwMi0uNDMuMjItLjY4MlwiLz5cbiAgICAgICAgICAgIDwvc3ZnPmA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBHaXRIdWIgaWNvbiBhcyBmYWxsYmFja1xuICAgICAgICAgICAgaWNvbkNvbnRhaW5lci5pbm5lckhUTUwgPSBgPHN2ZyB3aWR0aD1cIjE2XCIgaGVpZ2h0PVwiMTZcIiB2aWV3Qm94PVwiMCAwIDE2IDE2XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNOCAwQzMuNTggMCAwIDMuNTggMCA4YzAgMy41NCAyLjI5IDYuNTMgNS40NyA3LjU5LjQuMDcuNTUtLjE3LjU1LS4zOCAwLS4xOS0uMDEtLjgyLS4wMS0xLjQ5LTIuMDEuMzctMi41My0uNDktMi42OS0uOTQtLjA5LS4yMy0uNDgtLjk0LS44Mi0xLjEzLS4yOC0uMTUtLjY4LS41Mi0uMDEtLjUzLjYzLS4wMSAxLjA4LjU4IDEuMjMuODIuNzIgMS4yMSAxLjg3Ljg3IDIuMzMuNjYuMDctLjUyLjI4LS44Ny41MS0xLjA3LTEuNzgtLjItMy42NC0uODktMy42NC0zLjk1IDAtLjg3LjMxLTEuNTkuODItMi4xNS0uMDgtLjItLjM2LTEuMDIuMDgtMi4xMiAwIDAgLjY3LS4yMSAyLjIuODIuNjQtLjE4IDEuMzItLjI3IDItLjI3LjY4IDAgMS4zNi4wOSAyIC4yNyAxLjUzLTEuMDQgMi4yLS44MiAyLjItLjgyLjQ0IDEuMS4xNiAxLjkyLjA4IDIuMTIuNTEuNTYuODIgMS4yNy44MiAyLjE1IDAgMy4wNy0xLjg3IDMuNzUtMy42NSAzLjk1LjI5LjI1LjU0LjczLjU0IDEuNDggMCAxLjA3LS4wMSAxLjkzLS4wMSAyLjIgMCAuMjEuMTUuNDYuNTUuMzhBOC4wMTMgOC4wMTMgMCAwMDE2IDhjMC00LjQyLTMuNTgtOC04LThcIi8+XG4gICAgICAgICAgICA8L3N2Zz5gO1xuICAgICAgICB9XG4gICAgICAgIGljb25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgaWNvbkNvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICAgIGljb25Db250YWluZXIuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuXG4gICAgICAgIC8vIEFkZCB0aXRsZSBhbmQgZGVzY3JpcHRpb25cbiAgICAgICAgY29uc3QgdGV4dENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLXRleHQnIH0pO1xuICAgICAgICBjb25zdCB0aXRsZUVsID0gdGV4dENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLXRpdGxlJyB9KTtcbiAgICAgICAgdGl0bGVFbC5zZXRUZXh0KHJlc3VsdC50aXRsZSk7XG4gICAgICAgIHRpdGxlRWwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRlc2NFbCA9IHRleHRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi1kZXNjcmlwdGlvbicgfSk7XG4gICAgICAgIGRlc2NFbC5zZXRUZXh0KGAjJHtyZXN1bHQubnVtYmVyIHx8ICcnfSBieSAke3Jlc3VsdC5hdXRob3I/Lm5hbWUgfHwgcmVzdWx0LmF1dGhvcj8udXNlcm5hbWUgfHwgcmVzdWx0LmF1dGhvcj8ubG9naW4gfHwgJ1Vua25vd24nfWApO1xuICAgICAgICBkZXNjRWwuc3R5bGUuZm9udFNpemUgPSAnMC44ZW0nO1xuICAgICAgICBkZXNjRWwuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuICAgIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUEsdUJBQXdHOzs7QUMwQ2pHLElBQU0sbUJBQTJDO0FBQUEsRUFDcEQsY0FBYztBQUFBLEVBQ2QsZ0JBQWdCO0FBQUEsRUFDaEIsYUFBYTtBQUFBLElBQ1Q7QUFBQSxNQUNJLEtBQUs7QUFBQSxNQUNMLGdCQUFnQjtBQUFBLE1BQ2hCLGNBQWM7QUFBQTtBQUFBO0FBQUEsRUFHdEIsY0FBYztBQUFBLElBQ1YsU0FBUztBQUFBLElBQ1QsU0FBUztBQUFBLElBQ1QsVUFBVTtBQUFBLElBQ1YsVUFBVTtBQUFBLElBQ1YsYUFBYTtBQUFBO0FBQUEsRUFFakIsZ0JBQWdCO0FBQUEsSUFDWixTQUFTO0FB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
