/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};

// src/main.ts
__export(exports, {
  default: () => EmojiChecklistPlugin
});
var import_obsidian3 = __toModule(require("obsidian"));

// src/types.ts
var DEFAULT_SETTINGS = {
  checkedEmoji: "\u2705",
  uncheckedEmoji: "\u2B1C\uFE0F",
  tagMappings: [
    {
      tag: "stopper",
      uncheckedEmoji: "\u{1F6D1}",
      checkedEmoji: "\u2705"
    }
  ]
};

// src/settings.ts
var import_obsidian = __toModule(require("obsidian"));
var EmojiChecklistSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  updateTestSection() {
    if (this.testEl) {
      this.testEl.empty();
      const header = this.testEl.createEl("h3", { text: "Live Preview" });
      const uncheckedExample = this.testEl.createEl("div", { cls: "setting-item" });
      uncheckedExample.createEl("span", { text: "Unchecked example: " });
      const uncheckedContainer = uncheckedExample.createEl("span", { cls: "task-preview" });
      uncheckedContainer.createEl("span", {
        text: this.plugin.settings.uncheckedEmoji,
        cls: "emoji-preview"
      });
      uncheckedContainer.createEl("span", { text: " Sample task" });
      const checkedExample = this.testEl.createEl("div", { cls: "setting-item" });
      checkedExample.createEl("span", { text: "Checked example: " });
      const checkedContainer = checkedExample.createEl("span", { cls: "task-preview" });
      checkedContainer.createEl("span", {
        text: this.plugin.settings.checkedEmoji,
        cls: "emoji-preview"
      });
      const checkedText = checkedContainer.createEl("span", { text: " Sample task" });
      checkedText.style.textDecoration = "line-through";
      checkedText.style.color = "var(--text-muted)";
      if (this.plugin.settings.tagMappings.length > 0) {
        const tagHeader = this.testEl.createEl("h3", { text: "Tag Examples" });
        tagHeader.style.marginTop = "2em";
        tagHeader.style.marginBottom = "1em";
        for (const mapping of this.plugin.settings.tagMappings) {
          const tagUncheckedExample = this.testEl.createEl("div", { cls: "setting-item" });
          tagUncheckedExample.createEl("span", { text: `#${mapping.tag} unchecked: ` });
          const tagUncheckedContainer = tagUncheckedExample.createEl("span", { cls: "task-preview" });
          tagUncheckedContainer.createEl("span", {
            text: mapping.uncheckedEmoji,
            cls: "emoji-preview"
          });
          tagUncheckedContainer.createEl("span", { text: ` Sample #${mapping.tag} task` });
          const tagCheckedExample = this.testEl.createEl("div", { cls: "setting-item" });
          tagCheckedExample.createEl("span", { text: `#${mapping.tag} checked: ` });
          const tagCheckedContainer = tagCheckedExample.createEl("span", { cls: "task-preview" });
          tagCheckedContainer.createEl("span", {
            text: mapping.checkedEmoji,
            cls: "emoji-preview"
          });
          const tagCheckedText = tagCheckedContainer.createEl("span", { text: ` Sample #${mapping.tag} task` });
          tagCheckedText.style.textDecoration = "line-through";
          tagCheckedText.style.color = "var(--text-muted)";
          tagUncheckedExample.style.marginBottom = "0.5em";
          tagCheckedExample.style.marginBottom = "0.5em";
        }
      }
      header.style.marginTop = "2em";
      header.style.marginBottom = "1em";
      uncheckedExample.style.marginBottom = "0.5em";
      checkedExample.style.marginBottom = "0.5em";
    }
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Emoji Checklist Settings" });
    new import_obsidian.Setting(containerEl).setName("Default Unchecked Emoji").setDesc("Emoji to display for unchecked tasks").addText((text) => text.setValue(this.plugin.settings.uncheckedEmoji).onChange(async (value) => {
      this.plugin.settings.uncheckedEmoji = value;
      await this.plugin.saveSettings();
      this.updateTestSection();
      console.log("Updated default unchecked emoji:", this.plugin.settings.uncheckedEmoji);
    }));
    new import_obsidian.Setting(containerEl).setName("Default Checked Emoji").setDesc("Emoji to display for checked tasks").addText((text) => text.setValue(this.plugin.settings.checkedEmoji).onChange(async (value) => {
      this.plugin.settings.checkedEmoji = value;
      await this.plugin.saveSettings();
      this.updateTestSection();
      console.log("Updated default checked emoji:", this.plugin.settings.checkedEmoji);
    }));
    containerEl.createEl("h3", { text: "Tag Mappings" });
    const tagMappingsContainer = containerEl.createDiv("tag-mappings");
    this.plugin.settings.tagMappings.forEach((mapping, index) => {
      const mappingContainer = tagMappingsContainer.createDiv("tag-mapping");
      new import_obsidian.Setting(mappingContainer).setName(`Tag #${mapping.tag}`).addText((text) => text.setPlaceholder("tag name").setValue(mapping.tag).onChange(async (value) => {
        this.plugin.settings.tagMappings[index].tag = value;
        await this.plugin.saveSettings();
        this.updateTestSection();
        console.log("Updated tag mapping:", this.plugin.settings.tagMappings);
      })).addText((text) => text.setPlaceholder("unchecked emoji").setValue(mapping.uncheckedEmoji).onChange(async (value) => {
        this.plugin.settings.tagMappings[index].uncheckedEmoji = value;
        await this.plugin.saveSettings();
        this.updateTestSection();
        console.log("Updated tag mapping:", this.plugin.settings.tagMappings);
      })).addText((text) => text.setPlaceholder("checked emoji").setValue(mapping.checkedEmoji).onChange(async (value) => {
        this.plugin.settings.tagMappings[index].checkedEmoji = value;
        await this.plugin.saveSettings();
        this.updateTestSection();
        console.log("Updated tag mapping:", this.plugin.settings.tagMappings);
      })).addButton((button) => button.setIcon("trash").onClick(async () => {
        this.plugin.settings.tagMappings.splice(index, 1);
        await this.plugin.saveSettings();
        this.display();
        console.log("Removed tag mapping, remaining:", this.plugin.settings.tagMappings);
      }));
    });
    new import_obsidian.Setting(containerEl).setName("Add Tag Mapping").setDesc("Add a new tag-emoji mapping").addButton((button) => button.setButtonText("Add New Tag").onClick(async () => {
      this.plugin.settings.tagMappings.push({
        tag: "newtag",
        uncheckedEmoji: "\u2B55",
        checkedEmoji: "\u2705"
      });
      await this.plugin.saveSettings();
      console.log("Added new tag mapping:", this.plugin.settings.tagMappings);
      this.display();
    }));
    new import_obsidian.Setting(containerEl).setName("Reset Settings").setDesc("Restore all settings to their defaults").addButton((button) => button.setButtonText("Restore Defaults").onClick(async () => {
      this.plugin.settings = Object.assign({}, DEFAULT_SETTINGS);
      await this.plugin.saveSettings();
      console.log("Reset settings to defaults:", this.plugin.settings);
      this.display();
      new import_obsidian.Notice("Settings restored to defaults");
    }));
    new import_obsidian.Setting(containerEl).setName("Apply Changes").setDesc("Apply emoji changes to all open notes").addButton((button) => button.setButtonText("Apply Changes").onClick(() => {
      this.plugin.refreshAllNotes();
    }));
    this.testEl = containerEl.createDiv();
    this.updateTestSection();
  }
};

// src/processor.ts
var import_obsidian2 = __toModule(require("obsidian"));
var EmojiRenderChild = class extends import_obsidian2.MarkdownRenderChild {
  constructor(span) {
    super(span);
    this.span = span;
  }
  onunload() {
  }
};
var CheckboxProcessor = class {
  static findTagInLine(listItem) {
    const text = listItem.textContent || "";
    const tagMatch = text.replace(/^[^\w\s#]*\s*/, "").match(/#(\w+)/);
    return tagMatch ? tagMatch[1] : null;
  }
  static getEmojisForTag(plugin, tag, isChecked) {
    if (tag) {
      const mapping = plugin.settings.tagMappings.find((m) => m.tag.toLowerCase() === tag.toLowerCase());
      if (mapping) {
        return isChecked ? mapping.checkedEmoji : mapping.uncheckedEmoji;
      }
    }
    return isChecked ? plugin.settings.checkedEmoji : plugin.settings.uncheckedEmoji;
  }
  static updateEditorContent(editor, lineIndex, newEmoji) {
    const lineText = editor.getLine(lineIndex);
    const newText = lineText.replace(/^[^\w\s#]*\s*/, `${newEmoji} `);
    const change = {
      from: { line: lineIndex, ch: 0 },
      to: { line: lineIndex, ch: lineText.length },
      text: newText
    };
    editor.transaction({ changes: [change] });
  }
  static createEmojiSpan(emoji) {
    const span = document.createElement("span");
    span.className = "task-list-emoji";
    span.textContent = emoji;
    return span;
  }
  static styleContainer(container) {
    if (container) {
      container.style.display = "inline-block";
      container.style.verticalAlign = "top";
      container.style.marginRight = "0.5em";
    }
  }
  static processCheckbox(plugin, checkbox, index, editor, sectionInfo, ctx) {
    const listItem = checkbox.closest("li.task-list-item");
    if (!listItem)
      return;
    const tag = this.findTagInLine(listItem);
    const emoji = this.getEmojisForTag(plugin, tag, checkbox.checked);
    const span = this.createEmojiSpan(emoji);
    if (editor && sectionInfo) {
      this.updateEditorContent(editor, sectionInfo.lineStart + index, emoji);
    }
    this.setupEventListeners(plugin, checkbox, span, tag, index, editor, sectionInfo, ctx);
    this.styleContainer(checkbox.parentElement);
    checkbox.style.display = "none";
    checkbox.after(span);
  }
  static setupEventListeners(plugin, checkbox, span, tag, index, editor, sectionInfo, ctx) {
    const updateEmoji = (isChecked) => {
      const newEmoji = this.getEmojisForTag(plugin, tag, isChecked);
      span.textContent = newEmoji;
      if (editor && sectionInfo) {
        this.updateEditorContent(editor, sectionInfo.lineStart + index, newEmoji);
      }
    };
    const toggleCheckbox = async () => {
      checkbox.checked = !checkbox.checked;
      updateEmoji(checkbox.checked);
      checkbox.dispatchEvent(new Event("change", { bubbles: true }));
      checkbox.dispatchEvent(new Event("click", { bubbles: true }));
      if (ctx.sourcePath) {
        ctx.addChild(new EmojiRenderChild(span));
      }
    };
    span.addEventListener("click", async (e) => {
      e.preventDefault();
      e.stopPropagation();
      await toggleCheckbox();
    });
    checkbox.addEventListener("change", () => {
      updateEmoji(checkbox.checked);
    });
  }
};
var processCheckboxes = function(el, ctx) {
  const checkboxes = el.querySelectorAll('li.task-list-item input[type="checkbox"]');
  const view = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
  const editor = view == null ? void 0 : view.editor;
  const sectionInfo = ctx.getSectionInfo(el);
  checkboxes.forEach((checkbox, index) => {
    if (!(checkbox instanceof HTMLInputElement))
      return;
    CheckboxProcessor.processCheckbox(this, checkbox, index, editor, sectionInfo, ctx);
  });
};

// src/main.ts
var EmojiChecklistPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    await this.loadSettings();
    console.log("Plugin loaded with settings:", this.settings);
    this.registerMarkdownPostProcessor(processCheckboxes.bind(this));
    this.addSettingTab(new EmojiChecklistSettingTab(this.app, this));
  }
  async loadSettings() {
    const loadedData = await this.loadData();
    console.log("Loaded data:", loadedData);
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
    console.log("Merged settings:", this.settings);
  }
  async saveSettings() {
    console.log("Saving settings:", this.settings);
    await this.saveData(this.settings);
  }
  refreshAllNotes() {
    this.app.workspace.trigger("markdown-preview-refresh");
    this.app.workspace.iterateAllLeaves((leaf) => {
      var _a;
      if (leaf.view.getViewType() === "markdown") {
        (_a = leaf.view.previewMode) == null ? void 0 : _a.rerender(true);
      }
    });
    new import_obsidian3.Notice("Applied emoji changes to all notes");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvcHJvY2Vzc29yLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4sIE5vdGljZSwgVmlldyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEVtb2ppQ2hlY2tsaXN0U2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IEVtb2ppQ2hlY2tsaXN0U2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgcHJvY2Vzc0NoZWNrYm94ZXMgfSBmcm9tICcuL3Byb2Nlc3Nvcic7XG5cbmludGVyZmFjZSBNYXJrZG93blZpZXcgZXh0ZW5kcyBWaWV3IHtcbiAgICBwcmV2aWV3TW9kZT86IHtcbiAgICAgICAgcmVyZW5kZXI6IChmb3JjZT86IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW1vamlDaGVja2xpc3RQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBFbW9qaUNoZWNrbGlzdFNldHRpbmdzO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgICAgICBjb25zb2xlLmxvZygnUGx1Z2luIGxvYWRlZCB3aXRoIHNldHRpbmdzOicsIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyTWFya2Rvd25Qb3N0UHJvY2Vzc29yKHByb2Nlc3NDaGVja2JveGVzLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEVtb2ppQ2hlY2tsaXN0U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0xvYWRlZCBkYXRhOicsIGxvYWRlZERhdGEpO1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgbG9hZGVkRGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNZXJnZWQgc2V0dGluZ3M6JywgdGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnU2F2aW5nIHNldHRpbmdzOicsIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIHJlZnJlc2hBbGxOb3RlcygpIHtcbiAgICAgICAgLy8gRm9yY2UgcmVmcmVzaCBhbGwgbWFya2Rvd24gdmlld3NcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ21hcmtkb3duLXByZXZpZXctcmVmcmVzaCcpO1xuICAgICAgICBcbiAgICAgICAgLy8gRm9yY2UgcmUtcmVuZGVyIG9mIGFsbCBsZWFmIHZpZXdzXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKGxlYWYgPT4ge1xuICAgICAgICAgICAgaWYgKGxlYWYudmlldy5nZXRWaWV3VHlwZSgpID09PSAnbWFya2Rvd24nKSB7XG4gICAgICAgICAgICAgICAgKGxlYWYudmlldyBhcyBNYXJrZG93blZpZXcpLnByZXZpZXdNb2RlPy5yZXJlbmRlcih0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IE5vdGljZSgnQXBwbGllZCBlbW9qaSBjaGFuZ2VzIHRvIGFsbCBub3RlcycpO1xuICAgIH1cbn0iLCAiZXhwb3J0IGludGVyZmFjZSBUYWdFbW9qaU1hcHBpbmcge1xuICAgIHRhZzogc3RyaW5nO1xuICAgIHVuY2hlY2tlZEVtb2ppOiBzdHJpbmc7XG4gICAgY2hlY2tlZEVtb2ppOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW1vamlDaGVja2xpc3RTZXR0aW5ncyB7XG4gICAgY2hlY2tlZEVtb2ppOiBzdHJpbmc7XG4gICAgdW5jaGVja2VkRW1vamk6IHN0cmluZztcbiAgICB0YWdNYXBwaW5nczogVGFnRW1vamlNYXBwaW5nW107XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBFbW9qaUNoZWNrbGlzdFNldHRpbmdzID0ge1xuICAgIGNoZWNrZWRFbW9qaTogJ1x1MjcwNScsXG4gICAgdW5jaGVja2VkRW1vamk6ICdcdTJCMUNcdUZFMEYnLFxuICAgIHRhZ01hcHBpbmdzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRhZzogJ3N0b3BwZXInLFxuICAgICAgICAgICAgdW5jaGVja2VkRW1vamk6ICdcdUQ4M0RcdURFRDEnLFxuICAgICAgICAgICAgY2hlY2tlZEVtb2ppOiAnXHUyNzA1J1xuICAgICAgICB9XG4gICAgXVxufTsiLCAiaW1wb3J0IHtBcHAsIE5vdGljZSwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZ30gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEVtb2ppQ2hlY2tsaXN0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQge0RFRkFVTFRfU0VUVElOR1N9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgRW1vamlDaGVja2xpc3RTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBFbW9qaUNoZWNrbGlzdFBsdWdpbjtcbiAgICB0ZXN0RWw6IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW1vamlDaGVja2xpc3RQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICB1cGRhdGVUZXN0U2VjdGlvbigpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudGVzdEVsKSB7XG4gICAgICAgICAgICB0aGlzLnRlc3RFbC5lbXB0eSgpO1xuXG4gICAgICAgICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLnRlc3RFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdMaXZlIFByZXZpZXcnIH0pO1xuXG4gICAgICAgICAgICBjb25zdCB1bmNoZWNrZWRFeGFtcGxlID0gdGhpcy50ZXN0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcbiAgICAgICAgICAgIHVuY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdVbmNoZWNrZWQgZXhhbXBsZTogJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IHVuY2hlY2tlZENvbnRhaW5lciA9IHVuY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ3Rhc2stcHJldmlldycgfSk7XG4gICAgICAgICAgICB1bmNoZWNrZWRDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogdGhpcy5wbHVnaW4uc2V0dGluZ3MudW5jaGVja2VkRW1vamksXG4gICAgICAgICAgICAgICAgY2xzOiAnZW1vamktcHJldmlldydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdW5jaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnIFNhbXBsZSB0YXNrJyB9KTtcblxuICAgICAgICAgICAgY29uc3QgY2hlY2tlZEV4YW1wbGUgPSB0aGlzLnRlc3RFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZXR0aW5nLWl0ZW0nIH0pO1xuICAgICAgICAgICAgY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdDaGVja2VkIGV4YW1wbGU6ICcgfSk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2VkQ29udGFpbmVyID0gY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ3Rhc2stcHJldmlldycgfSk7XG4gICAgICAgICAgICBjaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrZWRFbW9qaSxcbiAgICAgICAgICAgICAgICBjbHM6ICdlbW9qaS1wcmV2aWV3J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2VkVGV4dCA9IGNoZWNrZWRDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICcgU2FtcGxlIHRhc2snIH0pO1xuICAgICAgICAgICAgY2hlY2tlZFRleHQuc3R5bGUudGV4dERlY29yYXRpb24gPSAnbGluZS10aHJvdWdoJztcbiAgICAgICAgICAgIGNoZWNrZWRUZXh0LnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblxuICAgICAgICAgICAgLy8gQWRkIHRhZyBleGFtcGxlc1xuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YWdIZWFkZXIgPSB0aGlzLnRlc3RFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdUYWcgRXhhbXBsZXMnIH0pO1xuICAgICAgICAgICAgICAgIHRhZ0hlYWRlci5zdHlsZS5tYXJnaW5Ub3AgPSAnMmVtJztcbiAgICAgICAgICAgICAgICB0YWdIZWFkZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1hcHBpbmcgb2YgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnVW5jaGVja2VkRXhhbXBsZSA9IHRoaXMudGVzdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbScgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhZ1VuY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGAjJHttYXBwaW5nLnRhZ30gdW5jaGVja2VkOiBgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWdVbmNoZWNrZWRDb250YWluZXIgPSB0YWdVbmNoZWNrZWRFeGFtcGxlLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICd0YXNrLXByZXZpZXcnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0YWdVbmNoZWNrZWRDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBtYXBwaW5nLnVuY2hlY2tlZEVtb2ppLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xzOiAnZW1vamktcHJldmlldydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhZ1VuY2hlY2tlZENvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYCBTYW1wbGUgIyR7bWFwcGluZy50YWd9IHRhc2tgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZ0NoZWNrZWRFeGFtcGxlID0gdGhpcy50ZXN0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGAjJHttYXBwaW5nLnRhZ30gY2hlY2tlZDogYCB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnQ2hlY2tlZENvbnRhaW5lciA9IHRhZ0NoZWNrZWRFeGFtcGxlLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICd0YXNrLXByZXZpZXcnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0YWdDaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbWFwcGluZy5jaGVja2VkRW1vamksXG4gICAgICAgICAgICAgICAgICAgICAgICBjbHM6ICdlbW9qaS1wcmV2aWV3J1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnQ2hlY2tlZFRleHQgPSB0YWdDaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgIFNhbXBsZSAjJHttYXBwaW5nLnRhZ30gdGFza2AgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NoZWNrZWRUZXh0LnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ2xpbmUtdGhyb3VnaCc7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NoZWNrZWRUZXh0LnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblxuICAgICAgICAgICAgICAgICAgICB0YWdVbmNoZWNrZWRFeGFtcGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwLjVlbSc7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NoZWNrZWRFeGFtcGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwLjVlbSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBoZWFkZXIuc3R5bGUubWFyZ2luVG9wID0gJzJlbSc7XG4gICAgICAgICAgICBoZWFkZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XG4gICAgICAgICAgICB1bmNoZWNrZWRFeGFtcGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwLjVlbSc7XG4gICAgICAgICAgICBjaGVja2VkRXhhbXBsZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMC41ZW0nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdFbW9qaSBDaGVja2xpc3QgU2V0dGluZ3MnIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgVW5jaGVja2VkIEVtb2ppJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdFbW9qaSB0byBkaXNwbGF5IGZvciB1bmNoZWNrZWQgdGFza3MnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVuY2hlY2tlZEVtb2ppKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudW5jaGVja2VkRW1vamkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGVzdFNlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgZGVmYXVsdCB1bmNoZWNrZWQgZW1vamk6JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MudW5jaGVja2VkRW1vamkpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdEZWZhdWx0IENoZWNrZWQgRW1vamknKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Vtb2ppIHRvIGRpc3BsYXkgZm9yIGNoZWNrZWQgdGFza3MnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrZWRFbW9qaSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrZWRFbW9qaSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUZXN0U2VjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRlZCBkZWZhdWx0IGNoZWNrZWQgZW1vamk6JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tlZEVtb2ppKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVGFnIE1hcHBpbmdzJyB9KTtcblxuICAgICAgICBjb25zdCB0YWdNYXBwaW5nc0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigndGFnLW1hcHBpbmdzJyk7XG5cbiAgICAgICAgLy8gQWRkIGV4aXN0aW5nIHRhZyBtYXBwaW5nc1xuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWdNYXBwaW5ncy5mb3JFYWNoKChtYXBwaW5nLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWFwcGluZ0NvbnRhaW5lciA9IHRhZ01hcHBpbmdzQ29udGFpbmVyLmNyZWF0ZURpdigndGFnLW1hcHBpbmcnKTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcobWFwcGluZ0NvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShgVGFnICMke21hcHBpbmcudGFnfWApXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcigndGFnIG5hbWUnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobWFwcGluZy50YWcpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzW2luZGV4XS50YWcgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUZXN0U2VjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgdGFnIG1hcHBpbmc6JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCd1bmNoZWNrZWQgZW1vamknKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobWFwcGluZy51bmNoZWNrZWRFbW9qaSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3NbaW5kZXhdLnVuY2hlY2tlZEVtb2ppID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGVzdFNlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGVkIHRhZyBtYXBwaW5nOicsIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignY2hlY2tlZCBlbW9qaScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShtYXBwaW5nLmNoZWNrZWRFbW9qaSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3NbaW5kZXhdLmNoZWNrZWRFbW9qaSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRlc3RTZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRlZCB0YWcgbWFwcGluZzonLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWdNYXBwaW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbigndHJhc2gnKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWdNYXBwaW5ncy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZW1vdmVkIHRhZyBtYXBwaW5nLCByZW1haW5pbmc6JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBidXR0b24gdG8gYWRkIG5ldyB0YWcgbWFwcGluZ1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdBZGQgVGFnIE1hcHBpbmcnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0FkZCBhIG5ldyB0YWctZW1vamkgbWFwcGluZycpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnQWRkIE5ldyBUYWcnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICduZXd0YWcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5jaGVja2VkRW1vamk6ICdcdTJCNTUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEVtb2ppOiAnXHUyNzA1J1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBZGRlZCBuZXcgdGFnIG1hcHBpbmc6JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnUmVzZXQgU2V0dGluZ3MnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1Jlc3RvcmUgYWxsIHNldHRpbmdzIHRvIHRoZWlyIGRlZmF1bHRzJylcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdSZXN0b3JlIERlZmF1bHRzJylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVzZXQgc2V0dGluZ3MgdG8gZGVmYXVsdHM6JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnU2V0dGluZ3MgcmVzdG9yZWQgdG8gZGVmYXVsdHMnKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQWRkIEFwcGx5IENoYW5nZXMgYnV0dG9uXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0FwcGx5IENoYW5nZXMnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0FwcGx5IGVtb2ppIGNoYW5nZXMgdG8gYWxsIG9wZW4gbm90ZXMnKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ0FwcGx5IENoYW5nZXMnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVmcmVzaEFsbE5vdGVzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIHRoaXMudGVzdEVsID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIHRoaXMudXBkYXRlVGVzdFNlY3Rpb24oKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBNYXJrZG93blBvc3RQcm9jZXNzb3IsIE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBNYXJrZG93blJlbmRlckNoaWxkLCBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBFbW9qaUNoZWNrbGlzdFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5pbnRlcmZhY2UgRWRpdG9yQ2hhbmdlIHtcbiAgICBmcm9tOiB7IGxpbmU6IG51bWJlcjsgY2g6IG51bWJlciB9O1xuICAgIHRvOiB7IGxpbmU6IG51bWJlcjsgY2g6IG51bWJlciB9O1xuICAgIHRleHQ6IHN0cmluZztcbn1cblxuY2xhc3MgRW1vamlSZW5kZXJDaGlsZCBleHRlbmRzIE1hcmtkb3duUmVuZGVyQ2hpbGQge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgc3BhbjogSFRNTFNwYW5FbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKHNwYW4pO1xuICAgIH1cblxuICAgIG9udW5sb2FkKCk6IHZvaWQge1xuICAgICAgICAvLyBDbGVhbnVwIGhhbmRsZWQgYnkgcGFyZW50XG4gICAgfVxufVxuXG5jbGFzcyBDaGVja2JveFByb2Nlc3NvciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluZFRhZ0luTGluZShsaXN0SXRlbTogSFRNTEVsZW1lbnQpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGxpc3RJdGVtLnRleHRDb250ZW50IHx8ICcnO1xuICAgICAgICBjb25zdCB0YWdNYXRjaCA9IHRleHQucmVwbGFjZSgvXlteXFx3XFxzI10qXFxzKi8sICcnKS5tYXRjaCgvIyhcXHcrKS8pO1xuICAgICAgICByZXR1cm4gdGFnTWF0Y2ggPyB0YWdNYXRjaFsxXSA6IG51bGw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0RW1vamlzRm9yVGFnKHBsdWdpbjogRW1vamlDaGVja2xpc3RQbHVnaW4sIHRhZzogc3RyaW5nIHwgbnVsbCwgaXNDaGVja2VkOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgY29uc3QgbWFwcGluZyA9IHBsdWdpbi5zZXR0aW5ncy50YWdNYXBwaW5ncy5maW5kKFxuICAgICAgICAgICAgICAgIG0gPT4gbS50YWcudG9Mb3dlckNhc2UoKSA9PT0gdGFnLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAobWFwcGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc0NoZWNrZWQgPyBtYXBwaW5nLmNoZWNrZWRFbW9qaSA6IG1hcHBpbmcudW5jaGVja2VkRW1vamk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzQ2hlY2tlZCA/IHBsdWdpbi5zZXR0aW5ncy5jaGVja2VkRW1vamkgOiBwbHVnaW4uc2V0dGluZ3MudW5jaGVja2VkRW1vamk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgdXBkYXRlRWRpdG9yQ29udGVudChcbiAgICAgICAgZWRpdG9yOiBhbnksXG4gICAgICAgIGxpbmVJbmRleDogbnVtYmVyLFxuICAgICAgICBuZXdFbW9qaTogc3RyaW5nXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxpbmVUZXh0ID0gZWRpdG9yLmdldExpbmUobGluZUluZGV4KTtcbiAgICAgICAgY29uc3QgbmV3VGV4dCA9IGxpbmVUZXh0LnJlcGxhY2UoL15bXlxcd1xccyNdKlxccyovLCBgJHtuZXdFbW9qaX0gYCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjaGFuZ2U6IEVkaXRvckNoYW5nZSA9IHtcbiAgICAgICAgICAgIGZyb206IHsgbGluZTogbGluZUluZGV4LCBjaDogMCB9LFxuICAgICAgICAgICAgdG86IHsgbGluZTogbGluZUluZGV4LCBjaDogbGluZVRleHQubGVuZ3RoIH0sXG4gICAgICAgICAgICB0ZXh0OiBuZXdUZXh0XG4gICAgICAgIH07XG5cbiAgICAgICAgZWRpdG9yLnRyYW5zYWN0aW9uKHsgY2hhbmdlczogW2NoYW5nZV0gfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlRW1vamlTcGFuKGVtb2ppOiBzdHJpbmcpOiBIVE1MU3BhbkVsZW1lbnQge1xuICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBzcGFuLmNsYXNzTmFtZSA9ICd0YXNrLWxpc3QtZW1vamknO1xuICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gZW1vamk7XG4gICAgICAgIHJldHVybiBzcGFuO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHN0eWxlQ29udGFpbmVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsKTogdm9pZCB7XG4gICAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgICAgICBjb250YWluZXIuc3R5bGUudmVydGljYWxBbGlnbiA9ICd0b3AnO1xuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuNWVtJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgcHJvY2Vzc0NoZWNrYm94KFxuICAgICAgICBwbHVnaW46IEVtb2ppQ2hlY2tsaXN0UGx1Z2luLFxuICAgICAgICBjaGVja2JveDogSFRNTElucHV0RWxlbWVudCxcbiAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgZWRpdG9yOiBhbnksXG4gICAgICAgIHNlY3Rpb25JbmZvOiBhbnksICAgXG4gICAgICAgIGN0eDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBsaXN0SXRlbSA9IGNoZWNrYm94LmNsb3Nlc3QoJ2xpLnRhc2stbGlzdC1pdGVtJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmICghbGlzdEl0ZW0pIHJldHVybjtcblxuICAgICAgICBjb25zdCB0YWcgPSB0aGlzLmZpbmRUYWdJbkxpbmUobGlzdEl0ZW0pO1xuICAgICAgICBjb25zdCBlbW9qaSA9IHRoaXMuZ2V0RW1vamlzRm9yVGFnKHBsdWdpbiwgdGFnLCBjaGVja2JveC5jaGVja2VkKTtcbiAgICAgICAgY29uc3Qgc3BhbiA9IHRoaXMuY3JlYXRlRW1vamlTcGFuKGVtb2ppKTtcblxuICAgICAgICBpZiAoZWRpdG9yICYmIHNlY3Rpb25JbmZvKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVkaXRvckNvbnRlbnQoZWRpdG9yLCBzZWN0aW9uSW5mby5saW5lU3RhcnQgKyBpbmRleCwgZW1vamkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXR1cEV2ZW50TGlzdGVuZXJzKFxuICAgICAgICAgICAgcGx1Z2luLFxuICAgICAgICAgICAgY2hlY2tib3gsXG4gICAgICAgICAgICBzcGFuLFxuICAgICAgICAgICAgdGFnLFxuICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICBlZGl0b3IsXG4gICAgICAgICAgICBzZWN0aW9uSW5mbyxcbiAgICAgICAgICAgIGN0eFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuc3R5bGVDb250YWluZXIoY2hlY2tib3gucGFyZW50RWxlbWVudCk7XG4gICAgICAgIGNoZWNrYm94LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGNoZWNrYm94LmFmdGVyKHNwYW4pO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHNldHVwRXZlbnRMaXN0ZW5lcnMoXG4gICAgICAgIHBsdWdpbjogRW1vamlDaGVja2xpc3RQbHVnaW4sXG4gICAgICAgIGNoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50LFxuICAgICAgICBzcGFuOiBIVE1MU3BhbkVsZW1lbnQsXG4gICAgICAgIHRhZzogc3RyaW5nIHwgbnVsbCxcbiAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgZWRpdG9yOiBhbnksXG4gICAgICAgIHNlY3Rpb25JbmZvOiBhbnksXG4gICAgICAgIGN0eDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB1cGRhdGVFbW9qaSA9IChpc0NoZWNrZWQ6IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0Vtb2ppID0gdGhpcy5nZXRFbW9qaXNGb3JUYWcocGx1Z2luLCB0YWcsIGlzQ2hlY2tlZCk7XG4gICAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gbmV3RW1vamk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChlZGl0b3IgJiYgc2VjdGlvbkluZm8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUVkaXRvckNvbnRlbnQoZWRpdG9yLCBzZWN0aW9uSW5mby5saW5lU3RhcnQgKyBpbmRleCwgbmV3RW1vamkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHRvZ2dsZUNoZWNrYm94ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9ICFjaGVja2JveC5jaGVja2VkO1xuICAgICAgICAgICAgdXBkYXRlRW1vamkoY2hlY2tib3guY2hlY2tlZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgZGlzcGF0Y2ggYm90aCBjaGFuZ2UgYW5kIGNsaWNrIGV2ZW50c1xuICAgICAgICAgICAgY2hlY2tib3guZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2NoYW5nZScsIHsgYnViYmxlczogdHJ1ZSB9KSk7XG4gICAgICAgICAgICBjaGVja2JveC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnY2xpY2snLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xuXG4gICAgICAgICAgICBpZiAoY3R4LnNvdXJjZVBhdGgpIHtcbiAgICAgICAgICAgICAgICBjdHguYWRkQ2hpbGQobmV3IEVtb2ppUmVuZGVyQ2hpbGQoc3BhbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGF3YWl0IHRvZ2dsZUNoZWNrYm94KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIHVwZGF0ZUVtb2ppKGNoZWNrYm94LmNoZWNrZWQpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBwcm9jZXNzQ2hlY2tib3hlczogTWFya2Rvd25Qb3N0UHJvY2Vzc29yID0gZnVuY3Rpb24oXG4gICAgdGhpczogRW1vamlDaGVja2xpc3RQbHVnaW4sXG4gICAgZWw6IEhUTUxFbGVtZW50LFxuICAgIGN0eDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dFxuKTogdm9pZCB7XG4gICAgY29uc3QgY2hlY2tib3hlcyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTElucHV0RWxlbWVudD4oJ2xpLnRhc2stbGlzdC1pdGVtIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXScpO1xuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgIGNvbnN0IGVkaXRvciA9IHZpZXc/LmVkaXRvcjtcbiAgICBjb25zdCBzZWN0aW9uSW5mbyA9IGN0eC5nZXRTZWN0aW9uSW5mbyhlbCk7XG5cbiAgICBjaGVja2JveGVzLmZvckVhY2goKGNoZWNrYm94LCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoIShjaGVja2JveCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBDaGVja2JveFByb2Nlc3Nvci5wcm9jZXNzQ2hlY2tib3goXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgY2hlY2tib3gsXG4gICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgIHNlY3Rpb25JbmZvLFxuICAgICAgICAgICAgY3R4XG4gICAgICAgICk7XG4gICAgfSk7XG59O1xuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQSx1QkFBcUM7OztBQ1k5QixJQUFNLG1CQUEyQztBQUFBLEVBQ3BELGNBQWM7QUFBQSxFQUNkLGdCQUFnQjtBQUFBLEVBQ2hCLGFBQWE7QUFBQSxJQUNUO0FBQUEsTUFDSSxLQUFLO0FBQUEsTUFDTCxnQkFBZ0I7QUFBQSxNQUNoQixjQUFjO0FBQUE7QUFBQTtBQUFBOzs7QUNuQjFCLHNCQUFxRDtBQUk5Qyw2Q0FBdUMsaUNBQWlCO0FBQUEsRUFJM0QsWUFBWSxLQUFVLFFBQThCO0FBQ2hELFVBQU0sS0FBSztBQUNYLFNBQUssU0FBUztBQUFBO0FBQUEsRUFHbEIsb0JBQTBCO0FBQ3RCLFFBQUksS0FBSyxRQUFRO0FBQ2IsV0FBSyxPQUFPO0FBRVosWUFBTSxTQUFTLEtBQUssT0FBTyxTQUFTLE1BQU0sRUFBRSxNQUFNO0FBRWxELFlBQU0sbUJBQW1CLEtBQUssT0FBTyxTQUFTLE9BQU8sRUFBRSxLQUFLO0FBQzVELHVCQUFpQixTQUFTLFFBQVEsRUFBRSxNQUFNO0FBQzFDLFlBQU0scUJBQXFCLGlCQUFpQixTQUFTLFFBQVEsRUFBRSxLQUFLO0FBQ3BFLHlCQUFtQixTQUFTLFFBQVE7QUFBQSxRQUNoQyxNQUFNLEtBQUssT0FBTyxTQUFTO0FBQUEsUUFD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
