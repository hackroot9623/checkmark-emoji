/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};

// src/main.ts
__export(exports, {
  default: () => EmojiChecklistPlugin
});
var import_obsidian3 = __toModule(require("obsidian"));

// src/types.ts
var DEFAULT_SETTINGS = {
  checkedEmoji: "\u2705",
  uncheckedEmoji: "\u2B1C\uFE0F",
  tagMappings: [
    {
      tag: "stopper",
      uncheckedEmoji: "\u{1F6D1}",
      checkedEmoji: "\u2705"
    }
  ]
};

// src/settings.ts
var import_obsidian = __toModule(require("obsidian"));
var EmojiChecklistSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  updateTestSection() {
    if (this.testEl) {
      this.testEl.empty();
      const header = this.testEl.createEl("h3", { text: "Live Preview" });
      const uncheckedExample = this.testEl.createEl("div", { cls: "setting-item" });
      uncheckedExample.createEl("span", { text: "Unchecked example: " });
      const uncheckedContainer = uncheckedExample.createEl("span", { cls: "task-preview" });
      uncheckedContainer.createEl("span", {
        text: this.plugin.settings.uncheckedEmoji,
        cls: "emoji-preview"
      });
      uncheckedContainer.createEl("span", { text: " Sample task" });
      const checkedExample = this.testEl.createEl("div", { cls: "setting-item" });
      checkedExample.createEl("span", { text: "Checked example: " });
      const checkedContainer = checkedExample.createEl("span", { cls: "task-preview" });
      checkedContainer.createEl("span", {
        text: this.plugin.settings.checkedEmoji,
        cls: "emoji-preview"
      });
      const checkedText = checkedContainer.createEl("span", { text: " Sample task" });
      checkedText.style.textDecoration = "line-through";
      checkedText.style.color = "var(--text-muted)";
      if (this.plugin.settings.tagMappings.length > 0) {
        const tagHeader = this.testEl.createEl("h3", { text: "Tag Examples" });
        tagHeader.style.marginTop = "2em";
        tagHeader.style.marginBottom = "1em";
        for (const mapping of this.plugin.settings.tagMappings) {
          const tagUncheckedExample = this.testEl.createEl("div", { cls: "setting-item" });
          tagUncheckedExample.createEl("span", { text: `#${mapping.tag} unchecked: ` });
          const tagUncheckedContainer = tagUncheckedExample.createEl("span", { cls: "task-preview" });
          tagUncheckedContainer.createEl("span", {
            text: mapping.uncheckedEmoji,
            cls: "emoji-preview"
          });
          tagUncheckedContainer.createEl("span", { text: ` Sample #${mapping.tag} task` });
          const tagCheckedExample = this.testEl.createEl("div", { cls: "setting-item" });
          tagCheckedExample.createEl("span", { text: `#${mapping.tag} checked: ` });
          const tagCheckedContainer = tagCheckedExample.createEl("span", { cls: "task-preview" });
          tagCheckedContainer.createEl("span", {
            text: mapping.checkedEmoji,
            cls: "emoji-preview"
          });
          const tagCheckedText = tagCheckedContainer.createEl("span", { text: ` Sample #${mapping.tag} task` });
          tagCheckedText.style.textDecoration = "line-through";
          tagCheckedText.style.color = "var(--text-muted)";
          tagUncheckedExample.style.marginBottom = "0.5em";
          tagCheckedExample.style.marginBottom = "0.5em";
        }
      }
      header.style.marginTop = "2em";
      header.style.marginBottom = "1em";
      uncheckedExample.style.marginBottom = "0.5em";
      checkedExample.style.marginBottom = "0.5em";
    }
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Emoji Checklist Settings" });
    new import_obsidian.Setting(containerEl).setName("Default Unchecked Emoji").setDesc("Emoji to display for unchecked tasks").addText((text) => text.setValue(this.plugin.settings.uncheckedEmoji).onChange(async (value) => {
      this.plugin.settings.uncheckedEmoji = value;
      await this.plugin.saveSettings();
      this.updateTestSection();
      console.log("Updated default unchecked emoji:", this.plugin.settings.uncheckedEmoji);
    }));
    new import_obsidian.Setting(containerEl).setName("Default Checked Emoji").setDesc("Emoji to display for checked tasks").addText((text) => text.setValue(this.plugin.settings.checkedEmoji).onChange(async (value) => {
      this.plugin.settings.checkedEmoji = value;
      await this.plugin.saveSettings();
      this.updateTestSection();
      console.log("Updated default checked emoji:", this.plugin.settings.checkedEmoji);
    }));
    containerEl.createEl("h3", { text: "Tag Mappings" });
    const tagMappingsContainer = containerEl.createDiv("tag-mappings");
    this.plugin.settings.tagMappings.forEach((mapping, index) => {
      const mappingContainer = tagMappingsContainer.createDiv("tag-mapping");
      new import_obsidian.Setting(mappingContainer).setName(`Tag #${mapping.tag}`).addText((text) => text.setPlaceholder("tag name").setValue(mapping.tag).onChange(async (value) => {
        this.plugin.settings.tagMappings[index].tag = value;
        await this.plugin.saveSettings();
        this.updateTestSection();
        console.log("Updated tag mapping:", this.plugin.settings.tagMappings);
      })).addText((text) => text.setPlaceholder("unchecked emoji").setValue(mapping.uncheckedEmoji).onChange(async (value) => {
        this.plugin.settings.tagMappings[index].uncheckedEmoji = value;
        await this.plugin.saveSettings();
        this.updateTestSection();
        console.log("Updated tag mapping:", this.plugin.settings.tagMappings);
      })).addText((text) => text.setPlaceholder("checked emoji").setValue(mapping.checkedEmoji).onChange(async (value) => {
        this.plugin.settings.tagMappings[index].checkedEmoji = value;
        await this.plugin.saveSettings();
        this.updateTestSection();
        console.log("Updated tag mapping:", this.plugin.settings.tagMappings);
      })).addButton((button) => button.setIcon("trash").onClick(async () => {
        this.plugin.settings.tagMappings.splice(index, 1);
        await this.plugin.saveSettings();
        this.display();
        console.log("Removed tag mapping, remaining:", this.plugin.settings.tagMappings);
      }));
    });
    new import_obsidian.Setting(containerEl).setName("Add Tag Mapping").setDesc("Add a new tag-emoji mapping").addButton((button) => button.setButtonText("Add New Tag").onClick(async () => {
      this.plugin.settings.tagMappings.push({
        tag: "newtag",
        uncheckedEmoji: "\u2B55",
        checkedEmoji: "\u2705"
      });
      await this.plugin.saveSettings();
      console.log("Added new tag mapping:", this.plugin.settings.tagMappings);
      this.display();
    }));
    new import_obsidian.Setting(containerEl).setName("Reset Settings").setDesc("Restore all settings to their defaults").addButton((button) => button.setButtonText("Restore Defaults").onClick(async () => {
      this.plugin.settings = Object.assign({}, DEFAULT_SETTINGS);
      await this.plugin.saveSettings();
      console.log("Reset settings to defaults:", this.plugin.settings);
      this.display();
      new import_obsidian.Notice("Settings restored to defaults");
    }));
    new import_obsidian.Setting(containerEl).setName("Apply Changes").setDesc("Apply emoji changes to all open notes").addButton((button) => button.setButtonText("Apply Changes").onClick(() => {
      this.plugin.refreshAllNotes();
    }));
    this.testEl = containerEl.createDiv();
    this.updateTestSection();
  }
};

// src/processor.ts
var import_obsidian2 = __toModule(require("obsidian"));
var EmojiRenderChild = class extends import_obsidian2.MarkdownRenderChild {
  constructor(span) {
    super(span);
    this.span = span;
  }
  onunload() {
  }
};
var CheckboxProcessor = class {
  static findTagInLine(listItem) {
    const text = listItem.textContent || "";
    const tagMatch = text.replace(/^[^\w\s#]*\s*/, "").match(/#(\w+)/);
    return tagMatch ? tagMatch[1] : null;
  }
  static getEmojisForTag(plugin, tag, isChecked) {
    if (tag) {
      const mapping = plugin.settings.tagMappings.find((m) => m.tag.toLowerCase() === tag.toLowerCase());
      if (mapping) {
        return isChecked ? mapping.checkedEmoji : mapping.uncheckedEmoji;
      }
    }
    return isChecked ? plugin.settings.checkedEmoji : plugin.settings.uncheckedEmoji;
  }
  static updateEditorContent(editor, lineIndex, newEmoji) {
    const lineText = editor.getLine(lineIndex);
    const newText = lineText.replace(/^[^\w\s#]*\s*/, `${newEmoji} `);
    const change = {
      from: { line: lineIndex, ch: 0 },
      to: { line: lineIndex, ch: lineText.length },
      text: newText
    };
    editor.transaction({ changes: [change] });
  }
  static createEmojiSpan(emoji) {
    const span = document.createElement("span");
    span.className = "task-list-emoji";
    span.textContent = emoji;
    return span;
  }
  static styleContainer(container) {
    if (container) {
      container.style.display = "flex";
      container.style.alignItems = "center";
      container.style.gap = "0.5em";
    }
  }
  static processCheckbox(plugin, checkbox, index, editor, sectionInfo, ctx) {
    const listItem = checkbox.closest("li.task-list-item");
    if (!listItem)
      return;
    const tag = this.findTagInLine(listItem);
    const emoji = this.getEmojisForTag(plugin, tag, checkbox.checked);
    const span = this.createEmojiSpan(emoji);
    if (editor && sectionInfo) {
      this.updateEditorContent(editor, sectionInfo.lineStart + index, emoji);
    }
    this.setupEventListeners(plugin, checkbox, span, tag, index, editor, sectionInfo, ctx);
    this.styleContainer(checkbox.parentElement);
    checkbox.style.display = "none";
    checkbox.after(span);
  }
  static setupEventListeners(plugin, checkbox, span, tag, index, editor, sectionInfo, ctx) {
    const updateEmoji = (isChecked) => {
      const newEmoji = this.getEmojisForTag(plugin, tag, isChecked);
      span.textContent = newEmoji;
      if (editor && sectionInfo) {
        this.updateEditorContent(editor, sectionInfo.lineStart + index, newEmoji);
      }
    };
    span.addEventListener("click", async (e) => {
      e.preventDefault();
      e.stopPropagation();
      checkbox.checked = !checkbox.checked;
      updateEmoji(checkbox.checked);
      checkbox.dispatchEvent(new Event("change", { bubbles: true }));
      if (ctx.sourcePath) {
        ctx.addChild(new EmojiRenderChild(span));
      }
    });
    checkbox.addEventListener("change", () => {
      updateEmoji(checkbox.checked);
    });
  }
};
var processCheckboxes = function(el, ctx) {
  const checkboxes = el.querySelectorAll('li.task-list-item input[type="checkbox"]');
  const view = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
  const editor = view == null ? void 0 : view.editor;
  const sectionInfo = ctx.getSectionInfo(el);
  checkboxes.forEach((checkbox, index) => {
    if (!(checkbox instanceof HTMLInputElement))
      return;
    CheckboxProcessor.processCheckbox(this, checkbox, index, editor, sectionInfo, ctx);
  });
};

// src/main.ts
var EmojiChecklistPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    await this.loadSettings();
    console.log("Plugin loaded with settings:", this.settings);
    this.registerMarkdownPostProcessor(processCheckboxes.bind(this));
    this.addSettingTab(new EmojiChecklistSettingTab(this.app, this));
  }
  async loadSettings() {
    const loadedData = await this.loadData();
    console.log("Loaded data:", loadedData);
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
    console.log("Merged settings:", this.settings);
  }
  async saveSettings() {
    console.log("Saving settings:", this.settings);
    await this.saveData(this.settings);
  }
  refreshAllNotes() {
    this.app.workspace.trigger("markdown-preview-refresh");
    this.app.workspace.iterateAllLeaves((leaf) => {
      var _a;
      if (leaf.view.getViewType() === "markdown") {
        (_a = leaf.view.previewMode) == null ? void 0 : _a.rerender(true);
      }
    });
    new import_obsidian3.Notice("Applied emoji changes to all notes");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3R5cGVzLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvcHJvY2Vzc29yLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4sIE5vdGljZSwgVmlldyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEVtb2ppQ2hlY2tsaXN0U2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IEVtb2ppQ2hlY2tsaXN0U2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgcHJvY2Vzc0NoZWNrYm94ZXMgfSBmcm9tICcuL3Byb2Nlc3Nvcic7XG5cbmludGVyZmFjZSBNYXJrZG93blZpZXcgZXh0ZW5kcyBWaWV3IHtcbiAgICBwcmV2aWV3TW9kZT86IHtcbiAgICAgICAgcmVyZW5kZXI6IChmb3JjZT86IGJvb2xlYW4pID0+IHZvaWQ7XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW1vamlDaGVja2xpc3RQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBFbW9qaUNoZWNrbGlzdFNldHRpbmdzO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgICAgICBjb25zb2xlLmxvZygnUGx1Z2luIGxvYWRlZCB3aXRoIHNldHRpbmdzOicsIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyTWFya2Rvd25Qb3N0UHJvY2Vzc29yKHByb2Nlc3NDaGVja2JveGVzLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEVtb2ppQ2hlY2tsaXN0U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0xvYWRlZCBkYXRhOicsIGxvYWRlZERhdGEpO1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgbG9hZGVkRGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNZXJnZWQgc2V0dGluZ3M6JywgdGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnU2F2aW5nIHNldHRpbmdzOicsIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIHJlZnJlc2hBbGxOb3RlcygpIHtcbiAgICAgICAgLy8gRm9yY2UgcmVmcmVzaCBhbGwgbWFya2Rvd24gdmlld3NcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnRyaWdnZXIoJ21hcmtkb3duLXByZXZpZXctcmVmcmVzaCcpO1xuICAgICAgICBcbiAgICAgICAgLy8gRm9yY2UgcmUtcmVuZGVyIG9mIGFsbCBsZWFmIHZpZXdzXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKGxlYWYgPT4ge1xuICAgICAgICAgICAgaWYgKGxlYWYudmlldy5nZXRWaWV3VHlwZSgpID09PSAnbWFya2Rvd24nKSB7XG4gICAgICAgICAgICAgICAgKGxlYWYudmlldyBhcyBNYXJrZG93blZpZXcpLnByZXZpZXdNb2RlPy5yZXJlbmRlcih0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IE5vdGljZSgnQXBwbGllZCBlbW9qaSBjaGFuZ2VzIHRvIGFsbCBub3RlcycpO1xuICAgIH1cbn0iLCAiZXhwb3J0IGludGVyZmFjZSBUYWdFbW9qaU1hcHBpbmcge1xuICAgIHRhZzogc3RyaW5nO1xuICAgIHVuY2hlY2tlZEVtb2ppOiBzdHJpbmc7XG4gICAgY2hlY2tlZEVtb2ppOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRW1vamlDaGVja2xpc3RTZXR0aW5ncyB7XG4gICAgY2hlY2tlZEVtb2ppOiBzdHJpbmc7XG4gICAgdW5jaGVja2VkRW1vamk6IHN0cmluZztcbiAgICB0YWdNYXBwaW5nczogVGFnRW1vamlNYXBwaW5nW107XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBFbW9qaUNoZWNrbGlzdFNldHRpbmdzID0ge1xuICAgIGNoZWNrZWRFbW9qaTogJ1x1MjcwNScsXG4gICAgdW5jaGVja2VkRW1vamk6ICdcdTJCMUNcdUZFMEYnLFxuICAgIHRhZ01hcHBpbmdzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRhZzogJ3N0b3BwZXInLFxuICAgICAgICAgICAgdW5jaGVja2VkRW1vamk6ICdcdUQ4M0RcdURFRDEnLFxuICAgICAgICAgICAgY2hlY2tlZEVtb2ppOiAnXHUyNzA1J1xuICAgICAgICB9XG4gICAgXVxufTsiLCAiaW1wb3J0IHtBcHAsIE5vdGljZSwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZ30gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEVtb2ppQ2hlY2tsaXN0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQge0RFRkFVTFRfU0VUVElOR1N9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgRW1vamlDaGVja2xpc3RTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBFbW9qaUNoZWNrbGlzdFBsdWdpbjtcbiAgICB0ZXN0RWw6IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRW1vamlDaGVja2xpc3RQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICB1cGRhdGVUZXN0U2VjdGlvbigpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudGVzdEVsKSB7XG4gICAgICAgICAgICB0aGlzLnRlc3RFbC5lbXB0eSgpO1xuXG4gICAgICAgICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLnRlc3RFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdMaXZlIFByZXZpZXcnIH0pO1xuXG4gICAgICAgICAgICBjb25zdCB1bmNoZWNrZWRFeGFtcGxlID0gdGhpcy50ZXN0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcbiAgICAgICAgICAgIHVuY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdVbmNoZWNrZWQgZXhhbXBsZTogJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IHVuY2hlY2tlZENvbnRhaW5lciA9IHVuY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ3Rhc2stcHJldmlldycgfSk7XG4gICAgICAgICAgICB1bmNoZWNrZWRDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogdGhpcy5wbHVnaW4uc2V0dGluZ3MudW5jaGVja2VkRW1vamksXG4gICAgICAgICAgICAgICAgY2xzOiAnZW1vamktcHJldmlldydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdW5jaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnIFNhbXBsZSB0YXNrJyB9KTtcblxuICAgICAgICAgICAgY29uc3QgY2hlY2tlZEV4YW1wbGUgPSB0aGlzLnRlc3RFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZXR0aW5nLWl0ZW0nIH0pO1xuICAgICAgICAgICAgY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdDaGVja2VkIGV4YW1wbGU6ICcgfSk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2VkQ29udGFpbmVyID0gY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ3Rhc2stcHJldmlldycgfSk7XG4gICAgICAgICAgICBjaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrZWRFbW9qaSxcbiAgICAgICAgICAgICAgICBjbHM6ICdlbW9qaS1wcmV2aWV3J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2VkVGV4dCA9IGNoZWNrZWRDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICcgU2FtcGxlIHRhc2snIH0pO1xuICAgICAgICAgICAgY2hlY2tlZFRleHQuc3R5bGUudGV4dERlY29yYXRpb24gPSAnbGluZS10aHJvdWdoJztcbiAgICAgICAgICAgIGNoZWNrZWRUZXh0LnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblxuICAgICAgICAgICAgLy8gQWRkIHRhZyBleGFtcGxlc1xuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YWdIZWFkZXIgPSB0aGlzLnRlc3RFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdUYWcgRXhhbXBsZXMnIH0pO1xuICAgICAgICAgICAgICAgIHRhZ0hlYWRlci5zdHlsZS5tYXJnaW5Ub3AgPSAnMmVtJztcbiAgICAgICAgICAgICAgICB0YWdIZWFkZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1hcHBpbmcgb2YgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnVW5jaGVja2VkRXhhbXBsZSA9IHRoaXMudGVzdEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NldHRpbmctaXRlbScgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhZ1VuY2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGAjJHttYXBwaW5nLnRhZ30gdW5jaGVja2VkOiBgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWdVbmNoZWNrZWRDb250YWluZXIgPSB0YWdVbmNoZWNrZWRFeGFtcGxlLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICd0YXNrLXByZXZpZXcnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0YWdVbmNoZWNrZWRDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBtYXBwaW5nLnVuY2hlY2tlZEVtb2ppLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xzOiAnZW1vamktcHJldmlldydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhZ1VuY2hlY2tlZENvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYCBTYW1wbGUgIyR7bWFwcGluZy50YWd9IHRhc2tgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZ0NoZWNrZWRFeGFtcGxlID0gdGhpcy50ZXN0RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGFnQ2hlY2tlZEV4YW1wbGUuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGAjJHttYXBwaW5nLnRhZ30gY2hlY2tlZDogYCB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnQ2hlY2tlZENvbnRhaW5lciA9IHRhZ0NoZWNrZWRFeGFtcGxlLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICd0YXNrLXByZXZpZXcnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0YWdDaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbWFwcGluZy5jaGVja2VkRW1vamksXG4gICAgICAgICAgICAgICAgICAgICAgICBjbHM6ICdlbW9qaS1wcmV2aWV3J1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnQ2hlY2tlZFRleHQgPSB0YWdDaGVja2VkQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgIFNhbXBsZSAjJHttYXBwaW5nLnRhZ30gdGFza2AgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NoZWNrZWRUZXh0LnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ2xpbmUtdGhyb3VnaCc7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NoZWNrZWRUZXh0LnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblxuICAgICAgICAgICAgICAgICAgICB0YWdVbmNoZWNrZWRFeGFtcGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwLjVlbSc7XG4gICAgICAgICAgICAgICAgICAgIHRhZ0NoZWNrZWRFeGFtcGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwLjVlbSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBoZWFkZXIuc3R5bGUubWFyZ2luVG9wID0gJzJlbSc7XG4gICAgICAgICAgICBoZWFkZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XG4gICAgICAgICAgICB1bmNoZWNrZWRFeGFtcGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwLjVlbSc7XG4gICAgICAgICAgICBjaGVja2VkRXhhbXBsZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMC41ZW0nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdFbW9qaSBDaGVja2xpc3QgU2V0dGluZ3MnIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgVW5jaGVja2VkIEVtb2ppJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdFbW9qaSB0byBkaXNwbGF5IGZvciB1bmNoZWNrZWQgdGFza3MnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVuY2hlY2tlZEVtb2ppKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudW5jaGVja2VkRW1vamkgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGVzdFNlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgZGVmYXVsdCB1bmNoZWNrZWQgZW1vamk6JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MudW5jaGVja2VkRW1vamkpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdEZWZhdWx0IENoZWNrZWQgRW1vamknKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Vtb2ppIHRvIGRpc3BsYXkgZm9yIGNoZWNrZWQgdGFza3MnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrZWRFbW9qaSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrZWRFbW9qaSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUZXN0U2VjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRlZCBkZWZhdWx0IGNoZWNrZWQgZW1vamk6JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tlZEVtb2ppKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVGFnIE1hcHBpbmdzJyB9KTtcblxuICAgICAgICBjb25zdCB0YWdNYXBwaW5nc0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigndGFnLW1hcHBpbmdzJyk7XG5cbiAgICAgICAgLy8gQWRkIGV4aXN0aW5nIHRhZyBtYXBwaW5nc1xuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWdNYXBwaW5ncy5mb3JFYWNoKChtYXBwaW5nLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWFwcGluZ0NvbnRhaW5lciA9IHRhZ01hcHBpbmdzQ29udGFpbmVyLmNyZWF0ZURpdigndGFnLW1hcHBpbmcnKTtcblxuICAgICAgICAgICAgbmV3IFNldHRpbmcobWFwcGluZ0NvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShgVGFnICMke21hcHBpbmcudGFnfWApXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcigndGFnIG5hbWUnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobWFwcGluZy50YWcpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzW2luZGV4XS50YWcgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUZXN0U2VjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgdGFnIG1hcHBpbmc6JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCd1bmNoZWNrZWQgZW1vamknKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUobWFwcGluZy51bmNoZWNrZWRFbW9qaSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3NbaW5kZXhdLnVuY2hlY2tlZEVtb2ppID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGVzdFNlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGVkIHRhZyBtYXBwaW5nOicsIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhZ01hcHBpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignY2hlY2tlZCBlbW9qaScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShtYXBwaW5nLmNoZWNrZWRFbW9qaSlcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3NbaW5kZXhdLmNoZWNrZWRFbW9qaSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRlc3RTZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVXBkYXRlZCB0YWcgbWFwcGluZzonLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWdNYXBwaW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbigndHJhc2gnKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YWdNYXBwaW5ncy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZW1vdmVkIHRhZyBtYXBwaW5nLCByZW1haW5pbmc6JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBidXR0b24gdG8gYWRkIG5ldyB0YWcgbWFwcGluZ1xuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdBZGQgVGFnIE1hcHBpbmcnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0FkZCBhIG5ldyB0YWctZW1vamkgbWFwcGluZycpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnQWRkIE5ldyBUYWcnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICduZXd0YWcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5jaGVja2VkRW1vamk6ICdcdTJCNTUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEVtb2ppOiAnXHUyNzA1J1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBZGRlZCBuZXcgdGFnIG1hcHBpbmc6JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFnTWFwcGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnUmVzZXQgU2V0dGluZ3MnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1Jlc3RvcmUgYWxsIHNldHRpbmdzIHRvIHRoZWlyIGRlZmF1bHRzJylcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdSZXN0b3JlIERlZmF1bHRzJylcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVzZXQgc2V0dGluZ3MgdG8gZGVmYXVsdHM6JywgdGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnU2V0dGluZ3MgcmVzdG9yZWQgdG8gZGVmYXVsdHMnKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQWRkIEFwcGx5IENoYW5nZXMgYnV0dG9uXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0FwcGx5IENoYW5nZXMnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0FwcGx5IGVtb2ppIGNoYW5nZXMgdG8gYWxsIG9wZW4gbm90ZXMnKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ0FwcGx5IENoYW5nZXMnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVmcmVzaEFsbE5vdGVzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIHRoaXMudGVzdEVsID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIHRoaXMudXBkYXRlVGVzdFNlY3Rpb24oKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBNYXJrZG93blBvc3RQcm9jZXNzb3IsIE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBNYXJrZG93blJlbmRlckNoaWxkLCBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBFbW9qaUNoZWNrbGlzdFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5pbnRlcmZhY2UgRWRpdG9yQ2hhbmdlIHtcbiAgICBmcm9tOiB7IGxpbmU6IG51bWJlcjsgY2g6IG51bWJlciB9O1xuICAgIHRvOiB7IGxpbmU6IG51bWJlcjsgY2g6IG51bWJlciB9O1xuICAgIHRleHQ6IHN0cmluZztcbn1cblxuY2xhc3MgRW1vamlSZW5kZXJDaGlsZCBleHRlbmRzIE1hcmtkb3duUmVuZGVyQ2hpbGQge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgc3BhbjogSFRNTFNwYW5FbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKHNwYW4pO1xuICAgIH1cblxuICAgIG9udW5sb2FkKCk6IHZvaWQge1xuICAgICAgICAvLyBDbGVhbnVwIGhhbmRsZWQgYnkgcGFyZW50XG4gICAgfVxufVxuXG5jbGFzcyBDaGVja2JveFByb2Nlc3NvciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluZFRhZ0luTGluZShsaXN0SXRlbTogSFRNTEVsZW1lbnQpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGxpc3RJdGVtLnRleHRDb250ZW50IHx8ICcnO1xuICAgICAgICBjb25zdCB0YWdNYXRjaCA9IHRleHQucmVwbGFjZSgvXlteXFx3XFxzI10qXFxzKi8sICcnKS5tYXRjaCgvIyhcXHcrKS8pO1xuICAgICAgICByZXR1cm4gdGFnTWF0Y2ggPyB0YWdNYXRjaFsxXSA6IG51bGw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0RW1vamlzRm9yVGFnKHBsdWdpbjogRW1vamlDaGVja2xpc3RQbHVnaW4sIHRhZzogc3RyaW5nIHwgbnVsbCwgaXNDaGVja2VkOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgY29uc3QgbWFwcGluZyA9IHBsdWdpbi5zZXR0aW5ncy50YWdNYXBwaW5ncy5maW5kKFxuICAgICAgICAgICAgICAgIG0gPT4gbS50YWcudG9Mb3dlckNhc2UoKSA9PT0gdGFnLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAobWFwcGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc0NoZWNrZWQgPyBtYXBwaW5nLmNoZWNrZWRFbW9qaSA6IG1hcHBpbmcudW5jaGVja2VkRW1vamk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzQ2hlY2tlZCA/IHBsdWdpbi5zZXR0aW5ncy5jaGVja2VkRW1vamkgOiBwbHVnaW4uc2V0dGluZ3MudW5jaGVja2VkRW1vamk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgdXBkYXRlRWRpdG9yQ29udGVudChcbiAgICAgICAgZWRpdG9yOiBhbnksXG4gICAgICAgIGxpbmVJbmRleDogbnVtYmVyLFxuICAgICAgICBuZXdFbW9qaTogc3RyaW5nXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxpbmVUZXh0ID0gZWRpdG9yLmdldExpbmUobGluZUluZGV4KTtcbiAgICAgICAgY29uc3QgbmV3VGV4dCA9IGxpbmVUZXh0LnJlcGxhY2UoL15bXlxcd1xccyNdKlxccyovLCBgJHtuZXdFbW9qaX0gYCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjaGFuZ2U6IEVkaXRvckNoYW5nZSA9IHtcbiAgICAgICAgICAgIGZyb206IHsgbGluZTogbGluZUluZGV4LCBjaDogMCB9LFxuICAgICAgICAgICAgdG86IHsgbGluZTogbGluZUluZGV4LCBjaDogbGluZVRleHQubGVuZ3RoIH0sXG4gICAgICAgICAgICB0ZXh0OiBuZXdUZXh0XG4gICAgICAgIH07XG5cbiAgICAgICAgZWRpdG9yLnRyYW5zYWN0aW9uKHsgY2hhbmdlczogW2NoYW5nZV0gfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlRW1vamlTcGFuKGVtb2ppOiBzdHJpbmcpOiBIVE1MU3BhbkVsZW1lbnQge1xuICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBzcGFuLmNsYXNzTmFtZSA9ICd0YXNrLWxpc3QtZW1vamknO1xuICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gZW1vamk7XG4gICAgICAgIHJldHVybiBzcGFuO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHN0eWxlQ29udGFpbmVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsKTogdm9pZCB7XG4gICAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcbiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5nYXAgPSAnMC41ZW0nO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBwcm9jZXNzQ2hlY2tib3goXG4gICAgICAgIHBsdWdpbjogRW1vamlDaGVja2xpc3RQbHVnaW4sXG4gICAgICAgIGNoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50LFxuICAgICAgICBpbmRleDogbnVtYmVyLFxuICAgICAgICBlZGl0b3I6IGFueSxcbiAgICAgICAgc2VjdGlvbkluZm86IGFueSxcbiAgICAgICAgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0XG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGxpc3RJdGVtID0gY2hlY2tib3guY2xvc2VzdCgnbGkudGFzay1saXN0LWl0ZW0nKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgaWYgKCFsaXN0SXRlbSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHRhZyA9IHRoaXMuZmluZFRhZ0luTGluZShsaXN0SXRlbSk7XG4gICAgICAgIGNvbnN0IGVtb2ppID0gdGhpcy5nZXRFbW9qaXNGb3JUYWcocGx1Z2luLCB0YWcsIGNoZWNrYm94LmNoZWNrZWQpO1xuICAgICAgICBjb25zdCBzcGFuID0gdGhpcy5jcmVhdGVFbW9qaVNwYW4oZW1vamkpO1xuXG4gICAgICAgIGlmIChlZGl0b3IgJiYgc2VjdGlvbkluZm8pIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRWRpdG9yQ29udGVudChlZGl0b3IsIHNlY3Rpb25JbmZvLmxpbmVTdGFydCArIGluZGV4LCBlbW9qaSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldHVwRXZlbnRMaXN0ZW5lcnMoXG4gICAgICAgICAgICBwbHVnaW4sXG4gICAgICAgICAgICBjaGVja2JveCxcbiAgICAgICAgICAgIHNwYW4sXG4gICAgICAgICAgICB0YWcsXG4gICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgIHNlY3Rpb25JbmZvLFxuICAgICAgICAgICAgY3R4XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5zdHlsZUNvbnRhaW5lcihjaGVja2JveC5wYXJlbnRFbGVtZW50KTtcbiAgICAgICAgY2hlY2tib3guc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgY2hlY2tib3guYWZ0ZXIoc3Bhbik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgc2V0dXBFdmVudExpc3RlbmVycyhcbiAgICAgICAgcGx1Z2luOiBFbW9qaUNoZWNrbGlzdFBsdWdpbixcbiAgICAgICAgY2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQsXG4gICAgICAgIHNwYW46IEhUTUxTcGFuRWxlbWVudCxcbiAgICAgICAgdGFnOiBzdHJpbmcgfCBudWxsLFxuICAgICAgICBpbmRleDogbnVtYmVyLFxuICAgICAgICBlZGl0b3I6IGFueSxcbiAgICAgICAgc2VjdGlvbkluZm86IGFueSxcbiAgICAgICAgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0XG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZUVtb2ppID0gKGlzQ2hlY2tlZDogYm9vbGVhbik6IHZvaWQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3RW1vamkgPSB0aGlzLmdldEVtb2ppc0ZvclRhZyhwbHVnaW4sIHRhZywgaXNDaGVja2VkKTtcbiAgICAgICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBuZXdFbW9qaTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGVkaXRvciAmJiBzZWN0aW9uSW5mbykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRWRpdG9yQ29udGVudChlZGl0b3IsIHNlY3Rpb25JbmZvLmxpbmVTdGFydCArIGluZGV4LCBuZXdFbW9qaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gIWNoZWNrYm94LmNoZWNrZWQ7XG4gICAgICAgICAgICB1cGRhdGVFbW9qaShjaGVja2JveC5jaGVja2VkKTtcbiAgICAgICAgICAgIGNoZWNrYm94LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdjaGFuZ2UnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xuXG4gICAgICAgICAgICBpZiAoY3R4LnNvdXJjZVBhdGgpIHtcbiAgICAgICAgICAgICAgICBjdHguYWRkQ2hpbGQobmV3IEVtb2ppUmVuZGVyQ2hpbGQoc3BhbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICB1cGRhdGVFbW9qaShjaGVja2JveC5jaGVja2VkKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgcHJvY2Vzc0NoZWNrYm94ZXM6IE1hcmtkb3duUG9zdFByb2Nlc3NvciA9IGZ1bmN0aW9uKFxuICAgIHRoaXM6IEVtb2ppQ2hlY2tsaXN0UGx1Z2luLFxuICAgIGVsOiBIVE1MRWxlbWVudCxcbiAgICBjdHg6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHRcbik6IHZvaWQge1xuICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KCdsaS50YXNrLWxpc3QtaXRlbSBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICBjb25zdCBlZGl0b3IgPSB2aWV3Py5lZGl0b3I7XG4gICAgY29uc3Qgc2VjdGlvbkluZm8gPSBjdHguZ2V0U2VjdGlvbkluZm8oZWwpO1xuXG4gICAgY2hlY2tib3hlcy5mb3JFYWNoKChjaGVja2JveCwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKCEoY2hlY2tib3ggaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgQ2hlY2tib3hQcm9jZXNzb3IucHJvY2Vzc0NoZWNrYm94KFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIGNoZWNrYm94LFxuICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICBlZGl0b3IsXG4gICAgICAgICAgICBzZWN0aW9uSW5mbyxcbiAgICAgICAgICAgIGN0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
